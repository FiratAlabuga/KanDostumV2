!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";!function(t){var e,n,s,r,i,o,a,u,c,h;function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return t="string"!=typeof t?String(t):t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function g(t){var e=new FileReader,n=y(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&s&&a(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,n=v(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=y(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(t,e){var n,r=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=e.method||this.method||"GET",t=n.toUpperCase(),-1<c.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function I(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}t.fetch||(e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,(i="ArrayBuffer"in t)&&(o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))}),d.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[l(t)]},d.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},d.prototype.set=function(t,e){this.map[l(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},I.error=function(){var t=new I(null,{status:0,statusText:""});return t.type="error",t},h=[301,302,303,307,308],I.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new I(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=_,t.Response=I,t.fetch=function(n,o){return new Promise(function(r,t){var e=new _(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new I(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&s&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0)}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){var e={exports:{}};return t(e,e.exports),e.exports}function y(t){try{return!!t()}catch(t){return!0}}function v(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function r(t){return d.call(t).slice(8,-1)}function s(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function u(t){return w(s(t))}function g(t){return"object"==typeof t?null!==t:"function"==typeof t}function i(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function c(t,e){return I.call(t,e)}function n(t){return T?E.createElement(t):{}}function m(t){if(!g(t))throw TypeError(String(t)+" is not an object");return t}function h(e,n){try{P(b,e,n)}catch(t){b[e]=n}return n}var o=function(t){return t&&t.Math==Math&&t},b=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||function(){return this}()||Function("return this")(),f=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,p={f:l&&!a.call({1:2},1)?function(t){t=l(this,t);return!!t&&t.enumerable}:a},d={}.toString,_="".split,w=y(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==r(t)?_.call(t,""):Object(t)}:Object,I={}.hasOwnProperty,E=b.document,T=g(E)&&g(E.createElement),S=!f&&!y(function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}),C=Object.getOwnPropertyDescriptor,N={f:f?C:function(t,e){if(t=u(t),e=i(e,!0),S)try{return C(t,e)}catch(t){}if(c(t,e))return v(!p.f.call(t,e),t[e])}},A=Object.defineProperty,k={f:f?A:function(t,e,n){if(m(t),e=i(e,!0),m(n),S)try{return A(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},P=f?function(t,e,n){return k.f(t,e,v(1,n))}:function(t,e,n){return t[e]=n,t},O="__core-js_shared__",R=b[O]||h(O,{}),x=Function.toString;"function"!=typeof R.inspectSource&&(R.inspectSource=function(t){return x.call(t)});function D(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Q+Y).toString(36)}var L,M,j,F,U,V,q,B,z=R.inspectSource,H=b.WeakMap,G="function"==typeof H&&/native code/.test(z(H)),W=!1,K=e(function(t){(t.exports=function(t,e){return R[t]||(R[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),Q=0,Y=Math.random(),X=K("keys"),J=function(t){return X[t]||(X[t]=D(t))},$={},Z=b.WeakMap;q=G?(L=R.state||(R.state=new Z),M=L.get,j=L.has,F=L.set,U=function(t,e){return e.facade=t,F.call(L,t,e),e},V=function(t){return M.call(L,t)||{}},function(t){return j.call(L,t)}):(B=J("state"),$[B]=!0,U=function(t,e){return e.facade=t,P(t,B,e),e},V=function(t){return c(t,B)?t[B]:{}},function(t){return c(t,B)});function tt(t){return"function"==typeof t?t:void 0}function et(t,e){return arguments.length<2?tt(pt[t])||tt(b[t]):pt[t]&&pt[t][e]||b[t]&&b[t][e]}function nt(t){return isNaN(t=+t)?0:(0<t?vt:dt)(t)}function rt(t){return 0<t?yt(nt(t),9007199254740991):0}function it(t,e){var n,r=u(t),i=0,o=[];for(n in r)!c($,n)&&c(r,n)&&o.push(n);for(;e.length>i;)c(r,n=e[i++])&&(~_t(o,n)||o.push(n));return o}function ot(t,e){for(var n=St(e),r=k.f,i=N.f,o=0;o<n.length;o++){var s=n[o];c(t,s)||r(t,s,i(e,s))}}function st(t,e){var n,r,i,o=t.target,s=t.global,a=t.stat,u=s?b:a?b[o]||h(o,{}):(b[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=Rt(u,n))&&i.value:u[n],!Ot(s?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;ot(r,i)}(t.sham||i&&i.sham)&&P(r,"sham",!0),ft(u,n,r,t)}}function at(t){return Object(s(t))}function ut(){}function ct(t){return"<script>"+t+"</"+qt+">"}var ht,lt={set:U,get:V,has:q,enforce:function(t){return q(t)?V(t):U(t,{})},getterFor:function(n){return function(t){var e;if(!g(t)||(e=V(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},ft=e(function(t){var e=lt.get,a=lt.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||c(n,"name")||P(n,"name",e),(r=a(n)).source||(r.source=u.join("string"==typeof e?e:""))),t!==b?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:P(t,e,n)):o?t[e]=n:h(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||z(this)})}),pt=b,dt=Math.ceil,vt=Math.floor,yt=Math.min,gt=Math.max,mt=Math.min,bt=function(a){return function(t,e,n){var r,i=u(t),o=rt(i.length),s=function(t,e){t=nt(t);return t<0?gt(t+e,0):mt(t,e)}(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}},_t={includes:bt(!0),indexOf:bt(!1)}.indexOf,wt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],It=wt.concat("length","prototype"),Et={f:Object.getOwnPropertyNames||function(t){return it(t,It)}},Tt={f:Object.getOwnPropertySymbols},St=et("Reflect","ownKeys")||function(t){var e=Et.f(m(t)),n=Tt.f;return n?e.concat(n(t)):e},Ct=/#|\.prototype\./,o=function(t,e){t=At[Nt(t)];return t==Pt||t!=kt&&("function"==typeof e?y(e):!!e)},Nt=o.normalize=function(t){return String(t).replace(Ct,".").toLowerCase()},At=o.data={},kt=o.NATIVE="N",Pt=o.POLYFILL="P",Ot=o,Rt=N.f,t=!y(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),xt=J("IE_PROTO"),Dt=Object.prototype,Lt=t?Object.getPrototypeOf:function(t){return t=at(t),c(t,xt)?t[xt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Dt:null},Mt=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return m(t),function(t){if(!g(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),jt=Object.keys||function(t){return it(t,wt)},Ft=f?Object.defineProperties:function(t,e){m(t);for(var n,r=jt(e),i=r.length,o=0;o<i;)k.f(t,n=r[o++],e[n]);return t},Ut=et("document","documentElement"),Vt="prototype",qt="script",Bt=J("IE_PROTO"),zt=function(){try{ht=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;zt=ht?function(t){t.write(ct("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ht):((t=n("iframe")).style.display="none",Ut.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ct("document.F=Object")),t.close(),t.F);for(var e=wt.length;e--;)delete zt[Vt][wt[e]];return zt()};$[Bt]=!0;function Ht(t){return c(Xt,t)||(Yt&&c(Jt,t)?Xt[t]=Jt[t]:Xt[t]=$t("Symbol."+t)),Xt[t]}function Gt(t){return void 0!==t&&(Zt.Array===t||ee[te]===t)}function Wt(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Kt(r,i,t){if(Wt(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}var Qt=Object.create||function(t,e){var n;return null!==t?(ut[Vt]=m(t),n=new ut,ut[Vt]=null,n[Bt]=t):n=zt(),void 0===e?n:Ft(n,e)},Yt=!!Object.getOwnPropertySymbols&&!y(function(){return!String(Symbol())}),a=Yt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Xt=K("wks"),Jt=b.Symbol,$t=a?Jt:Jt&&Jt.withoutSetter||D,Zt={},te=Ht("iterator"),ee=Array.prototype,O={};O[Ht("toStringTag")]="z";function ne(t){if(null!=t)return t[ce]||t["@@iterator"]||Zt[ue(t)]}function re(t){var e=t.return;return void 0!==e&&m(e.call(t)).value}function ie(t,e){this.stopped=t,this.result=e}function oe(t,e,n){function r(t){return o&&re(o),new ie(!0,t)}function i(t){return f?(m(t),d?v(t[0],t[1],r):v(t[0],t[1])):d?v(t,r):v(t)}var o,s,a,u,c,h,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=Kt(e,l,1+f+d);if(p)o=t;else{if("function"!=typeof(p=ne(t)))throw TypeError("Target is not iterable");if(Gt(p)){for(s=0,a=rt(t.length);s<a;s++)if((u=i(t[s]))&&u instanceof ie)return u;return new ie(!1)}o=p.call(t)}for(c=o.next;!(h=c.call(o)).done;){try{u=i(h.value)}catch(t){throw re(o),t}if("object"==typeof u&&u&&u instanceof ie)return u}return new ie(!1)}var H="[object z]"===String(O),se=Ht("toStringTag"),ae="Arguments"==r(function(){return arguments}()),ue=H?r:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),se))?t:ae?r(e):"Object"==(t=r(e))&&"function"==typeof e.callee?"Arguments":t},ce=Ht("iterator"),he=function(t,e){var n=this;if(!(n instanceof he))return new he(t,e);Mt&&(n=Mt(new Error(void 0),Lt(n))),void 0!==e&&P(n,"message",String(e));e=[];return oe(t,e.push,{that:e}),P(n,"errors",e),n};he.prototype=Qt(Error.prototype,{constructor:v(5,he),message:v(5,""),name:v(5,"AggregateError")}),st({global:!0},{AggregateError:he});G=H?{}.toString:function(){return"[object "+ue(this)+"]"};H||ft(Object.prototype,"toString",G,{unsafe:!0});function le(t,e,n){for(var r in e)ft(t,r,e[r],n);return t}function fe(t,e,n){t&&!c(t=n?t:t.prototype,ge)&&ye(t,ge,{configurable:!0,value:e})}function pe(t){var e=et(t),t=k.f;f&&e&&!e[me]&&t(e,me,{configurable:!0,get:function(){return this}})}function de(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}var ve=b.Promise,ye=k.f,ge=Ht("toStringTag"),me=Ht("species"),be=Ht("iterator"),_e=!1;try{var we=0,Ie={next:function(){return{done:!!we++}},return:function(){_e=!0}};Ie[be]=function(){return this},Array.from(Ie,function(){throw 2})}catch(Ms){}function Ee(t,e){if(!e&&!_e)return!1;var n=!1;try{var r={};r[be]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Te(t,e){var n;return void 0===(t=m(t).constructor)||null==(n=m(t)[Ae])?e:Wt(n)}function Se(t){var e;De.hasOwnProperty(t)&&(e=De[t],delete De[t],e())}function Ce(t){return function(){Se(t)}}var Ne,Ae=Ht("species"),Z=et("navigator","userAgent")||"",bt=/(iphone|ipod|ipad).*applewebkit/i.test(Z),ke="process"==r(b.process),Pe=b.location,o=b.setImmediate,t=b.clearImmediate,Oe=b.process,O=b.MessageChannel,Re=b.Dispatch,xe=0,De={},Le="onreadystatechange",H=function(t){Se(t.data)},G=function(t){b.postMessage(t+"",Pe.protocol+"//"+Pe.host)};o&&t||(o=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return De[++xe]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ne(xe),xe},t=function(t){delete De[t]},ke?Ne=function(t){Oe.nextTick(Ce(t))}:Re&&Re.now?Ne=function(t){Re.now(Ce(t))}:O&&!bt?(He=(O=new O).port2,O.port1.onmessage=H,Ne=Kt(He.postMessage,He,1)):b.addEventListener&&"function"==typeof postMessage&&!b.importScripts&&Pe&&"file:"!==Pe.protocol&&!y(G)?(Ne=G,b.addEventListener("message",H,!1)):Ne=Le in n("script")?function(t){Ut.appendChild(n("script"))[Le]=function(){Ut.removeChild(this),Se(t)}}:function(t){setTimeout(Ce(t),0)});var Me,je,Fe,Ue,Ve,qe,Be,ze,He={set:o,clear:t},G=N.f,Ge=He.set,H=b.MutationObserver||b.WebKitMutationObserver,o=b.document,We=b.process,t=b.Promise,G=G(b,"queueMicrotask"),G=G&&G.value;G||(Me=function(){var t,e;for(ke&&(t=We.domain)&&t.exit();je;){e=je.fn,je=je.next;try{e()}catch(t){throw je?Ue():Fe=void 0,t}}Fe=void 0,t&&t.enter()},Ue=!bt&&!ke&&H&&o?(Ve=!0,qe=o.createTextNode(""),new H(Me).observe(qe,{characterData:!0}),function(){qe.data=Ve=!Ve}):t&&t.resolve?(Be=t.resolve(void 0),ze=Be.then,function(){ze.call(Be,Me)}):ke?function(){We.nextTick(Me)}:function(){Ge.call(b,Me)});function Ke(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Wt(n),this.reject=Wt(r)}function Qe(t,e){return m(t),g(e)&&e.constructor===t?e:((0,(t=Je.f(t)).resolve)(e),t.promise)}function Ye(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var Xe=G||function(t){t={fn:t,next:void 0};Fe&&(Fe.next=t),je||(je=t,Ue()),Fe=t},Je={f:function(t){return new Ke(t)}},G=b.process,G=G&&G.versions,G=G&&G.v8;G?On=(Sn=G.split("."))[0]+Sn[1]:Z&&(!(Sn=Z.match(/Edge\/(\d+)/))||74<=Sn[1])&&(Sn=Z.match(/Chrome\/(\d+)/))&&(On=Sn[1]);function $e(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e}function Ze(l,f){var p;l.notified||(l.notified=!0,p=l.reactions,Xe(function(){for(var t=l.value,e=1==l.state,n=0;p.length>n;){var r,i,o,s=p[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===l.rejection&&An(l),l.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(yn("Promise-chain cycle")):(i=$e(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}l.reactions=[],l.notified=!1,f&&!l.rejection&&Cn(l)}))}function tn(t,e,n){var r,i;In?((r=gn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),b.dispatchEvent(r)):r={promise:e,reason:n},!En&&(i=b["on"+t])?i(r):t===Tn&&function(t,e){var n=b.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function en(e,n,r){return function(t){e(n,t,r)}}function nn(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=2,Ze(t,!0))}var rn,on,sn,an,un=On&&+On,cn=He.set,hn=Ht("species"),ln="Promise",fn=lt.get,pn=lt.set,dn=lt.getterFor(ln),vn=ve,yn=b.TypeError,gn=b.document,mn=b.process,bn=et("fetch"),_n=Je.f,wn=_n,In=!!(gn&&gn.createEvent&&b.dispatchEvent),En="function"==typeof PromiseRejectionEvent,Tn="unhandledrejection",Z=Ot(ln,function(){if(!(z(vn)!==String(vn))){if(66===un)return!0;if(!ke&&!En)return!0}if(51<=un&&/native code/.test(vn))return!1;function t(t){t(function(){},function(){})}var e=vn.resolve(1);return(e.constructor={})[hn]=t,!(e.then(function(){})instanceof t)}),Sn=Z||!Ee(function(t){vn.all(t).catch(function(){})}),Cn=function(i){cn.call(b,function(){var t,e=i.facade,n=i.value,r=Nn(i);if(r&&(t=Ye(function(){ke?mn.emit("unhandledRejection",n,e):tn(Tn,e,n)}),i.rejection=ke||Nn(i)?2:1,t.error))throw t.value})},Nn=function(t){return 1!==t.rejection&&!t.parent},An=function(e){cn.call(b,function(){var t=e.facade;ke?mn.emit("rejectionHandled",t):tn("rejectionhandled",t,e.value)})},kn=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw yn("Promise can't be resolved itself");var r=$e(t);r?Xe(function(){var e={done:!1};try{r.call(t,en(kn,e,n),en(nn,e,n))}catch(t){nn(e,t,n)}}):(n.value=t,n.state=1,Ze(n,!1))}catch(t){nn({done:!1},t,n)}}};Z&&(vn=function(t){de(this,vn,ln),Wt(t),rn.call(this);var e=fn(this);try{t(en(kn,e),en(nn,e))}catch(t){nn(e,t)}},(rn=function(t){pn(this,{type:ln,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=le(vn.prototype,{then:function(t,e){var n=dn(this),r=_n(Te(this,vn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=ke?mn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ze(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),on=function(){var t=new rn,e=fn(t);this.promise=t,this.resolve=en(kn,e),this.reject=en(nn,e)},Je.f=_n=function(t){return t===vn||t===sn?new on:wn(t)},"function"==typeof ve&&(an=ve.prototype.then,ft(ve.prototype,"then",function(t,e){var n=this;return new vn(function(t,e){an.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof bn&&st({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Qe(vn,bn.apply(b,arguments))}}))),st({global:!0,wrap:!0,forced:Z},{Promise:vn}),fe(vn,ln,!1),pe(ln),sn=et(ln),st({target:ln,stat:!0,forced:Z},{reject:function(t){var e=_n(this);return e.reject.call(void 0,t),e.promise}}),st({target:ln,stat:!0,forced:Z},{resolve:function(t){return Qe(this,t)}}),st({target:ln,stat:!0,forced:Sn},{all:function(t){var a=this,e=_n(a),u=e.resolve,c=e.reject,n=Ye(function(){var r=Wt(a.resolve),i=[],o=0,s=1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=_n(n),i=r.reject,e=Ye(function(){var e=Wt(n.resolve);oe(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),st({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Je.f(a),u=e.resolve,n=e.reject,r=Ye(function(){var r=Wt(a.resolve),i=[],o=0,s=1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var Pn="No one promise resolved";st({target:"Promise",stat:!0},{any:function(t){var u=this,e=Je.f(u),c=e.resolve,h=e.reject,n=Ye(function(){var r=Wt(u.resolve),i=[],o=0,s=1,a=!1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(et("AggregateError"))(i,Pn)))})}),--s||h(new(et("AggregateError"))(i,Pn))});return n.error&&h(n.value),e.promise}});var On=!!ve&&y(function(){ve.prototype.finally.call({then:function(){}},function(){})});st({target:"Promise",proto:!0,real:!0,forced:On},{finally:function(e){var n=Te(this,et("Promise")),t="function"==typeof e;return this.then(t?function(t){return Qe(n,e()).then(function(){return t})}:e,t?function(t){return Qe(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof ve||ve.prototype.finally||ft(ve.prototype,"finally",et("Promise").prototype.finally);He=function(o){return function(t,e){var n,r=String(s(t)),i=nt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},Z={codeAt:He(!1),charAt:He(!0)},Sn=Ht("iterator"),On=!1;[].keys&&("next"in(Qn=[].keys())?(lr=Lt(Lt(Qn)))!==Object.prototype&&(dr=lr):On=!0),c(dr=null==dr?{}:dr,Sn)||P(dr,Sn,function(){return this});function Rn(){return this}function xn(){return this}function Dn(t,e,n,r,i,o,s){d=e,d+=" Iterator",(c=n).prototype=Qt(Ln,{next:v(1,r)}),fe(c,d,!1),Zt[d]=Rn;var a,u,r=function(t){if(t===i&&p)return p;if(!jn&&t in l)return l[t];switch(t){case"keys":case Un:case Vn:return function(){return new n(this,t)}}return function(){return new n(this)}},c=e+" Iterator",h=!1,l=t.prototype,f=l[Fn]||l["@@iterator"]||i&&l[i],p=!jn&&f||r(i),d="Array"==e&&l.entries||f;if(d&&(t=Lt(d.call(new t)),Mn!==Object.prototype&&t.next&&(Lt(t)!==Mn&&(Mt?Mt(t,Mn):"function"!=typeof t[Fn]&&P(t,Fn,xn)),fe(t,c,!0))),i==Un&&f&&f.name!==Un&&(h=!0,p=function(){return f.call(this)}),l[Fn]!==p&&P(l,Fn,p),Zt[e]=p,i)if(a={values:r(Un),keys:o?p:r("keys"),entries:r(Vn)},s)for(u in a)!jn&&!h&&u in l||ft(l,u,a[u]);else st({target:e,proto:!0,forced:jn||h},a);return a}var He={IteratorPrototype:dr,BUGGY_SAFARI_ITERATORS:On},Ln=He.IteratorPrototype,Mn=He.IteratorPrototype,jn=He.BUGGY_SAFARI_ITERATORS,Fn=Ht("iterator"),Un="values",Vn="entries",qn=Z.charAt,Bn="String Iterator",zn=lt.set,Hn=lt.getterFor(Bn);Dn(String,"String",function(t){zn(this,{type:Bn,string:String(t),index:0})},function(){var t=Hn(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=qn(e,n),t.index+=n.length,{value:n,done:!1})});var Gn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Wn=Ht("unscopables"),Kn=Array.prototype;null==Kn[Wn]&&k.f(Kn,Wn,{configurable:!0,value:Qt(null)});var Qn=function(t){Kn[Wn][t]=!0},Yn="Array Iterator",Xn=lt.set,Jn=lt.getterFor(Yn),$n=Dn(Array,"Array",function(t,e){Xn(this,{type:Yn,target:u(t),index:0,kind:e})},function(){var t=Jn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Zt.Arguments=Zt.Array,Qn("keys"),Qn("values"),Qn("entries");var Zn,tr=Ht("iterator"),er=Ht("toStringTag"),nr=$n.values;for(Zn in Gn){var rr=b[Zn],ir=rr&&rr.prototype;if(ir){if(ir[tr]!==nr)try{P(ir,tr,nr)}catch(Ms){ir[tr]=nr}if(ir[er]||P(ir,er,Zn),Gn[Zn])for(var or in $n)if(ir[or]!==$n[or])try{P(ir,or,$n[or])}catch(Ms){ir[or]=$n[or]}}}pt.Promise;st({target:"Promise",stat:!0},{try:function(t){var e=Je.f(this),t=Ye(t);return(t.error?e.reject:e.resolve)(t.value),e.promise}});function sr(t,e){var n;return new(void 0===(n=ur(t)&&("function"==typeof(n=t.constructor)&&(n===Array||ur(n.prototype))||g(n)&&null===(n=n[cr]))?void 0:n)?Array:n)(0===e?0:e)}function ar(t){throw t}var ur=Array.isArray||function(t){return"Array"==r(t)},cr=Ht("species"),hr=[].push,lr=function(f){var p=1==f,d=2==f,v=3==f,y=4==f,g=6==f,m=7==f,b=5==f||g;return function(t,e,n,r){for(var i,o,s=at(t),a=w(s),u=Kt(e,n,3),c=rt(a.length),h=0,r=r||sr,l=p?r(t,c):d||m?r(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:hr.call(l,i)}else switch(f){case 4:return!1;case 7:hr.call(l,i)}return g?-1:v||y?y:l}},Sn={forEach:lr(0),map:lr(1),filter:lr(2),some:lr(3),every:lr(4),find:lr(5),findIndex:lr(6),filterOut:lr(7)},fr=Object.defineProperty,pr={},dr=function(t,e){if(c(pr,t))return pr[t];var n=[][t],r=!!c(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=c(e,0)?e[0]:ar,o=c(e,1)?e[1]:void 0;return pr[t]=!!n&&!y(function(){if(r&&!f)return 1;var t={length:-1};r?fr(t,1,{enumerable:!0,get:ar}):t[1]=1,n.call(t,i,o)})},vr=Sn.find,On="find",yr=!0,He=dr(On);On in[]&&Array(1)[On](function(){yr=!1}),st({target:"Array",proto:!0,forced:yr||!He},{find:function(t){return vr(this,t,1<arguments.length?arguments[1]:void 0)}}),Qn(On);var gr=Function.call,Z=function(t,e,n){return Kt(gr,b[t].prototype[e],n)},mr=(Z("Array","find"),Sn.findIndex),lr="findIndex",br=!0,He=dr(lr);lr in[]&&Array(1)[lr](function(){br=!1}),st({target:"Array",proto:!0,forced:br||!He},{findIndex:function(t){return mr(this,t,1<arguments.length?arguments[1]:void 0)}}),Qn(lr);function _r(t,e,n){(e=i(e))in t?k.f(t,e,v(0,n)):t[e]=n}Z("Array","findIndex");On=!Ee(function(t){Array.from(t)});st({target:"Array",stat:!0,forced:On},{from:function(t){var e,n,r,i,o,s,a=at(t),u="function"==typeof this?this:Array,c=arguments.length,h=1<c?arguments[1]:void 0,l=void 0!==h,t=ne(a),f=0;if(l&&(h=Kt(h,2<c?arguments[2]:void 0,2)),null==t||u==Array&&Gt(t))for(n=new u(e=rt(a.length));f<e;f++)s=l?h(a[f],f):a[f],_r(n,f,s);else for(o=(i=t.call(a)).next,n=new u;!(r=o.call(i)).done;f++)s=l?function(e,t,n,r){try{return r?t(m(n)[0],n[1]):t(n)}catch(t){throw re(e),t}}(i,h,[r.value,f],!0):r.value,_r(n,f,s);return n.length=f,n}});pt.Array.from;var wr,Ir,Er=Sn.some,He=!!(Ir=[]["some"])&&y(function(){Ir.call(null,wr||function(){throw 1},1)}),Qn=dr("some");st({target:"Array",proto:!0,forced:!He||!Qn},{some:function(t){return Er(this,t,1<arguments.length?arguments[1]:void 0)}});Z("Array","some");function Tr(t){return!!g(t)&&(t=ue(t),c(Rr,t)||c(xr,t))}var Sr,lr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,On=k.f,Cr=b.Int8Array,Nr=Cr&&Cr.prototype,dr=b.Uint8ClampedArray,He=dr&&dr.prototype,Ar=Cr&&Lt(Cr),kr=Nr&&Lt(Nr),Qn=Object.prototype,dr=(Qn.isPrototypeOf,Ht("toStringTag")),Pr=D("TYPED_ARRAY_TAG"),Or=lr&&!!Mt&&"Opera"!==ue(b.opera),lr=!1,Rr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},xr={BigInt64Array:8,BigUint64Array:8};for(Sr in Rr)b[Sr]||(Or=!1);if((!Or||"function"!=typeof Ar||Ar===Function.prototype)&&(Ar=function(){throw TypeError("Incorrect invocation")},Or))for(Sr in Rr)b[Sr]&&Mt(b[Sr],Ar);if((!Or||!kr||kr===Qn)&&(kr=Ar.prototype,Or))for(Sr in Rr)b[Sr]&&Mt(b[Sr].prototype,kr);if(Or&&Lt(He)!==kr&&Mt(He,kr),f&&!c(kr,dr))for(Sr in lr=!0,On(kr,dr,{get:function(){return g(this)?this[Pr]:void 0}}),Rr)b[Sr]&&P(b[Sr],Pr,Sr);var He=function(t){if(Tr(t))return t;throw TypeError("Target is not a typed array")},On=function(t,e,n){if(f){if(n)for(var r in Rr){var i=b[r];i&&c(i.prototype,t)&&delete i.prototype[t]}kr[t]&&!n||ft(kr,t,!n&&Or&&Nr[t]||e)}},dr=Ht("iterator"),lr=b.Uint8Array,Dr=$n.values,Lr=$n.keys,Mr=$n.entries,jr=He,He=On,On=lr&&lr.prototype[dr],lr=!!On&&("values"==On.name||null==On.name),On=function(){return Dr.call(jr(this))};He("entries",function(){return Mr.call(jr(this))}),He("keys",function(){return Lr.call(jr(this))}),He("values",On,!lr),He(dr,On,!lr);var Fr=Object.assign,Ur=Object.defineProperty,On=!Fr||y(function(){if(f&&1!==Fr({b:1},Fr(Ur({},"a",{enumerable:!0,get:function(){Ur(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Fr({},t)[n]||jt(Fr({},e)).join("")!=r})?function(t,e){for(var n=at(t),r=arguments.length,i=1,o=Tt.f,s=p.f;i<r;)for(var a,u=w(arguments[i++]),c=o?jt(u).concat(o(u)):jt(u),h=c.length,l=0;l<h;)a=c[l++],f&&!s.call(u,a)||(n[a]=u[a]);return n}:Fr;st({target:"Object",stat:!0,forced:Object.assign!==On},{assign:On});pt.Object.assign;var Vr=p.f,lr=function(a){return function(t){for(var e,n=u(t),r=jt(n),i=r.length,o=0,s=[];o<i;)e=r[o++],f&&!Vr.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}},On={entries:lr(!0),values:lr(!1)},qr=On.entries;st({target:"Object",stat:!0},{entries:function(t){return qr(t)}});pt.Object.entries;var Br=On.values;st({target:"Object",stat:!0},{values:function(t){return Br(t)}});pt.Object.values;function zr(t){if(g(e=t)&&(void 0!==(n=e[Hr])?!!n:"RegExp"==r(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}var Hr=Ht("match"),Gr=Ht("match"),lr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Gr]=!1,"/./"[e](n)}catch(t){}}return!1};st({target:"String",proto:!0,forced:!lr("includes")},{includes:function(t){return!!~String(s(this)).indexOf(zr(t),1<arguments.length?arguments[1]:void 0)}});Z("String","includes");var Wr,On=N.f,Kr="".startsWith,Qr=Math.min,lr=lr("startsWith"),Wr=!(lr||(!(Wr=On(String.prototype,"startsWith"))||Wr.writable));st({target:"String",proto:!0,forced:!Wr&&!lr},{startsWith:function(t){var e=String(s(this));zr(t);var n=rt(Qr(1<arguments.length?arguments[1]:void 0,e.length)),t=String(t);return Kr?Kr.call(e,t,n):e.slice(n,n+t.length)===t}});Z("String","startsWith");st({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(s(this)),n="",r=nt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});Z("String","repeat");var Yr,Xr=Ht("species"),Jr=Ht("isConcatSpreadable"),$r=9007199254740991,Zr="Maximum allowed index exceeded",lr=51<=un||!y(function(){var t=[];return t[Jr]=!1,t.concat()[0]!==t}),Z=(Yr="concat",51<=un||!y(function(){var t=[];return(t.constructor={})[Xr]=function(){return{foo:1}},1!==t[Yr](Boolean).foo}));st({target:"Array",proto:!0,forced:!lr||!Z},{concat:function(t){for(var e,n,r,i=at(this),o=sr(i,0),s=0,a=-1,u=arguments.length;a<u;a++)if(function(t){if(!g(t))return!1;var e=t[Jr];return void 0!==e?!!e:ur(t)}(r=-1===a?i:arguments[a])){if(n=rt(r.length),$r<s+n)throw TypeError(Zr);for(e=0;e<n;e++,s++)e in r&&_r(o,s,r[e])}else{if($r<=s)throw TypeError(Zr);_r(o,s++,r)}return o.length=s,o}});function ti(t){var e=pt.Symbol||(pt.Symbol={});c(e,t)||ai(e,t,{value:si.f(t)})}function ei(t,e){var n=wi[t]=Qt(vi[li]);return fi(n,{type:hi,tag:t,description:e}),f||(n.description=e),n}function ni(e,t){m(e);var n=u(t),t=jt(n).concat(Pi(n));return ui(t,function(t){f&&!ki.call(n,t)||Ai(e,t,n[t])}),e}var ri=Et.f,ii={}.toString,oi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Z={f:function(t){return oi&&"[object Window]"==ii.call(t)?function(t){try{return ri(t)}catch(t){return oi.slice()}}(t):ri(u(t))}},si={f:Ht},ai=k.f,ui=Sn.forEach,ci=J("hidden"),hi="Symbol",li="prototype",Sn=Ht("toPrimitive"),fi=lt.set,pi=lt.getterFor(hi),di=Object[li],vi=b.Symbol,yi=et("JSON","stringify"),gi=N.f,mi=k.f,bi=Z.f,_i=p.f,wi=K("symbols"),Ii=K("op-symbols"),Ei=K("string-to-symbol-registry"),Ti=K("symbol-to-string-registry"),J=K("wks"),K=b.QObject,Si=!K||!K[li]||!K[li].findChild,Ci=f&&y(function(){return 7!=Qt(mi({},"a",{get:function(){return mi(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=gi(di,e);r&&delete di[e],mi(t,e,n),r&&t!==di&&mi(di,e,r)}:mi,Ni=a?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof vi},Ai=function(t,e,n){t===di&&Ai(Ii,e,n),m(t);e=i(e,!0);return m(n),c(wi,e)?(n.enumerable?(c(t,ci)&&t[ci][e]&&(t[ci][e]=!1),n=Qt(n,{enumerable:v(0,!1)})):(c(t,ci)||mi(t,ci,v(1,{})),t[ci][e]=!0),Ci(t,e,n)):mi(t,e,n)},ki=function(t){var e=i(t,!0),t=_i.call(this,e);return!(this===di&&c(wi,e)&&!c(Ii,e))&&(!(t||!c(this,e)||!c(wi,e)||c(this,ci)&&this[ci][e])||t)},K=function(t,e){var n=u(t),t=i(e,!0);if(n!==di||!c(wi,t)||c(Ii,t)){e=gi(n,t);return!e||!c(wi,t)||c(n,ci)&&n[ci][t]||(e.enumerable=!0),e}},a=function(t){var t=bi(u(t)),e=[];return ui(t,function(t){c(wi,t)||c($,t)||e.push(t)}),e},Pi=function(t){var e=t===di,t=bi(e?Ii:u(t)),n=[];return ui(t,function(t){!c(wi,t)||e&&!c(di,t)||n.push(wi[t])}),n};Yt||(ft((vi=function(){if(this instanceof vi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=D(t),n=function(t){this===di&&n.call(Ii,t),c(this,ci)&&c(this[ci],e)&&(this[ci][e]=!1),Ci(this,e,v(1,t))};return f&&Si&&Ci(di,e,{configurable:!0,set:n}),ei(e,t)})[li],"toString",function(){return pi(this).tag}),ft(vi,"withoutSetter",function(t){return ei(D(t),t)}),p.f=ki,k.f=Ai,N.f=K,Et.f=Z.f=a,Tt.f=Pi,si.f=function(t){return ei(Ht(t),t)},f&&(mi(vi[li],"description",{configurable:!0,get:function(){return pi(this).description}}),ft(di,"propertyIsEnumerable",ki,{unsafe:!0}))),st({global:!0,wrap:!0,forced:!Yt,sham:!Yt},{Symbol:vi}),ui(jt(J),function(t){ti(t)}),st({target:hi,stat:!0,forced:!Yt},{for:function(t){var e=String(t);if(c(Ei,e))return Ei[e];t=vi(e);return Ei[e]=t,Ti[t]=e,t},keyFor:function(t){if(!Ni(t))throw TypeError(t+" is not a symbol");if(c(Ti,t))return Ti[t]},useSetter:function(){Si=!0},useSimple:function(){Si=!1}}),st({target:"Object",stat:!0,forced:!Yt,sham:!f},{create:function(t,e){return void 0===e?Qt(t):ni(Qt(t),e)},defineProperty:Ai,defineProperties:ni,getOwnPropertyDescriptor:K}),st({target:"Object",stat:!0,forced:!Yt},{getOwnPropertyNames:a,getOwnPropertySymbols:Pi}),st({target:"Object",stat:!0,forced:y(function(){Tt.f(1)})},{getOwnPropertySymbols:function(t){return Tt.f(at(t))}}),yi&&(zi=!Yt||y(function(){var t=vi();return"[null]"!=yi([t])||"{}"!=yi({a:t})||"{}"!=yi(Object(t))}),st({target:"JSON",stat:!0,forced:zi},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((g(r=e)||void 0!==t)&&!Ni(t))return ur(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Ni(e))return e}),i[1]=e,yi.apply(null,i)}})),vi[li][Sn]||P(vi[li],Sn,vi[li].valueOf),fe(vi,hi),$[ci]=!0,ti("asyncIterator");var Oi,Ri,xi,Di,Li,K=k.f,Mi=b.Symbol;!f||"function"!=typeof Mi||"description"in Mi.prototype&&void 0===Mi().description||(Oi={},ot(Ri=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Ri?new Mi(t):void 0===t?Mi():Mi(t);return""===t&&(Oi[e]=!0),e},Mi),(Wi=Ri.prototype=Mi.prototype).constructor=Ri,xi=Wi.toString,Di="Symbol(test)"==String(Mi("test")),Li=/^Symbol\((.*)\)[^)]+$/,K(Wi,"description",{configurable:!0,get:function(){var t=g(this)?this.valueOf():this,e=xi.call(t);if(c(Oi,t))return"";e=Di?e.slice(7,-1):e.replace(Li,"$1");return""===e?void 0:e}}),st({global:!0,forced:!0},{Symbol:Ri})),ti("hasInstance"),ti("isConcatSpreadable"),ti("iterator"),ti("match"),ti("matchAll"),ti("replace"),ti("search"),ti("species"),ti("split"),ti("toPrimitive"),ti("toStringTag"),ti("unscopables"),fe(b.JSON,"JSON",!0),fe(Math,"Math",!0),st({global:!0},{Reflect:{}}),fe(b.Reflect,"Reflect",!0);pt.Symbol;ti("asyncDispose"),ti("dispose"),ti("observable"),ti("patternMatch"),ti("replaceAll");si.f("iterator");var ji=!y(function(){return Object.isExtensible(Object.preventExtensions({}))}),Fi=e(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=k.f,r=D("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!g(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!c(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return ji&&s.REQUIRED&&o(t)&&!c(t,r)&&n(t),t}};$[r]=!0}),a=function(s,t,e){function n(t){var n=p[t];ft(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!g(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!g(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!g(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=b[s],p=f&&f.prototype,d=f,v={};return Ot(s,"function"!=typeof f||!(h||p.forEach&&!y(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),Fi.REQUIRED=!0):Ot(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=y(function(){r.has(1)}),a=Ee(function(t){new f(t)}),u=!h&&y(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){de(t,d,s);var n,r,i,o,n=(n=new f,r=t,t=d,Mt&&"function"==typeof(i=r.constructor)&&i!==t&&g(o=i.prototype)&&o!==t.prototype&&Mt(n,o),n);return null!=e&&oe(e,n[l],{that:n,AS_ENTRIES:c}),n})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),v[s]=d,st({global:!0,forced:d!=f},v),fe(d,s),h||e.setStrong(d,s,c),d},Ui=k.f,Vi=Fi.fastKey,qi=lt.set,Bi=lt.getterFor,zi={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=a(t),o=u(t,e);return o?o.value=n:(i.last=o={index:r=Vi(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),f?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var s=t(function(t,e){de(t,s,n),qi(t,{type:n,index:Qt(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=e&&oe(e,t[i],{that:t,AS_ENTRIES:r})}),a=Bi(n),u=function(t,e){var n,r=a(t),t=Vi(e);if("F"!==t)return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return le(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=u(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),f?n.size--:this.size--),!!r},forEach:function(t){for(var e,n=a(this),r=Kt(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),le(s.prototype,r?{get:function(t){t=u(this,t);return t&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),f&&Ui(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=Bi(e),o=Bi(r);Dn(t,e,function(t,e){qi(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),pe(e)}},Sn=(a("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},zi),pt.Map,function(t){var e,n,r,i,o=arguments.length,s=1<o?arguments[1]:void 0;return Wt(this),(e=void 0!==s)&&Wt(s),null==t?new this:(n=[],e?(r=0,i=Kt(s,2<o?arguments[2]:void 0,2),oe(t,function(t){n.push(i(t,r++))})):oe(t,n.push,{that:n}),new this(n))});st({target:"Map",stat:!0},{from:Sn});K=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)};st({target:"Map",stat:!0},{of:K});function Hi(){for(var t,e=m(this),n=Wt(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}st({target:"Map",proto:!0,real:!0,forced:W},{deleteAll:function(){return Hi.apply(this,arguments)}});st({target:"Map",proto:!0,real:!0,forced:W},{emplace:function(t,e){var n=m(this),e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n);return n.set(t,e),e}});function Gi(t){return Map.prototype.entries.call(t)}st({target:"Map",proto:!0,real:!0,forced:W},{every:function(t){var r=m(this),e=Gi(r),i=Kt(t,1<arguments.length?arguments[1]:void 0,3);return!oe(e,function(t,e,n){if(!i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",proto:!0,real:!0,forced:W},{filter:function(t){var n=m(this),e=Gi(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(n,et("Map"))),o=Wt(i.set);return oe(e,function(t,e){r(e,t,n)&&o.call(i,t,e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:W},{find:function(t){var r=m(this),e=Gi(r),i=Kt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n(e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",proto:!0,real:!0,forced:W},{findKey:function(t){var r=m(this),e=Gi(r),i=Kt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;Wt(n);var i=Wt(r.has),o=Wt(r.get),s=Wt(r.set);return oe(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});st({target:"Map",proto:!0,real:!0,forced:W},{includes:function(i){return oe(Gi(m(this)),function(t,e,n){if((r=e)===(e=i)||r!=r&&e!=e)return n();var r},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Wt(e);var r=Wt(n.set);return oe(t,function(t){r.call(n,e(t),t)}),n}}),st({target:"Map",proto:!0,real:!0,forced:W},{keyOf:function(r){return oe(Gi(m(this)),function(t,e,n){if(e===r)return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",proto:!0,real:!0,forced:W},{mapKeys:function(t){var n=m(this),e=Gi(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(n,et("Map"))),o=Wt(i.set);return oe(e,function(t,e){o.call(i,r(e,t,n),e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:W},{mapValues:function(t){var n=m(this),e=Gi(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(n,et("Map"))),o=Wt(i.set);return oe(e,function(t,e){o.call(i,t,r(e,t,n))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:W},{merge:function(t){for(var e=m(this),n=Wt(e.set),r=0;r<arguments.length;)oe(arguments[r++],n,{that:e,AS_ENTRIES:!0});return e}}),st({target:"Map",proto:!0,real:!0,forced:W},{reduce:function(n){var r=m(this),t=Gi(r),i=arguments.length<2,o=i?void 0:arguments[1];if(Wt(n),oe(t,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty map with no initial value");return o}}),st({target:"Map",proto:!0,real:!0,forced:W},{some:function(t){var r=m(this),e=Gi(r),i=Kt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",proto:!0,real:!0,forced:W},{update:function(t,e){var n=m(this),r=arguments.length;Wt(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");r=i?n.get(t):Wt(2<r?arguments[2]:void 0)(t,n);return n.set(t,e(r,t,n)),n}});var Wi=function(t,e){var n,r=m(this),i=2<arguments.length?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof i)throw TypeError("At least one callback required");return r.has(t)?(n=r.get(t),"function"==typeof e&&(n=e(n),r.set(t,n))):"function"==typeof i&&(n=i(),r.set(t,n)),n};st({target:"Map",proto:!0,real:!0,forced:W},{upsert:Wi}),st({target:"Map",proto:!0,real:!0,forced:W},{updateOrInsert:Wi});a("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},zi),pt.Set;st({target:"Set",stat:!0},{from:Sn}),st({target:"Set",stat:!0},{of:K});st({target:"Set",proto:!0,real:!0,forced:W},{addAll:function(){return function(){for(var t=m(this),e=Wt(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),st({target:"Set",proto:!0,real:!0,forced:W},{deleteAll:function(){return Hi.apply(this,arguments)}});function Ki(t){return Set.prototype.values.call(t)}st({target:"Set",proto:!0,real:!0,forced:W},{every:function(t){var n=m(this),e=Ki(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3);return!oe(e,function(t,e){if(!r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:W},{difference:function(t){var e=m(this),n=new(Te(e,et("Set")))(e),r=Wt(n.delete);return oe(t,function(t){r.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:W},{filter:function(t){var e=m(this),n=Ki(e),r=Kt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,et("Set"))),o=Wt(i.add);return oe(n,function(t){r(t,t,e)&&o.call(i,t)},{IS_ITERATOR:!0}),i}}),st({target:"Set",proto:!0,real:!0,forced:W},{find:function(t){var n=m(this),e=Ki(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e){if(r(t,t,n))return e(t)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Set",proto:!0,real:!0,forced:W},{intersection:function(t){var e=m(this),n=new(Te(e,et("Set"))),r=Wt(e.has),i=Wt(n.add);return oe(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:W},{isDisjointFrom:function(t){var n=m(this),r=Wt(n.has);return!oe(t,function(t,e){if(!0===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:W},{isSubsetOf:function(t){var e=function(t){var e=ne(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return m(e.call(t))}(this),n=m(t),r=n.has;return"function"!=typeof r&&(n=new(et("Set"))(t),r=Wt(n.has)),!oe(e,function(t,e){if(!1===r.call(n,t))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:W},{isSupersetOf:function(t){var n=m(this),r=Wt(n.has);return!oe(t,function(t,e){if(!1===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:W},{join:function(t){var e=m(this),n=Ki(e),e=void 0===t?",":String(t),t=[];return oe(n,t.push,{that:t,IS_ITERATOR:!0}),t.join(e)}}),st({target:"Set",proto:!0,real:!0,forced:W},{map:function(t){var e=m(this),n=Ki(e),r=Kt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,et("Set"))),o=Wt(i.add);return oe(n,function(t){o.call(i,r(t,t,e))},{IS_ITERATOR:!0}),i}}),st({target:"Set",proto:!0,real:!0,forced:W},{reduce:function(e){var n=m(this),t=Ki(n),r=arguments.length<2,i=r?void 0:arguments[1];if(Wt(e),oe(t,function(t){i=r?(r=!1,t):e(i,t,t,n)},{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return i}}),st({target:"Set",proto:!0,real:!0,forced:W},{some:function(t){var n=m(this),e=Ki(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e){if(r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:W},{symmetricDifference:function(t){var e=m(this),n=new(Te(e,et("Set")))(e),r=Wt(n.delete),i=Wt(n.add);return oe(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:W},{union:function(t){var e=m(this),e=new(Te(e,et("Set")))(e);return oe(t,Wt(e.add),{that:e}),e}});var Qi=Math.floor;st({target:"Number",stat:!0},{isInteger:function(t){return!g(t)&&isFinite(t)&&Qi(t)===t}});pt.Number.isInteger;st({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});pt.Number.isNaN;var Yi=function(t,e){return(Yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Xi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Yi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ji=function(){return(Ji=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function $i(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Zi(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function to(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eo(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function no(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function ro(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function io(t){try{return uo.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var oo={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},so=function(t,e){if(!t)throw ao(e)},ao=function(t){return new Error("Firebase Database ("+oo.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},uo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|c>>6,c=63&c;u||(c=64,s||(a=64)),r.push(n[h],n[o],n[a],n[c])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ro(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();o=o<<2|s>>4;r.push(o),64!==a&&(s=s<<4&240|a>>2,r.push(s),64!==u&&(u=a<<6&192|u,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function co(t){return ho(void 0,t)}function ho(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=ho(t[n],e[n]));return t}var lo=(fo.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},fo);function fo(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function po(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function vo(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(po())}function yo(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function go(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mo(){return!0===oo.NODE_ADMIN}function bo(){return"indexedDB"in self&&null!=indexedDB}function _o(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function wo(){return!(!navigator||!navigator.cookieEnabled)}var Io,Eo="FirebaseError",To=(Xi(So,Io=Error),So);function So(t,e,n){e=Io.call(this,e)||this;return e.code=t,e.customData=n,e.name=Eo,Object.setPrototypeOf(e,So.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,Co.prototype.create),e}var Co=(No.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(Ao,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new To(o,t,i)},No);function No(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Ao=/\{\$([^}]+)}/g;function ko(t){return JSON.parse(t)}function Po(t){return JSON.stringify(t)}function Oo(t){var e={},n={},r={},i="";try{var o=t.split("."),e=ko(io(o[0])||""),n=ko(io(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Ro(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function xo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Do(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lo(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Mo(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}var jo=(Fo.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Fo.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++){s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},Fo.prototype.update=function(t,e){if(null!=t){for(var n=(e=void 0===e?t.length:e)-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Fo.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Fo);function Fo(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function Uo(t,e){e=new Vo(t,e);return e.subscribe.bind(e)}var Vo=(qo.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},qo.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},qo.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},qo.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Bo),void 0===r.error&&(r.error=Bo),void 0===r.complete&&(r.complete=Bo);n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},qo.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},qo.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},qo.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},qo.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},qo);function qo(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function Bo(){}function zo(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Ho(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}t+=" failed: ";return t+=r+" argument "}function Go(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Ho(t,e,r)+"must be a valid function.")}function Wo(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Ho(t,e,r)+"must be a valid context object.")}function Ko(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var Qo=1e3,Yo=2,Xo=144e5,Jo=.5;function $o(t,e,n){void 0===n&&(n=Yo);n=(e=void 0===e?Qo:e)*Math.pow(n,t),t=Math.round(Jo*n*(Math.random()-.5)*2);return Math.min(Xo,n+t)}var Zo=(ts.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},ts.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},ts.prototype.setServiceProps=function(t){return this.serviceProps=t,this},ts);function ts(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var es="[DEFAULT]",ns=(rs.prototype.get=function(t){void 0===t&&(t=es);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new lo;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},rs.prototype.getImmediate=function(t){var e=Ji({identifier:es,optional:!1},t),t=e.identifier,n=e.optional,r=this.normalizeInstanceIdentifier(t);try{var i=this.getOrInitializeService(r);if(i)return i;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},rs.prototype.getComponent=function(){return this.component},rs.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(es)}catch(t){}try{for(var r=to(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=eo(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},rs.prototype.clearInstance=function(t){void 0===t&&(t=es),this.instancesDeferred.delete(t),this.instances.delete(t)},rs.prototype.delete=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(no(no([],eo(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),eo(e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return t.sent(),[2]}})})},rs.prototype.isComponentSet=function(){return null!=this.component},rs.prototype.isInitialized=function(t){return void 0===t&&(t=es),this.instances.has(t)},rs.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===es?void 0:e),this.instances.set(t,n)),n||null},rs.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:es},rs);function rs(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var is=(os.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},os.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},os.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ns(t,this);return this.providers.set(t,e),e},os.prototype.getProviders=function(){return Array.from(this.providers.values())},os);function os(t){this.name=t,this.providers=new Map}var ss,as=[];(Sn=ss=ss||{})[Sn.DEBUG=0]="DEBUG",Sn[Sn.VERBOSE=1]="VERBOSE",Sn[Sn.INFO=2]="INFO",Sn[Sn.WARN=3]="WARN",Sn[Sn.ERROR=4]="ERROR",Sn[Sn.SILENT=5]="SILENT";function us(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=ls[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,no(["["+i+"]  "+t.name+":"],n))}}var cs={debug:ss.DEBUG,verbose:ss.VERBOSE,info:ss.INFO,warn:ss.WARN,error:ss.ERROR,silent:ss.SILENT},hs=ss.INFO,ls=((K={})[ss.DEBUG]="log",K[ss.VERBOSE]="log",K[ss.INFO]="info",K[ss.WARN]="warn",K[ss.ERROR]="error",K),fs=(Object.defineProperty(ps.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ss))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),ps.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?cs[t]:t},Object.defineProperty(ps.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(ps.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),ps.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ss.DEBUG],t)),this._logHandler.apply(this,no([this,ss.DEBUG],t))},ps.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ss.VERBOSE],t)),this._logHandler.apply(this,no([this,ss.VERBOSE],t))},ps.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ss.INFO],t)),this._logHandler.apply(this,no([this,ss.INFO],t))},ps.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ss.WARN],t)),this._logHandler.apply(this,no([this,ss.WARN],t))},ps.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ss.ERROR],t)),this._logHandler.apply(this,no([this,ss.ERROR],t))},ps);function ps(t){this.name=t,this._logLevel=hs,this._logHandler=us,this._userLogHandler=null,as.push(this)}function ds(e){as.forEach(function(t){t.setLogLevel(e)})}function vs(s,e){for(var t=0,n=as;t<n.length;t++)!function(t){var o=null;e&&e.level&&(o=cs[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:ss[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}var Sn=((W={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",W["bad-app-name"]="Illegal App name: '{$appName}",W["duplicate-app"]="Firebase App named '{$appName}' already exists",W["app-deleted"]="Firebase App named '{$appName}' already deleted",W["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",W["invalid-log-argument"]="First argument to `onLog` must be null or a function.",W),ys=new Co("app","Firebase",Sn),gs="@firebase/app",ms="[DEFAULT]",bs=((K={})[gs]="fire-core",K["@firebase/analytics"]="fire-analytics",K["@firebase/auth"]="fire-auth",K["@firebase/database"]="fire-rtdb",K["@firebase/functions"]="fire-fn",K["@firebase/installations"]="fire-iid",K["@firebase/messaging"]="fire-fcm",K["@firebase/performance"]="fire-perf",K["@firebase/remote-config"]="fire-rc",K["@firebase/storage"]="fire-gcs",K["@firebase/firestore"]="fire-fst",K["fire-js"]="fire-js",K["firebase-wrapper"]="fire-js-all",K),_s=new fs("@firebase/app"),ws=(Object.defineProperty(Is.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Is.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Is.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Is.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Is.prototype._getService=function(t,e){return void 0===e&&(e=ms),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Is.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=ms),this.container.getProvider(t).clearInstance(e)},Is.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){_s.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Is.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Is.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Is.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ys.create("app-deleted",{appName:this.name_})},Is);function Is(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=co(t),this.container=new is(e.name),this._addComponent(new Zo("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}ws.prototype.name&&ws.prototype.options||ws.prototype.delete||console.log("dc");var Es="8.3.0";function Ts(s){var a={},u=new Map,c={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});"object"==typeof e&&null!==e||(e={name:e});var n=e;void 0===n.name&&(n.name=ms);e=n.name;if("string"!=typeof e||!e)throw ys.create("bad-app-name",{appName:String(e)});if(Ro(a,e))throw ys.create("duplicate-app",{appName:e});n=new s(t,n,c);return a[e]=n},app:h,registerVersion:function(t,e,n){var r=null!==(i=bs[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t){n=['Unable to register library "'+r+'" with version "'+e+'":'];return i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void _s.warn(n.join(" "))}o(new Zo(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:ds,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw ys.create("invalid-log-argument");vs(t,e)},apps:null,SDK_VERSION:Es,INTERNAL:{registerComponent:o,removeApp:function(t){delete a[t]},components:u,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function h(t){if(!Ro(a,t=t||ms))throw ys.create("no-app",{appName:t});return a[t]}function o(n){var t,r=n.name;if(u.has(r))return _s.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?c[r]:null;u.set(r,n),"PUBLIC"===n.type&&(t=function(t){if("function"!=typeof(t=void 0===t?h():t)[r])throw ys.create("invalid-app-argument",{appName:r});return t[r]()},void 0!==n.serviceProps&&ho(t,n.serviceProps),c[r]=t,s.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])});for(var e=0,i=Object.keys(a);e<i.length;e++){var o=i[e];a[o]._addComponent(n)}return"PUBLIC"===n.type?c[r]:null}return c.default=c,Object.defineProperty(c,"apps",{get:function(){return Object.keys(a).map(function(t){return a[t]})}}),h.App=s,c}var W=function t(){var e=Ts(ws);return e.INTERNAL=Ji(Ji({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){ho(e,t)},createSubscribe:Uo,ErrorFactory:Co,deepExtend:ho}),e}(),Ss=(Cs.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){t=t.getComponent();return"VERSION"===(null==t?void 0:t.type)}(t)){t=t.getImmediate();return t.library+"/"+t.version}return null}).filter(function(t){return t}).join(" ")},Cs);function Cs(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(_s.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(bu=self.firebase.SDK_VERSION)&&0<=bu.indexOf("LITE")&&_s.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var Ns=W.initializeApp;W.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&_s.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Ns.apply(void 0,t)};var As,ks,Jl=W;(As=Jl).INTERNAL.registerComponent(new Zo("platform-logger",function(t){return new Ss(t)},"PRIVATE")),As.registerVersion(gs,"0.6.16",ks),As.registerVersion("fire-js","");Jl.registerVersion("firebase","8.3.0","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.v(t):this.h(t)}},s.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},s.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Qa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Qa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Qa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),o=e.next(),!o.done;);})},s});var h=h||{},l=this||self,e=/^[\w+/_-]+[=]{0,2}$/,a=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&e.test(t)?t:""}function s(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var n="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:g).apply(null,arguments)}function b(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now;function w(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function E(t,e,n){this.code=C+t,this.message=e||N[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new E(e.substring(C.length),t.message,t.serverResponse):null}w(E,Error),E.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.w()};var S,C="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function k(t){for(var e in A)if(A[e].id===t)return t=A[e],{firebaseEndpoint:t.Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function P(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function O(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,O):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function x(t){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=k("__EID__")?"__EID__":void 0,w(O,Error),O.prototype.name="CustomError",w(R,O),R.prototype.name="AssertionError",D.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var j=new D(function(){return new F},function(t){t.reset()});function F(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++)a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n));return i},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},z=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=U(t,e)}function G(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function K(){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,$=/</g,Z=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,rt=/[\x00&<>"']/;function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:e<t?1:0}t:{var st=l.navigator;if(st){st=st.userAgent;if(st){Y=st;break t}}Y=""}function at(t){return it(Y,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function ht(t){var e,n={};for(e in t)n[e]=t[e];return n}var lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<lt.length;i++)e=lt[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function pt(t,e){t:{try{var n=t&&t.ownerDocument,n=n&&(n.defaultView||n.parentWindow);if((n=n||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(y(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function dt(t,e){this.a=t===mt&&e||"",this.b=gt}function vt(t){return t instanceof dt&&t.constructor===dt&&t.b===gt?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}dt.prototype.sa=!0,dt.prototype.ra=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,gt={},mt={};function bt(){if(void 0===yt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(t){l.console&&l.console.error(t.message)}yt=t}else yt=t}return yt}function _t(t,e){this.a=e===St?t:""}function wt(t){return t instanceof _t&&t.constructor===_t?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function It(t,n){var e,r=vt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(Et,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof dt?vt(t):encodeURIComponent(String(t))}),e=t,t=bt(),new _t(e=t?t.createScriptURL(e):e,St)}_t.prototype.sa=!0,_t.prototype.ra=function(){return this.a.toString()},_t.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Et=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={};function Ct(t,e){this.a=e===xt?t:""}function Nt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var At=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,kt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Pt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ot(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=Pt.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(kt))&&At.test(e[1])?new Ct(t,xt):null);var e}function Rt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),new Ct(t=!Pt.test(t)?"about:invalid#zClosurez":t,xt))}var xt={},Dt=new Ct("about:invalid#zClosurez",xt);function Lt(t,e,n){this.a=n===Mt?t:""}Lt.prototype.sa=!0,Lt.prototype.ra=function(){return this.a.toString()},Lt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function jt(t,e,n,r){return t=t instanceof Ct?t:Rt(t),e=e||l,n=n instanceof dt?vt(n):n||"",e.open(Nt(t),n,r,void 0)}function Ft(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function Ut(t){return rt.test(t)&&(-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=t.indexOf("&")?t.replace(J,"&amp;"):t).indexOf("<")?t.replace($,"&lt;"):t).indexOf(">")?t.replace(Z,"&gt;"):t).indexOf('"')?t.replace(tt,"&quot;"):t).indexOf("'")?t.replace(et,"&#39;"):t).indexOf("\0")&&(t=t.replace(nt,"&#0;"))),t}function Vt(t){return Vt[" "](t),t}Vt[" "]=s;var qt,Bt=at("Opera"),zt=at("Trident")||at("MSIE"),Ht=at("Edge"),Gt=Ht||zt,Wt=at("Gecko")&&!(it(Y.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),Kt=it(Y.toLowerCase(),"webkit")&&!at("Edge");function Qt(){var t=l.document;return t?t.documentMode:void 0}t:{var Yt="",Xt=(Xt=Y,Wt?/rv:([^\);]+)(\)|;)/.exec(Xt):Ht?/Edge\/([\d\.]+)/.exec(Xt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):Kt?/WebKit\/(\S+)/.exec(Xt):Bt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);if(Xt&&(Yt=Xt?Xt[1]:""),zt){Xt=Qt();if(null!=Xt&&Xt>parseFloat(Yt)){qt=String(Xt);break t}}qt=Yt}var Jt={};function $t(a){return t=a,e=function(){for(var t=0,e=X(String(qt)).split("."),n=X(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=ot(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ot(0==o[2].length,0==s[2].length)||ot(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=Jt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Zt=l.document&&zt&&(Qt()||parseInt(qt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!zt||9<=Number(Zt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){ut(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!te&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Ut(i.name),'"'),i.type&&(r.push(' type="',Ut(i.type),'"'),ft(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=ae(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ne(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];if(!d(o)||y(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(y(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){s="function"==typeof o.item;break t}}s=!1}V(s?Q(o):o,r)}}}(n,r,e),r}function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){l.setTimeout(function(){throw t},0)}function ce(t,e){var n;ie||(ie=l.Promise&&l.Promise.resolve?(n=l.Promise.resolve(void 0),function(){n.then(fe)}):function(){var t=fe;!v(l.setImmediate)||l.Window&&l.Window.prototype&&!at("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||function(){var t=l.MessageChannel;if(void 0===(t=void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")?function(){var t=ae(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}:t)||at("Trident")||at("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Gb,n.Gb=null,t())},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}),he||(ie(),he=!0),le.add(t,e)}var he=!1,le=new M;function fe(){for(var t,e,n;n=e=void 0,n=null,(e=le).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ue(t)}L(j,t)}he=!1}function pe(t,e){if(this.a=de,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Ce(n,ve,t)},function(t){if(!(t instanceof xe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ce(n,ye,t)})}catch(t){Ce(this,ye,t)}}var de=0,ve=2,ye=3;function ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var me=new D(function(){return new ge},function(t){t.reset()});function be(t,e,n){var r=me.get();return r.g=t,r.b=e,r.f=n,r}function _e(t){if(t instanceof pe)return t;var e=new pe(s);return Ce(e,ve,t),e}function we(n){return new pe(function(t,e){e(n)})}function Ie(t,e,n){Ne(t,e,n,null)||ce(b(e,t))}function Ee(n){return new pe(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Pb:!0,value:n}:{Pb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Ie(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Te(t,e){t.b||t.a!=ve&&t.a!=ye||Ae(t),t.f?t.f.next=e:t.b=e,t.f=e}function Se(t,i,o,s){var e=be(null,null,null);return e.a=new pe(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof xe?r(t):n(e)}catch(t){r(t)}}:r}),Te(e.a.c=t,e),e.a}function Ce(t,e,n){var r,i;t.a==de&&(t===n&&(e=ye,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ne(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ae(t),e!=ye||n instanceof xe||(i=n,(r=t).g=!0,ce(function(){r.g&&Re.call(null,i)}))))}function Ne(t,e,n,r){if(t instanceof pe)return Te(t,be(e||s,n||null,r)),1;if(P(t))return t.then(e,n,r),1;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ae(t){t.h||(t.h=!0,ce(t.gc,t))}function ke(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Pe(t,e,n,r){if(n==ye&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Oe(e,n,r);else try{e.c?e.g.call(e.f):Oe(e,n,r)}catch(t){Re.call(null,t)}L(me,e)}function Oe(t,e,n){e==ve?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}pe.prototype.then=function(t,e,n){return Se(this,v(t)?t:null,v(e)?e:null,n)},pe.prototype.$goog_Thenable=!0,(t=pe.prototype).oa=function(t,e){return(t=be(t,t,e)).c=!0,Te(this,t),this},t.o=function(t,e){return Se(this,null,t,e)},t.cancel=function(t){var e;this.a==de&&(e=new xe(t),ce(function(){!function t(e,n){if(e.a==de)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,!((o=a.a==e?a:o)&&1<i)));a=a.next)o||(s=a);o&&(r.a==de&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):ke(r),Pe(r,o,ye,n)))}e.c=null}else Ce(e,ye,n)}(this,e)},this))},t.$c=function(t){this.a=de,Ce(this,ve,t)},t.ad=function(t){this.a=de,Ce(this,ye,t)},t.gc=function(){for(var t;t=ke(this);)Pe(this,t,this.a,this.i);this.h=!1};var Re=ue;function xe(t){O.call(this,t)}function De(){this.xa=this.xa,this.pa=this.pa}w(xe,O);var Le=0;function Me(t){t.xa||(t.xa=!0,t.Da(),0==Le)||(t=t,Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=++r))}De.prototype.xa=!(xe.prototype.name="cancel"),De.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var je=Object.freeze||function(t){return t},Fe=!zt||9<=Number(Zt),Ue=zt&&!$t("9"),Ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Be(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Wt){t:{try{Vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ze[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}qe.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Be,qe);var ze=je({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ue)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Be.prototype.g=function(){return this.a};var He="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function We(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ge,this.va=this.Pa=!1}function Ke(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function Qe(t){this.src=t,this.a={},this.b=0}function Ye(t,e){var n=e.type;n in t.a&&G(t.a[n],e)&&(Ke(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Xe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}Qe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Xe(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new We(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var Je="closure_lm_"+(1e6*Math.random()|0),$e={};function Ze(t,e,n,r,i){if(r&&r.once)en(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=ln(n),t&&t[He]?pn(t,e,n,y(r)?!!r.capture:!!r,i):tn(t,e,n,!1,r,i)}function tn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=y(i)?!!i.capture:!!i,c=cn(t);if(c||(t[Je]=c=new Qe(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=un,r=a=Fe?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=!Ve?u:i)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(on(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else n=ln(n),t&&t[He]?dn(t,e,n,y(r)?!!r.capture:!!r,i):tn(t,e,n,!0,r,i)}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=ln(n),t&&t[He]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=Xe(o=t.a[e],n,r,i))&&(Ke(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&cn(t))&&(e=t.a[e.toString()],(n=(t=-1)<(t=e?Xe(e,n,r,i):t)?e[t]:null)&&rn(n))}function rn(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[He]?Ye(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(on(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cn(e))?(Ye(n,t),0==n.b&&(n.src=null,e[Je]=null)):Ke(t)))}function on(t){return t in $e?$e[t]:$e[t]="on"+t}function sn(t,e,n,r){var i=!0;if((t=cn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=an(o,r),i=i&&!1!==o)}return i}function an(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&rn(t),n.call(r,e)}function un(t,e){if(t.va)return!0;if(Fe)return an(t,new Be(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Be(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=sn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=sn(r[i],t,!1,e),n=n&&o}return n}function cn(t){return(t=t[Je])instanceof Qe?t:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(e){return v(e)?e:(e[hn]||(e[hn]=function(t){return e.handleEvent(t)}),e[hn])}function fn(){De.call(this),this.v=new Qe(this),(this.ac=this).gb=null}function pn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function dn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function vn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.va&&u.capture==n&&(s=u.listener,a=u.Va||u.src,u.Pa&&Ye(t.v,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function yn(t,e,n){if(v(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function gn(n){var r=null;return new pe(function(t,e){-1==(r=yn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function mn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function bn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function _n(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _n)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function wn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];In(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)In(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function In(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(fn,De),fn.prototype[He]=!0,fn.prototype.addEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},fn.prototype.removeEventListener=function(t,e,n,r){nn(this,t,e,n,r)},fn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t?t=new qe(t,n):t instanceof qe?t.target=t.target||n:(s=t,ft(t=new qe(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=vn(o,r,!0,t)&&s;if(s=vn(o=t.b=n,r,!0,t)&&s,s=vn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=vn(o=t.b=e[i],r,!1,t)&&s;return s},fn.prototype.Da=function(){if(fn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ke(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=_n.prototype).W=function(){wn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return wn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return In(this.b,t)?this.b[t]:e},t.set=function(t,e){In(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var En=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Tn?(this.i=void 0!==e?e:t.i,Sn(this,t.c),this.l=t.l,this.a=t.a,Cn(this,t.g),this.f=t.f,Nn(this,Wn(t.b)),this.h=t.h):t&&(n=String(t).match(En))?(this.i=!!e,Sn(this,n[1]||"",!0),this.l=Rn(n[2]||""),this.a=Rn(n[3]||"",!0),Cn(this,n[4]),this.f=Rn(n[5]||"",!0),Nn(this,n[6]||"",!0),this.h=Rn(n[7]||"")):(this.i=!!e,this.b=new Vn(null,this.i))}function Sn(t,e,n){t.c=n?Rn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Cn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Nn(t,e,n){var r,i;e instanceof Vn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(qn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(zn(this,e),Gn(this,n,t))},r)),r.f=i):(n||(e=xn(e,Fn)),t.b=new Vn(e,t.i))}function An(t,e,n){t.b.set(e,n)}function kn(t,e){return t.b.get(e)}function Pn(t){return t instanceof Tn?new Tn(t):new Tn(t,void 0)}function On(t,e,n,r){var i=new Tn(null,void 0);return t&&Sn(i,t),e&&(i.a=e),n&&Cn(i,n),r&&(i.f=r),i}function Rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Dn),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Dn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(xn(e,Ln,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(xn(e,Ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(xn(n,"/"==n.charAt(0)?jn:Mn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",xn(n,Un)),t.join("")},Tn.prototype.resolve=function(t){var e=new Tn(this),n=!!t.c;n?Sn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r,i=t.f;if(n)Cn(e,t.g);else if(n=!!t.f)if("/"!=i.charAt(0)&&(this.a&&!this.f?i="/"+i:-1!=(r=e.f.lastIndexOf("/"))&&(i=e.f.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(it(r,"./")||it(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r;return n?e.f=i:n=""!==t.b.toString(),n?Nn(e,Wn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Ln=/[#\/\?@]/g,Mn=/[#\?:]/g,jn=/[#\?]/g,Fn=/[#\?@]/g,Un=/#/g;function Vn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qn(n){n.a||(n.a=new _n,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Bn(t){var e=bn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Vn(null,void 0);t=mn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Gn(n,i,o):n.add(i,o)}return n}function zn(t,e){qn(t),e=Kn(t,e),In(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,In((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&wn(t)))}function Hn(t,e){return qn(t),e=Kn(t,e),In(t.a.b,e)}function Gn(t,e,n){zn(t,e),0<n.length&&(t.c=null,t.a.set(Kn(t,e),Q(n)),t.b+=n.length)}function Wn(t){var e=new Vn;return e.c=t.c,t.a&&(e.a=new _n(t.a),e.b=t.b),e}function Kn(t,e){return e=String(e),e=t.f?e.toLowerCase():e}function Qn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(s=n[i],"function"!=typeof s&&(r.push(o),$n(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":$n(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Yn,t,e),e.join("")}function Yn(){}(t=Vn.prototype).add=function(t,e){qn(this),this.c=null,t=Kn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){qn(this),this.a.forEach(function(t,e){V(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){qn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){qn(this);var e=[];if("string"==typeof t)Hn(this,t)&&(e=K(e,this.a.get(Kn(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=K(e,t[n])}return e},t.set=function(t,e){return qn(this),this.c=null,Hn(this,t=Kn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.W(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Xn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function $n(t,e){e.push('"',t.replace(Jn,function(t){var e=Xn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Xn[t]=e),e}),'"')}function Zn(){var t=mr();return zt&&Zt&&11==Zt||/Edge\/\d+/.test(t)}function tr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function er(t,e){e=e||l.window;var n="about:blank";t&&(n=Nt(Ot(t)||Dt)),e.location.href=n}function nr(t){return!!((t=(t||mr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function rr(t){t=t||l.window;try{t.close()}catch(t){}}function ir(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=mr().toLowerCase(),r&&(e.target=r,it(n,"crios/")&&(e.target="_blank")),vr(mr())==pr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Ot(void 0!==n.href?n.href:String(n))||Dt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(s=ae(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:Rt(e),s.href=Nt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=jt("",r,n,s),t=Nt(e),s&&(Gt&&it(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">',t=new Lt(t=(r=bt())?r.createHTML(t):t,0,Mt),r=s.document)&&(r.write((o=t)instanceof Lt&&o.constructor===Lt?o.a:(x("expected object of type SafeHtml, got '"+o+"' of type "+p(o)),"type_error:SafeHtml")),r.close())):(s=jt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ar(){var e=null;return new pe(function(t){"complete"==l.document.readyState?t():(e=function(){t()},en(window,"load",e))}).o(function(t){throw nn(window,"load",e),t})}function ur(t){return t=t||mr(),!("file:"!==Er()&&"ionic:"!==Er()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function hr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function lr(){return Jl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Jl.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function fr(){var t=lr();return"ReactNative"===t||"Node"===t}var pr="Firefox",dr="Chrome";function vr(t){var e=t.toLowerCase();return it(e,"opera/")||it(e,"opr/")||it(e,"opios/")?"Opera":it(e,"iemobile")?"IEMobile":it(e,"msie")||it(e,"trident/")?"IE":it(e,"edge/")?"Edge":it(e,"firefox/")?pr:it(e,"silk/")?"Silk":it(e,"blackberry")?"Blackberry":it(e,"webos")?"Webos":!it(e,"safari/")||it(e,"chrome/")||it(e,"crios/")||it(e,"android")?!it(e,"chrome/")&&!it(e,"crios/")||it(e,"edge/")?it(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":dr:"Safari"}var yr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function gr(t,e){e=e||[];var n,r=[],i={};for(n in yr)i[yr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=lr())?r=vr(i=mr()):"Worker"===r&&(r=vr(i=mr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function mr(){return l.navigator&&l.navigator.userAgent||""}function br(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return e=n!=t.length?void 0:e}function _r(){try{var t=l.localStorage,e=Ar();if(t)return t.setItem(e,"1"),t.removeItem(e),!Zn()||!!l.indexedDB}catch(t){return hr()&&!!l.indexedDB}return!1}function wr(){return(Ir()||"chrome-extension:"===Er()||ur())&&!fr()&&_r()&&!hr()}function Ir(){return"http:"===Er()||"https:"===Er()}function Er(){return l.location&&l.location.protocol||null}function Tr(t){return!nr(t=t||mr())&&vr(t)!=pr}function Sr(t){return void 0===t?null:Qn(t)}function Cr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Nr(t){if(null!==t)return JSON.parse(t)}function Ar(t){return t||Math.floor(1e9*Math.random()).toString()}function kr(t){return"Safari"!=vr(t=t||mr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Pr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Or(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=mr(),e=lr(),this.b=nr(t)||"ReactNative"===e}function Rr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function xr(){var e=l.document,n=null;return Rr()||!e?_e():new pe(function(t){n=function(){Rr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t})}function Dr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Lr(){return br("fireauth.oauthhelper",l)||br("fireauth.iframe",l)}Or.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Ir()&&"chrome-extension:"!==Er()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Mr,jr={};function Fr(t){jr[t]||(jr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Ur={};Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:2}),Mr=2==Ur.abcd}catch(t){Mr=!1}function Vr(t,e,n){Mr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Vr(t,n,e[n])}function Br(t){var e={};return qr(e,t),e}function zr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Vr(e,n,zr(t[n]));return e}function Hr(t){var e=t&&(t[Yr]?"phone":null);if(!(e&&t&&t[Qr]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Vr(this,"uid",t[Qr]),Vr(this,"displayName",t[Wr]||null);var n=null;Vr(this,"enrollmentTime",n=t[Kr]?new Date(t[Kr]).toUTCString():n),Vr(this,"factorId",e)}function Gr(t){try{var e=new Xr(t)}catch(t){e=null}return e}Hr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Wr="displayName",Kr="enrolledAt",Qr="mfaEnrollmentId",Yr="phoneInfo";function Xr(t){Hr.call(this,t),Vr(this,"phoneNumber",t[Yr])}function Jr(t){var e={},n=t[ei],r=t[ri],i=t[ii];if(t=Gr(t[ni]),!i||i!=Zr&&i!=ti&&!n||i==ti&&!r||i==$r&&!t)throw Error("Invalid checkActionCode response!");i==ti?(e[si]=n||null,e[ui]=n||null,e[oi]=r):(e[si]=r||null,e[ui]=r||null,e[oi]=n||null),e[ai]=t||null,Vr(this,hi,i),Vr(this,ci,zr(e))}w(Xr,Hr),Xr.prototype.w=function(){var t=Xr.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var $r="REVERT_SECOND_FACTOR_ADDITION",Zr="EMAIL_SIGNIN",ti="VERIFY_AND_CHANGE_EMAIL",ei="email",ni="mfaInfo",ri="newEmail",ii="requestType",oi="email",si="fromEmail",ai="multiFactorInfo",ui="previousEmail",ci="data",hi="operation";function li(t){var e=kn(t=Pn(t),fi)||null,n=kn(t,pi)||null,r=(r=kn(t,yi)||null)&&mi[r]||null;if(!e||!n||!r)throw new E("argument-error",fi+", "+pi+"and "+yi+" are required in a valid action code URL.");qr(this,{apiKey:e,operation:r,code:n,continueUrl:kn(t,di)||null,languageCode:kn(t,vi)||null,tenantId:kn(t,gi)||null})}var fi="apiKey",pi="oobCode",di="continueUrl",vi="languageCode",yi="mode",gi="tenantId",mi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:$r,signIn:Zr,verifyAndChangeEmail:ti,verifyEmail:"VERIFY_EMAIL"};function bi(t){try{return new li(t)}catch(t){return null}}function _i(t){var e=t[Si];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[wi])&&"object"==typeof r){e=r[Ai];var n=r[Ci],r=r[Ni];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new E("argument-error",Ci+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new E("argument-error",Ni+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new E("argument-error",Ai+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new E("missing-android-pkg-name")}}else if(void 0!==r)throw new E("argument-error",wi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ti])&&"object"==typeof e){if("string"==typeof(e=e[ki])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",ki+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",Ti+" property must be a non null object when specified.");if(void 0!==(e=t[Ei])&&"boolean"!=typeof e)throw new E("argument-error",Ei+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ii])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",Ii+" property must be a non empty string when specified.");this.i=t||null}var wi="android",Ii="dynamicLinkDomain",Ei="handleCodeInApp",Ti="iOS",Si="url",Ci="installApp",Ni="minimumVersion",Ai="packageName",ki="bundleId";function Pi(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Oi=null;function Ri(t){var e=[];return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Oi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Oi){Oi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Oi[o]&&(Oi[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e.push(t)}),e}function xi(t){var e=Li(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Di(t){try{return new xi(t)}catch(t){return null}}function Li(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Ri(t);for(t=[],n=e=0;e<r.length;){var i,o,s,a=r[e++];a<128?t[n++]=String.fromCharCode(a):191<a&&a<224?(i=r[e++],t[n++]=String.fromCharCode((31&a)<<6|63&i)):239<a&&a<365?(s=((7&a)<<18|(63&(i=r[e++]))<<12|(63&(o=r[e++]))<<6|63&r[e++])-65536,t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))):(i=r[e++],o=r[e++],t[n++]=String.fromCharCode((15&a)<<12|(63&i)<<6|63&o))}return JSON.parse(t.join(""))}catch(t){}return null}xi.prototype.T=function(){return this.f},xi.prototype.l=function(){return this.c},xi.prototype.toString=function(){return this.h};var Mi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ji=["client_id","response_type","scope","redirect_uri","state"],Fi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:ji},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:ji},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:ji},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Mi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Ui(t){for(var e in Fi)if(Fi[e].fa==t)return Fi[e];return null}function Vi(t){var e={};e["facebook.com"]=Gi,e["google.com"]=Ki,e["github.com"]=Wi,e["twitter.com"]=Qi;var n=t&&t[Bi];try{if(n)return new(e[n]||Hi)(t);if(void 0!==t[qi])return new zi(t)}catch(t){}return null}var qi="idToken",Bi="providerId";function zi(t){var e,n=t[Bi];if(n||!t[qi]||(e=Di(t[qi]))&&e.b&&(n=e.b),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Vr(this,"providerId",n),Vr(this,"isNewUser",e)}function Hi(t){zi.call(this,t),Vr(this,"profile",zr((t=Nr(t.rawUserInfo||"{}"))||{}))}function Gi(t){if(Hi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Wi(t){if(Hi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",this.profile&&this.profile.login||null)}function Ki(t){if(Hi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Qi(t){if(Hi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",t.screenName||null)}function Yi(t){var e=kn(r=Pn(t),"link"),n=kn(Pn(e),"link"),r=kn(r,"deep_link_id");return kn(Pn(r),"link")||r||n||e||t}function Xi(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Ji:$i}w(Hi,zi),w(Gi,Hi),w(Wi,Hi),w(Ki,Hi),w(Qi,Hi);var Ji="enroll",$i="signin";function Zi(){}function to(t,n){return t.then(function(t){if(t[zs]){var e=Di(t[zs]);if(!e||n!=e.i)throw new E("user-mismatch");return t}throw new E("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==C+"user-not-found"?new E("user-mismatch"):t})}function eo(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,Vr(this,"providerId",t),Vr(this,"signInMethod",t)}function no(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ro(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new eo(t.providerId,t.pendingToken)}catch(t){}return null}function io(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Vr(this,"idToken",e.idToken),e.accessToken&&Vr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Vr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Vr(this,"accessToken",e.oauthToken),Vr(this,"secret",e.oauthTokenSecret)}Vr(this,"providerId",t),Vr(this,"signInMethod",n)}function oo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Bn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function so(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new io(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ao(t,e){this.Qc=e||[],qr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Ui(t)||{}).Ja||null,this.ob=null}function uo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');ao.call(this,t,[])}function co(t){ao.call(this,t,ji),this.a=[]}function ho(){co.call(this,"facebook.com")}function lo(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new ho).credential({accessToken:e})}function fo(){co.call(this,"github.com")}function po(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new fo).credential({accessToken:e})}function vo(){co.call(this,"google.com"),this.Ca("profile")}function yo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new vo).credential({idToken:n,accessToken:e})}function go(){ao.call(this,"twitter.com",Mi)}function mo(t,e){var n=t;if(!(n=!y(n)?{oauthToken:t,oauthTokenSecret:e}:n).oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new io("twitter.com",n,"twitter.com")}function bo(t,e,n){this.a=t,this.f=e,Vr(this,"providerId","password"),Vr(this,"signInMethod",n===wo.EMAIL_LINK_SIGN_IN_METHOD?wo.EMAIL_LINK_SIGN_IN_METHOD:wo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function _o(t){return t&&t.email&&t.password?new bo(t.email,t.password,t.signInMethod):null}function wo(){qr(this,{providerId:"password",isOAuthProvider:!1})}function Io(t,e){if(!(e=Eo(e)))throw new E("argument-error","Invalid email link!");return new bo(t,e.code,wo.EMAIL_LINK_SIGN_IN_METHOD)}function Eo(t){return(t=bi(t=Yi(t)))&&t.operation===Zr?t:null}function To(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new E("internal-error");this.a=t,Vr(this,"providerId","phone"),this.fa="phone",Vr(this,"signInMethod","phone")}function So(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new To(n)}return null}function Co(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function No(t){try{this.a=t||Jl.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}qr(this,{providerId:"phone",isOAuthProvider:!1})}function Ao(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new To({eb:t,cb:e})}function ko(t){if(t.temporaryProof&&t.phoneNumber)return new To({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return yo(o,n);case"facebook.com":return lo(n);case"github.com":return po(n);case"twitter.com":return mo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new eo(e,s):new io(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new co(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Po(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function Oo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function Ro(t){return(t=t||{}).type?new Oo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function xo(){this.b=null,this.a=[]}Xi.prototype.Ha=function(){return this.a?_e(this.a):_e(this.b)},Xi.prototype.w=function(){return this.type==Ji?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Zi.prototype.ka=function(){},Zi.prototype.b=function(){},Zi.prototype.c=function(){},Zi.prototype.w=function(){},eo.prototype.ka=function(t){return la(t,no(this))},eo.prototype.b=function(t,e){var n=no(this);return n.idToken=e,fa(t,n)},eo.prototype.c=function(t,e){return to(pa(t,no(this)),e)},eo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},io.prototype.ka=function(t){return la(t,oo(this))},io.prototype.b=function(t,e){var n=oo(this);return n.idToken=e,fa(t,n)},io.prototype.c=function(t,e){return to(pa(t,oo(this)),e)},io.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ao.prototype.Ka=function(t){return this.Ib=ht(t),this},w(uo,ao),w(co,ao),co.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},co.prototype.Qb=function(){return Q(this.a)},co.prototype.credential=function(t,e){e=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!e.idToken&&!e.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new io(this.providerId,e,this.providerId)},w(ho,co),Vr(ho,"PROVIDER_ID","facebook.com"),Vr(ho,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(fo,co),Vr(fo,"PROVIDER_ID","github.com"),Vr(fo,"GITHUB_SIGN_IN_METHOD","github.com"),w(vo,co),Vr(vo,"PROVIDER_ID","google.com"),Vr(vo,"GOOGLE_SIGN_IN_METHOD","google.com"),w(go,ao),Vr(go,"PROVIDER_ID","twitter.com"),Vr(go,"TWITTER_SIGN_IN_METHOD","twitter.com"),bo.prototype.ka=function(t){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,wa,{email:this.a,oobCode:this.f}):Qa(t,za,{email:this.a,password:this.f})},bo.prototype.b=function(t,e){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,Ia,{idToken:e,email:this.a,oobCode:this.f}):Qa(t,La,{idToken:e,email:this.a,password:this.f})},bo.prototype.c=function(t,e){return to(this.ka(t),e)},bo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},qr(wo,{PROVIDER_ID:"password"}),qr(wo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),qr(wo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),To.prototype.ka=function(t){return t.fb(Co(this))},To.prototype.b=function(t,e){var n=Co(this);return n.idToken=e,Qa(t,Ga,n)},To.prototype.c=function(t,e){var n=Co(this);return n.operation="REAUTH",to(t=Qa(t,Wa,n),e)},To.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},No.prototype.fb=function(r,i){var o=this.a.a;return _e(i.verify()).then(function(n){if("string"!=typeof n)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=y(r)?r.session:null,e=y(r)?r.phoneNumber:r,t=t&&t.type==Ji?t.Ha().then(function(t){return Qa(o,ja,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==$i?t.Ha().then(function(t){return e=o,t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},Qa(e,Fa,t).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):Qa(o,xa,{phoneNumber:e,recaptchaToken:n});return t.then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},qr(No,{PROVIDER_ID:"phone"}),qr(No,{PHONE_SIGN_IN_METHOD:"phone"}),Oo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Oo.prototype.T=function(){return this.h},Oo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Do,Lo=null;function Mo(t){var e="unauthorized-domain",n=void 0,r=Pn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function jo(t,e,n){E.call(this,t,n),(t=e||{}).Jb&&Vr(this,"email",t.Jb),t.ea&&Vr(this,"phoneNumber",t.ea),t.credential&&Vr(this,"credential",t.credential),t.Zb&&Vr(this,"tenantId",t.Zb)}function Fo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:ko(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new jo(e,n,t.message)}return null}function Uo(){}function Vo(t){return t.c||(t.c=t.b())}function qo(){}function Bo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function zo(){}function Ho(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.qc,this),this.a.onerror=m(this.Sb,this),this.a.onprogress=m(this.rc,this),this.a.ontimeout=m(this.vc,this)}function Go(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Wo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ko(t){this.f=t,this.b=this.c=this.a=null}function Qo(t,e){this.name=t,this.value=e}w(Mo,E),w(jo,E),jo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ft(t,e),t},jo.prototype.toJSON=function(){return this.w()},Uo.prototype.c=null,w(qo,Uo),qo.prototype.a=function(){var t=Bo(this);return t?new ActiveXObject(t):new XMLHttpRequest},qo.prototype.b=function(){var t={};return Bo(this)&&(t[0]=!0,t[1]=!0),t},Do=new qo,w(zo,Uo),zo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ho;throw Error("Unsupported browser")},zo.prototype.b=function(){return{}},(t=Ho.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Go(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Go(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Go(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Wo.prototype.a=null,Wo.prototype.reset=function(t,e,n,r,i){delete this.a},Qo.prototype.toString=function(){return this.name};var Yo=new Qo("SEVERE",1e3),Xo=new Qo("WARNING",900),Jo=new Qo("CONFIG",700),$o=new Qo("FINE",500);Ko.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(x("Root logger has no level set."),null))}(this).value)for(v(e)&&(e=e()),t=new Wo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Zo,ts={},es=null;function ns(t){var e,n,r;return es||(es=new Ko(""),(ts[""]=es).c=Jo),(e=ts[t])||(e=new Ko(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=ns(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,ts[t]=e),e}function rs(t,e){t&&t.log($o,e,void 0)}function is(t){this.f=t}function os(t){fn.call(this),this.u=t,this.h=void 0,this.readyState=ss,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ns("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(is,Uo),is.prototype.a=function(){return new os(this.f)},is.prototype.b=(Zo={},function(){return Zo}),w(os,fn);var ss=0;function as(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function us(t){t.readyState=4,t.g=null,t.c=null,t.m=null,cs(t)}function cs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function hs(t){fn.call(this),this.headers=new _n,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ls,this.u=this.S=!1}(t=os.prototype).open=function(t,e){if(this.readyState!=ss)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,cs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,us(this)),this.readyState=ss},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,cs(this)),this.a&&(this.readyState=3,cs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,as(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){var e;this.a&&((e=this.m.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?us:cs)(this),3==this.readyState&&as(this))},t.tc=function(t){this.a&&(this.response=this.responseText=t,us(this))},t.sc=function(t){this.a&&(this.response=t,us(this))},t.Ua=function(t){var e=this.i;e&&e.log(Xo,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&us(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Xo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Xo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(os.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(hs,fn);var ls="";hs.prototype.b=ns("goog.net.XhrIo");var fs=/^https?$/i,ps=["POST","PUT"];function ds(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=(e.D||Do).a(),e.C=e.D?Vo(e.D):Vo(Do),e.a.onreadystatechange=m(e.Vb,e);try{rs(e.b,Es(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return rs(e.b,Es(e,"Error opening Xhr: "+t.message)),void ys(e,t)}t=r||"";var o,s=new _n(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)V(t,e,void 0);else for(var n=bn(t),r=mn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=vs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=l.FormData&&t instanceof l.FormData,!H(ps,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{_s(e),0<e.g&&(e.u=(o=e.a,zt&&$t(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),rs(e.b,Es(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ma,e)):e.s=yn(e.Ma,e.g,e)),rs(e.b,Es(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){rs(e.b,Es(e,"Send error: "+t.message)),ys(e,t)}}function vs(t){return"content-type"==t.toLowerCase()}function ys(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,gs(t),bs(t)}function gs(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ms(e){if(e.c&&void 0!==h)if(e.C[1]&&4==ws(e)&&2==Is(e))rs(e.b,Es(e,"Local request error detected and ignored"));else if(e.i&&4==ws(e))yn(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==ws(e)){rs(e.b,Es(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=Is(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(En)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!fs.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<ws(e)?e.a.statusText:""}catch(t){rs(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+Is(e)+"]",gs(e)}}finally{bs(e)}}}function bs(e,t){if(e.a){_s(e);var n=e.a,r=e.C[0]?s:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Yo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function _s(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function ws(t){return t.a?t.a.readyState:0}function Is(t){try{return 2<ws(t)?t.a.status:-1}catch(t){return-1}}function Es(t,e){return e+" ["+t.R+" "+t.l+" "+Is(t)+"]"}function Ts(t){var e=Ls;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ss(t,e,n){t.a=!0,t.c=n,t.f=!e,ks(t)}function Cs(t){if(t.a){if(!t.v)throw new Ps;t.v=!1}}function Ns(t,e,n,r){t.g.push([e,n,r]),t.a&&ks(t)}function As(t){return z(t.g,function(t){return v(t[1])})}function ks(e){var n,r;e.h&&e.a&&As(e)&&(n=e.h,(r=xs[n])&&(l.clearTimeout(r.a),delete xs[n]),e.h=0),e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.s,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(P(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,As(e)||(r=!0)}}e.c=n,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),n instanceof Ts?(Ns(n,a,t),n.C=!0):n.then(a,t)),r&&(n=new Rs(n),xs[n.a]=n,e.h=n.a)}function Ps(){O.call(this)}function Os(){O.call(this)}function Rs(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=hs.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",rs(this.b,Es(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(rs(this.b,Es(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),bs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),bs(this,!0)),hs.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?ms(this):this.Jc())},t.Jc=function(){ms(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ls:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Yo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return rs(this.b,"Can not get response: "+t.message),null}},Ts.prototype.cancel=function(t){var e;this.a?this.c instanceof Ts&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Os,Cs(this),Ss(this,!1,t)))},Ts.prototype.m=function(t,e){this.i=!1,Ss(this,t,e)},Ts.prototype.then=function(t,e,n){var r,i,o=new pe(function(t,e){r=t,i=e});return Ns(this,r,function(t){t instanceof Os?o.cancel():i(t)}),o.then(t,e,n)},Ts.prototype.$goog_Thenable=!0,w(Ps,O),Ps.prototype.message="Deferred has already fired",Ps.prototype.name="AlreadyCalledError",w(Os,O),Os.prototype.message="Deferred was canceled",Os.prototype.name="CanceledError",Rs.prototype.c=function(){throw delete xs[this.a],this.b};var xs={};function Ds(t){var e=document,n=wt(t).toString(),r=ae(document,"SCRIPT"),i={Wb:r,Ma:void 0},o=new Ts(i),s=window.setTimeout(function(){Ms(r,!0);var t=new Us(Fs,"Timeout reached for loading script "+n);Cs(o),Ss(o,!1,t)},5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ms(r,!1,s),Cs(o),Ss(o,!0,null))},r.onerror=function(){Ms(r,!0,s);var t=new Us(js,"Error while loading script "+n);Cs(o),Ss(o,!1,t)},ft(i={},{type:"text/javascript",charset:"UTF-8"}),ne(r,i),i=t,pt(t=r,"HTMLScriptElement"),t.src=wt(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=l?f(i.document):a=null===a?f(l.document):a)&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Ls(){var t;this&&this.Wb&&((t=this.Wb)&&"SCRIPT"==t.tagName&&Ms(t,!0,this.Ma))}function Ms(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var js=0,Fs=1;function Us(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Vs(t){this.f=t}function qs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Hs,this.g=ht(t.secureTokenHeaders||Gs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Ws,this.a=ht(t.firebaseHeaders||Ks),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==lr(),!(n=l.XMLHttpRequest||n&&Jl.INTERNAL.node&&Jl.INTERNAL.node.XMLHttpRequest)&&!hr())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new is(self):fr()?this.f=new Vs(n):this.f=new zo,this.b=null}w(Us,O),w(Vs,Uo),Vs.prototype.a=function(){return new this.f},Vs.prototype.b=function(){return{}};var Bs,zs="idToken",Hs=new Or(3e4,6e4),Gs={"Content-Type":"application/x-www-form-urlencoded"},Ws=new Or(3e4,6e4),Ks={"Content-Type":"application/json"};function Qs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ys(t,e){e&&(t.l=Xs("https://securetoken.googleapis.com/v1/token",e),t.h=Xs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Xs("https://identitytoolkit.googleapis.com/v2/",e))}function Xs(t,e){return t=Pn(t),e=Pn(e.url),t.f=t.a+t.f,Sn(t,e.c),t.a=e.a,Cn(t,e.g),t.toString()}function Js(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function $s(t,e,n,r,i,o,s){var a;(t=((a=vr(a=mr())==dr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||zt&&Zt&&!(9<Zt))&&!hr()?(Bs=Bs||new pe(function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(l[ta]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},Ns(Ds(It(Zs,{onload:ta})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))}),m(t.s,t)):m(t.u,t))(e,n,r,i,o,s)}qs.prototype.T=function(){return this.b},qs.prototype.u=function(t,n,e,r,i,o){if(hr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new hs(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),pn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return rs(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),dn(a,"ready",function(){s&&clearTimeout(s),Me(this)}),dn(a,"timeout",function(){s&&clearTimeout(s),Me(this),n&&n(null)}),ds(a,t,e,r,i)};var Zs=new dt(mt,"https://apis.google.com/js/client.js?onload=%{onload}"),ta="__fcb"+Math.floor(1e6*Math.random()).toString();function ea(t,e,n,r,i,o,s){var a=Pn(e+n);An(a,"key",t.c),s&&An(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&An(a,c,i[c]);return new pe(function(e,n){$s(t,a.toString(),function(t){t?t.error?n(Xa(t,o||{})):e(t):n(new E("network-request-failed"))},r,u?void 0:Qn(Cr(i)),t.a,t.v.get())})}function na(t){if("string"!=typeof(t=t.email)||!sr.test(t))throw new E("invalid-email")}function ra(t){"email"in t&&na(t)}function ia(t){if(!t[zs]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,ht(t));throw new E("internal-error")}}function oa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}qs.prototype.s=function(t,n,r,i,o){var s=this;Bs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},qs.prototype.zb=function(){return Qa(this,Ma,{})},qs.prototype.Bb=function(t,e){return Qa(this,Da,{idToken:t,email:e})},qs.prototype.Cb=function(t,e){return Qa(this,La,{idToken:t,password:e})};var sa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function aa(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function ua(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function ca(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Hn(t=new Vn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ha(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Fo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Fo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Fo(t)):t.errorMessage&&(e=Ya(t.errorMessage)),e)throw e;ia(t)}function la(t,e){return e.returnIdpCredential=!0,Qa(t,Ua,e)}function fa(t,e){return e.returnIdpCredential=!0,Qa(t,qa,e)}function pa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Qa(t,Va,e)}function da(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=qs.prototype).Db=function(t,r){var i={idToken:t},o=[];return ut(sa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Qa(this,Da,i)},t.vb=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),Qa(this,ka,t)},t.wb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),Qa(this,Ca,t)},t.ub=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),Qa(this,Na,t)},t.Eb=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Qa(this,Aa,t)},t.fb=function(t){return Qa(this,Ha,t)},t.nb=function(t,e){return Qa(this,Ra,{oobCode:t,newPassword:e})},t.Ra=function(t){return Qa(this,ya,{oobCode:t})},t.jb=function(t){return Qa(this,va,{oobCode:t})};var va={endpoint:"setAccountInfo",A:da,Z:"email",B:!0},ya={endpoint:"resetPassword",A:da,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},B:!0},ga={endpoint:"signupNewUser",A:function(t){if(na(t),!t.password)throw new E("weak-password")},G:ia,V:!0,B:!0},ma={endpoint:"createAuthUri",B:!0},ba={endpoint:"deleteAccount",N:["idToken"]},_a={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new E("internal-error")}},wa={endpoint:"emailLinkSignin",N:["email","oobCode"],A:na,G:ia,V:!0,B:!0},Ia={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:na,G:ia,V:!0},Ea={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:aa,G:ia,B:!0,Na:!0},Ta={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:aa,G:ia,B:!0,Na:!0},Sa={endpoint:"getAccountInfo"},Ca={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");na(t)},Z:"email",B:!0},Na={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Aa={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},ka={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");na(t)},Z:"email",B:!0},Pa={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Oa={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},Ra={endpoint:"resetPassword",A:da,Z:"email",B:!0},xa={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Da={endpoint:"setAccountInfo",N:["idToken"],A:ra,V:!0},La={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ra(t),!t.password)throw new E("weak-password")},G:ia,V:!0},Ma={endpoint:"signupNewUser",G:ia,V:!0,B:!0},ja={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Fa={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Ua={endpoint:"verifyAssertion",A:ua,Ya:ca,G:ha,V:!0,B:!0},Va={endpoint:"verifyAssertion",A:ua,Ya:ca,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw Ya(t.errorMessage);ia(t)},V:!0,B:!0},qa={endpoint:"verifyAssertion",A:function(t){if(ua(t),!t.idToken)throw new E("internal-error")},Ya:ca,G:ha,V:!0},Ba={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:ia,V:!0,B:!0},za={endpoint:"verifyPassword",A:function(t){if(na(t),!t.password)throw new E("wrong-password")},G:ia,V:!0,B:!0},Ha={endpoint:"verifyPhoneNumber",A:oa,G:ia,B:!0},Ga={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");oa(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Fo(t);ia(t)}},Wa={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:oa,G:ia,B:!0},Ka={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[zs]^!!t.refreshToken)throw new E("internal-error")},B:!0,Na:!0};function Qa(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.N))return we(new E("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return _e(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ea(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new E("internal-error");return r[e.Z]})}function Ya(t){return Xa({error:{errors:[{message:t}],code:400,message:t}})}function Xa(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new E(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ft(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new E(i[n],e);return new E("internal-error",e=!e&&t?Sr(t):e)}function Ja(t){var o;this.b=t,this.a=null,this.rb=(o=this,(eu=eu||new pe(function(t,e){function n(){Pr(),br("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Pr(),e(Error("Network Error"))},timeout:Za.get()})}var r;br("gapi.iframes.Iframe")?t():br("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){br("gapi.load")?n():e(Error("Network Error"))},_e(Ds(r=It($a,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw eu=null,t})).then(function(){return new pe(function(r,i){br("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},tu.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var $a=new dt(mt,"https://apis.google.com/js/api.js?onload=%{onload}"),Za=new Or(3e4,6e4),tu=new Or(5e3,15e3),eu=null;function nu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?On((t=Pn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):On("https",this.l,null,"/__/auth/iframe"),this.a=t,An(this.a,"apiKey",this.h),An(this.a,"appName",this.i),this.b=null,this.c=[]}function ru(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function iu(t){try{return Jl.app(t).auth().Ga()}catch(t){return[]}}function ou(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function su(t){var a=tr();return Qa(t,Pa,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=Pn(a)).c,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?Pn(i).a==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(or.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Mo(tr())})}function au(i){return i.m||(i.m=ar().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=iu(i.b),(r=new nu(i.s,i.g,i.b,i.f)).f=t,r.b=e,r.c=Q(n||[]),i.u=r.toString()),i.v=new Ja(i.u),function(r){if(!r.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.v,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Ro(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",_e(e)}return e.status="ERROR",_e(e)})}(i)}),i.m)}function uu(t){return t.l||(t.C=t.c?gr(t.c,iu(t.b)):null,t.l=new qs(t.g,k(t.i),t.C),t.f&&Ys(t.l,t.f)),t.l}function cu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new ru(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ht(u||null),t.f=c,t.yb(h).toString()}function hu(t){if(this.a=t||Jl.INTERNAL.reactNative&&Jl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function lu(t){this.b=t,this.a={},this.f=m(this.c,this)}nu.prototype.toString=function(){return this.f?An(this.a,"v",this.f):zn(this.a.b,"v"),this.b?An(this.a,"eid",this.b):zn(this.a.b,"eid"),this.c.length?An(this.a,"fw",this.c.join(",")):zn(this.a.b,"fw"),this.a.toString()},ru.prototype.yb=function(t){return this.h=t,this},ru.prototype.toString=function(){var t;if(An(t=this.v?On((t=Pn(this.v.url)).c,t.a,t.g,"/emulator/auth/handler"):On("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),An(t,"appName",this.c),An(t,"authType",this.m),this.a.isOAuthProvider){var e,n=this.a;try{var r=Jl.app(this.c).auth().la()}catch(t){r=null}for(e in n.ob=r,An(t,"providerId",this.a.providerId),n=Cr((r=this.a).Ib))n[e]=n[e].toString();e=r.Qc,n=ht(n);for(var i=0;i<e.length;i++){var o=e[i];o in n&&delete n[o]}r.pb&&r.ob&&!n[r.pb]&&(n[r.pb]=r.ob),ct(n)||An(t,"customParameters",Sr(n))}if("function"==typeof this.a.Qb&&((r=this.a.Qb()).length&&An(t,"scopes",r.join(","))),this.l?An(t,"redirectUrl",this.l):zn(t.b,"redirectUrl"),this.g?An(t,"eventId",this.g):zn(t.b,"eventId"),this.i?An(t,"v",this.i):zn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!kn(t,s)&&An(t,s,this.b[s]);return this.h?An(t,"tid",this.h):zn(t.b,"tid"),this.f?An(t,"eid",this.f):zn(t.b,"eid"),(s=iu(this.c)).length&&An(t,"fw",s.join(",")),t.toString()},(t=ou.prototype).Ob=function(e,n,t){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){var t,r;r={type:"webStorageSupport"},au(t=o).then(function(){return e=t.v,n=r,e.rb.then(function(){return new pe(function(t){e.a.send(n.type,n,t,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&rr(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new pe(function(e){return function t(){gn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return gn(t).then(function(){n(r)})})},t.Xb=function(){var t=mr();return!Tr(t)&&!kr(t)},t.Tb=function(){return!1},t.Mb=function(e,t,n,r,i,o,s,a){if(!e)return we(new E("popup-blocked"));if(s&&!Tr())return this.ma().o(function(t){rr(e),i(t)}),r(),_e();this.a||(this.a=su(uu(this)));var u=this;return this.a.then(function(){var t=u.ma().o(function(t){throw rr(e),i(t),t});return r(),t}).then(function(){Po(n),s||er(cu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=su(uu(this)));var i=this;return this.a.then(function(){Po(e),er(cu(i.s,i.g,i.b,t,e,tr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return au(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new E("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(e){W(this.h,function(t){return t==e})},(t=hu.prototype).get=function(t){return _e(this.a.getItem(t)).then(function(t){return t&&Nr(t)})},t.set=function(t,e){return _e(this.a.setItem(t,Sr(e)))},t.U=function(t){return _e(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var fu,pu=[];function du(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function vu(t){this.a=t}function yu(t){this.c=t,this.b=!1,this.a=[]}function gu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return we(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new pe(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return mu(r,c),t}).o(function(t){throw mu(r,c),t})}function mu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),W(t.a,function(t){return t==e}))}function bu(){if(!Eu())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e,n,r=this;hr()&&self?(this.v=(n=hr()?self:null,V(pu,function(t){t.b==n&&(e=t)}),e||(e=new lu(n),pu.push(e)),e),du(this.v,"keyChanged",function(t,n){return Au(r).then(function(e){return 0<e.length&&V(r.a,function(t){t(e)}),{keyProcessed:H(e,n.key)}})}),du(this.v,"ping",function(){return _e(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?_e().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):_e(null)).then(function(t){(r.h=t)&&(r.g=new yu(new vu(t)),gu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&H(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function _u(i){return new pe(function(e,n){var t=i.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new pe(function(t,e){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return _u(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function wu(t){return t.i||(t.i=_u(t)),t.i}function Iu(i,t){var o=0;return new pe(function e(n,r){wu(i).then(t).then(n).o(function(t){return 3<++o?void r(t):wu(i).then(function(t){return t.close(),i.i=void 0,e(n,r)}).o(function(t){r(t)})})})}function Eu(){try{return l.indexedDB}catch(t){return}}function Tu(t){return t.objectStore("firebaseLocalStorage")}function Su(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Cu(t){return new pe(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Nu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?gu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):_e();var n}function Au(r){return wu(r).then(function(t){var i=Tu(Su(t,!1));return i.getAll?Cu(i.getAll()):new pe(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function ku(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Pu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=_e().then(function(){if(Eu()){var e=Ar(),n="__sak"+e;return fu=fu||new bu,(i=fu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.U(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){V(r.a,function(t){t(e)})}),t})}function Ou(){this.a={},this.type="inMemory"}function Ru(){if(!function(){var t="Node"==lr();if(!(t=xu()||t&&Jl.INTERNAL.node&&Jl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=xu()||Jl.INTERNAL.node.localStorage,this.type="localStorage"}function xu(){try{var t=l.localStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Du(){this.type="nullStorage"}function Lu(){if(!function(){var t="Node"==lr();if(!(t=Mu()||t&&Jl.INTERNAL.node&&Jl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Mu()||Jl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Mu(){try{var t=l.sessionStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function ju(){var t={};t.Browser=Vu,t.Node=qu,t.ReactNative=Bu,t.Worker=zu,this.a=t[lr()]}lu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],V(t,function(t){e.push(_e().then(function(){return t(n.origin,n.data.data)}))}),Ee(e).then(function(t){var e=[];V(t,function(t){e.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),V(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},vu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},yu.prototype.close=function(){for(;0<this.a.length;)mu(this,this.a[0]);this.b=!0},(t=bu.prototype).set=function(r,i){var o=this,s=!1;return Iu(this,function(t){return Cu((t=Tu(Su(t,!0))).get(r))}).then(function(n){return Iu(o,function(t){if(t=Tu(Su(t,!0)),n)return n.value=i,Cu(t.put(n));o.b++,s=!0;var e={};return e.fbase_key=r,e.value=i,Cu(t.add(e))})}).then(function(){return o.c[r]=i,Nu(o,r)}).oa(function(){s&&o.b--})},t.get=function(e){return Iu(this,function(t){return Cu(Tu(Su(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.U=function(e){var n=this,r=!1;return Iu(this,function(t){return r=!0,n.b++,Cu(Tu(Su(t,!0)).delete(e))}).then(function(){return delete n.c[e],Nu(n,e)}).oa(function(){r&&n.b--})},t.ca=function(t){var n;0==this.a.length&&(ku(n=this),function e(){n.f=setTimeout(function(){n.l=Au(n).then(function(e){0<e.length&&V(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){W(this.a,function(t){return t==e}),0==this.a.length&&ku(this)},(t=Pu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.U=function(e){return this.b.then(function(t){return t.U(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){W(this.a,function(t){return t==e})},(t=Ou.prototype).get=function(t){return _e(this.a[t])},t.set=function(t,e){return this.a[t]=e,_e()},t.U=function(t){return delete this.a[t],_e()},t.ca=function(){},t.ia=function(){},(t=Ru.prototype).get=function(t){var e=this;return _e().then(function(){return Nr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return _e().then(function(){var t=Sr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return _e().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&Ze(l.window,"storage",t)},t.ia=function(t){l.window&&nn(l.window,"storage",t)},(t=Du.prototype).get=function(){return _e(null)},t.set=function(){return _e()},t.U=function(){return _e()},t.ca=function(){},t.ia=function(){},(t=Lu.prototype).get=function(t){var e=this;return _e().then(function(){return Nr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return _e().then(function(){var t=Sr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return _e().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Fu,Uu,Vu={F:Ru,bb:Lu},qu={F:Ru,bb:Lu},Bu={F:hu,bb:Du},zu={F:Ru,bb:Du},Hu={rd:"local",NONE:"none",td:"session"};function Gu(){var t=!(kr(mr())||!cr()),e=Tr(),n=_r();this.m=t,this.h=e,this.l=n,this.a={},t=Fu=Fu||new ju;try{this.g=!Zn()&&Lr()||!l.indexedDB?new t.a.F:new Pu(new(hr()?Ou:t.a.F))}catch(t){this.g=new Ou,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Ou}this.v=new Ou,this.f=m(this.Yb,this),this.b={}}function Wu(){return Uu=Uu||new Gu}function Ku(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Qu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Yu(t,e,n){return n=Qu(e,n),"local"==e.F&&(t.b[n]=null),Ku(t,e.F).U(n)}function Xu(t){t.c&&(clearInterval(t.c),t.c=null)}function Ju(t){this.a=t,this.b=Wu()}(t=Gu.prototype).get=function(t,e){return Ku(this,t.F).get(Qu(t,e))},t.set=function(e,t,n){var r=Qu(e,n),i=this,o=Ku(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Qu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ct(this.a)&&(Ku(this,"local").ca(this.f),this.h||(Zn()||!Lr())&&l.indexedDB||!this.l||(Xu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Be({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Yb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Qu(t,e),this.a[t]&&(W(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(Ku(this,"local").ia(this.f),Xu(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ku(this,"local").ia(this.f):Xu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.mb(e))};zt&&Zt&&10==Zt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,m(this.mb,this))},t.mb=function(t){this.a[t]&&V(this.a[t],function(t){t()})};var $u,Zu={name:"authEvent",F:"local"};function tc(){this.a=Wu()}function ec(t,e){this.b=nc,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===$u&&($u=l.Int32Array?new Int32Array(cc):cc),this.reset()}w(ec,function(){this.b=-1});for(var nc=64,rc=nc-1,ic=[],oc=0;oc<rc;oc++)ic[oc]=0;var sc=K(128,ic);function ac(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|$u[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function uc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ac(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ac(t),i=0)}}t.c=i,t.g+=n}ec.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Q(this.h)};var cc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function hc(){ec.call(this,8,lc)}w(hc,ec);var lc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function fc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new tc,this.g=new Ju(this.h),this.f=null,this.b=[],this.a=this.c=null}function pc(t){return new E("invalid-cordova-configuration",t)}function dc(t){var e=new hc;uc(e,t),t=[];var n=8*e.g;e.c<56?uc(e,sc,56-e.c):uc(e,sc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ac(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return B(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function vc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function yc(a){return a.f||(a.f=a.ma().then(function(){return new pe(function(n){function e(r){t=!0,s&&s.cancel(),gc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,n=(e=-1!=(n=Yi(r.url)).indexOf("/__/auth/callback")?(e="object"==typeof(e=Nr(kn(e=Pn(n),"firebaseError")||null))?T(e):null)?new Oo(t.c,t.b,null,null,e,null,t.T()):new Oo(t.c,t.b,n,t.f,null,null,t.T()):e)||o),vc(i,n)})}var i,o,t,s,r;a.Ea(function t(e){return n(e),a.Sa(t),!1}),i=a,o=new Oo("unknown",null,null,null,new E("no-auth-event")),t=!1,s=gn(500).then(function(){return gc(i).then(function(){t||vc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(br("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Lo=Lo||new xo,function(t){var n=Lo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=br("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function gc(e){var t,n=null;return(t=e.g).b.get(Zu,t.a).then(Ro).then(function(t){return n=t,Yu((t=e.g).b,Zu,t.a)}).then(function(){return n})}function mc(t){this.a=t,this.b=Wu()}(t=fc.prototype).ma=function(){return this.Ia||(this.Ia=(ur(void 0)?ar().then(function(){return new pe(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):we(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof br("universalLinks.subscribe",l))throw pc("cordova-universal-links-plugin-fix is not installed");if(void 0===br("BuildInfo.packageName",l))throw pc("cordova-plugin-buildinfo is not installed");if("function"!=typeof br("cordova.plugins.browsertab.openUrl",l))throw pc("cordova-plugin-browsertab is not installed");if("function"!=typeof br("cordova.InAppBrowser.open",l))throw pc("cordova-plugin-inappbrowser is not installed")},function(){throw new E("cordova-not-ready")}))},t.Ob=function(t,e){return e(new E("operation-not-supported-in-this-environment")),_e()},t.Mb=function(){return we(new E("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return we(new E("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=_e().then(function(){return Po(e),yc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Oo(t,r,null,o,new E("no-auth-event"),null,i),a=br("BuildInfo.packageName",l);if("string"!=typeof a)throw new E("invalid-cordova-configuration");var u=br("BuildInfo.displayName",l),c={};if(mr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!mr().toLowerCase().match(/android/))return we(new E("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=dc(o),c.sessionId=o;var h=cu(n.v,n.i,n.l,t,e,null,r,n.m,c,n.u,i,n.s);return n.ma().then(function(){var t=n.h;return n.C.a.set(Zu,s.w(),t)}).then(function(){var t=br("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new E("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=br("cordova.plugins.browsertab.openUrl",l)))throw new E("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=br("cordova.InAppBrowser.open",l)))throw new E("invalid-cordova-configuration");t=mr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new pe(function(e,t){a=function(){var t=br("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s=s||gn(2e3).then(function(){t(new E("redirect-cancelled-by-user"))})},c=function(){Rr()&&u()},o.addEventListener("resume",u,!1),mr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return gc(i).then(function(){throw t})})}).oa(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Sa(a),i.c=null})},t.Ea=function(e){this.b.push(e),yc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Oo("unknown",null,null,null,new E("no-auth-event")),e(t))})},t.Sa=function(e){W(this.b,function(t){return t==e})};var bc={name:"pendingRedirect",F:"session"};function _c(t){return Yu(t.b,bc,t.a)}function wc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Mc,this.C=new qc,this.g=new mc(Dc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ic(this.D,this.v,this.m,S,this.J)}function Ic(t,e,n,r,i){var o=Jl.SDK_VERSION||null;return new(ur()?fc:ou)(t,e,n,o,r,i)}function Ec(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.ma().o(function(t){throw e.a==n&&e.reset(),t})}function Tc(n){n.a.Xb()&&Ec(n).o(function(t){var e=new Oo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Pc(t)&&n.s(e)}),n.a.Tb()||jc(n.b)}function Sc(n,t){H(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(bc,t.a).then(function(t){return"pending"==t}).then(function(t){t?_c(n.g).then(function(){Ec(n).o(function(t){var e=new Oo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Pc(t)&&n.s(e)})}):Tc(n)}).o(function(){Tc(n)})}function Cc(t,e){W(t.h,function(t){return t==e})}wc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Ic(this.D,this.v,this.m,null,this.J),this.i={}},wc.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=_()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=_())),e=!0;break}}return jc(this.b),e};var Nc=new Or(2e3,1e4),Ac=new Or(3e4,6e4);function kc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Pc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Oc(e,t,n,r,i){var o,s;return(s=e.g).b.set(bc,"pending",s.a).then(function(){return e.a.Nb(t,n,r,i).o(function(t){if(Pc(t))throw new E("operation-not-supported-in-this-environment");return o=t,_c(e.g).then(function(){throw o})}).then(function(){return e.a.$b()?new pe(function(){}):_c(e.g).then(function(){return e.qa()}).then(function(){}).o(function(){})})})}function Rc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},Nc.get())}wc.prototype.qa=function(){return this.b.qa()};var xc={};function Dc(t,e,n){return t=t+":"+e,t=n?t+":"+n.url:t}function Lc(t,e,n,r){var i=Dc(e,n,r);return xc[i]||(xc[i]=new wc(t,e,n,r)),xc[i]}function Mc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function jc(t){t.g||(t.g=!0,Vc(t,!1,null,null))}function Fc(t){t.g&&!t.i&&Vc(t,!1,null,null)}function Uc(t,e){if(t.b=function(){return _e(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Vc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return we(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Uc(t,n):Uc(t,{user:null}),t.f=[],t.c=[]}function qc(){}function Bc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function zc(t,e){this.a=e,Vr(this,"verificationId",t)}function Hc(t,e,n,r){return new No(t).fb(e,n).then(function(t){return new zc(t,r)})}function Gc(t){var e=Li(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");qr(this,{token:t,expirationTime:Dr(1e3*e.exp),authTime:Dr(1e3*e.auth_time),issuedAtTime:Dr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Wc(t,e,n){var r=e&&e[Qc];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ht(e),this.g=n,this.c=new Xi(null,r),this.b=[];var i=this;V(e[Kc]||[],function(t){(t=Gr(t))&&i.b.push(t)}),Vr(this,"auth",this.a),Vr(this,"session",this.c),Vr(this,"hints",this.b)}Mc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Mc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Vc(this,!0,null,t.a),_e()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.T(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Vc(e,a,t,null)}).o(function(t){Vc(e,a,null,t)})}(this,t,e):we(new E("invalid-auth-event")):(Vc(this,!1,null,null),_e())):we(new E("invalid-auth-event"))},Mc.prototype.qa=function(){var i=this;return new pe(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new E("timeout"),n.a&&n.a.cancel(),n.a=gn(Ac.get()).then(function(){n.b||(n.g=!0,Vc(n,!0,null,r))}))})},qc.prototype.h=function(t,e){var n,r,i,o,s;t?(n=t.c,r=t.b,t.a?(e.na(t.c,null,t.a,t.b),_e()):e.Fa(n,r)?(i=e,o=(t=t).b,s=t.c,i.Fa(s,o)(t.g,t.f,t.T(),t.i).then(function(t){i.na(s,t,null,o)}).o(function(t){i.na(s,null,t,o)})):we(new E("invalid-auth-event"))):we(new E("invalid-auth-event"))},zc.prototype.confirm=function(t){return t=Ao(this.verificationId,t),this.a(t)};var Kc="mfaInfo",Qc="mfaPendingCredential";function Yc(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new Wc(t,e,n),Vr(this,"resolver",this.b)}function Xc(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Yc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Jc(){}function $c(t){Vr(this,"factorId",t.fa),this.a=t}function Zc(t){if($c.call(this,t),this.a.fa!=No.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function th(t,e){for(var n in qe.call(this,t),e)this[n]=e[n]}function eh(t,e){this.a=t,this.b=[],this.c=m(this.yc,this),Ze(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Qr]=t.uid),t.displayName&&(n[Wr]=t.displayName),t.enrollmentTime&&(n[Kr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Yr]=t.phoneNumber);try{e=new Xr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),nh(this,r)}function nh(t,e){t.b=e,Vr(t,"enrolledFactors",e)}function rh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ih(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function oh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function sh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function ah(t,e){t.b=Di(e[zs]||""),t.a=e.refreshToken,sh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function uh(e,t){return r=e.f,i=t,new pe(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?$s(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Xa(t)):t.access_token&&t.refresh_token?e(t):n(new E("internal-error")):n(new E("network-request-failed"))},"POST",Bn(i).toString(),r.g,r.m.get()):n(new E("internal-error"))}).then(function(t){return e.b=Di(t.access_token),e.a=t.refresh_token,sh(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function ch(t,e){this.a=t||null,this.b=e||null,qr(this,{lastSignInTime:Dr(e||null),creationTime:Dr(t||null)})}function hh(t,e,n,r,i,o){qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function lh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=Jl.SDK_VERSION?gr(Jl.SDK_VERSION):null;this.a=new qs(this.l,k(S),i),t.emulatorConfig&&Ys(this.a,t.emulatorConfig),this.b=new oh(this.a),bh(this,e[zs]),ah(this.b,e),Vr(this,"refreshToken",this.b.a),Ih(this,n||{}),fn.call(this),this.R=!1,this.s&&wr()&&(this.i=Lc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=(r=this,new rh(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=r.b.c-Date.now()-3e5;return 0<t?t:0})),this.aa=m(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){Ys(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){dh(o,t.f)},this.ba=null,this.O=new eh(this,n),Vr(this,"multiFactor",this.O)}function fh(t,e){t.ja&&nn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&Ze(e,"languageCodeChanged",t.Oa)}function ph(t,e){t.X&&nn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&Ze(e,"emulatorConfigChanged",t.Aa)}function dh(t,e){t.$=e,Js(t.a,Jl.SDK_VERSION?gr(Jl.SDK_VERSION,t.$):null)}function vh(t,e){t.ba&&nn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&Ze(e,"frameworkChanged",t.Ba)}function yh(e){try{return Jl.app(e.m).auth()}catch(t){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function gh(t){t.D||t.u.b||(t.u.start(),nn(t,"tokenChanged",t.aa),Ze(t,"tokenChanged",t.aa))}function mh(t){nn(t,"tokenChanged",t.aa),t.u.stop()}function bh(t,e){t.za=e,Vr(t,"_lat",e)}function _h(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ee(e).then(function(){return t})}function wh(t){t.i&&!t.R&&(t.R=!0,Sc(t.i,t))}function Ih(t,e){qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ch(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Eh(){}function Th(t){return _e().then(function(){if(t.D)throw new E("app-deleted")})}function Sh(t){return B(t.providerData,function(t){return t.providerId})}function Ch(t,e){e&&(Nh(t,e.providerId),t.providerData.push(e))}function Nh(t,e){W(t.providerData,function(t){return t.providerId==e})}function Ah(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Vr(t,e,n)}function kh(e,t){var n,r;e!=t&&(qr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Vr(e,"metadata",new ch((r=t.metadata).a,r.b)):Vr(e,"metadata",new ch),V(t.providerData,function(t){Ch(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,n.c=r.c,Vr(e,"refreshToken",e.b.a),nh(e.O,t.O.b))}function Ph(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,Qa((e=i).a,Sa,{idToken:n}).then(m(e.Kc,e)).then(function(){return r||Ah(i,"isAnonymous",!1),t})})}function Oh(t,e){e[zs]&&t.za!=e[zs]&&(ah(t.b,e),t.dispatchEvent(new th("tokenChanged")),bh(t,e[zs]),Ah(t,"refreshToken",t.b.a))}function Rh(t,e){return Ph(t).then(function(){if(H(Sh(t),e))return _h(t).then(function(){throw new E("provider-already-linked")})})}function xh(t,e,n){return Br({user:t,credential:ko(e),additionalUserInfo:e=Vi(e),operationType:n})}function Dh(t,e){return Oh(t,e),t.reload().then(function(){return t})}function Lh(n,r,t,e,i){if(!wr())return we(new E("operation-not-supported-in-this-environment"));if(n.h&&!i)return we(n.h);var o=Ui(t.providerId),s=Ar(n.uid+":::"),a=null,u=ir(a=(!Tr()||cr())&&n.s&&t.isOAuthProvider?cu(n.s,n.l,n.m,r,t,null,s,Jl.SDK_VERSION||null,null,null,n.tenantId):a,o&&o.ua,o&&o.ta);return e=e().then(function(){if(jh(n),!i)return n.I().then(function(){})}).then(function(){return kc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new pe(function(t,e){n.na(r,null,new E("cancelled-popup-request"),n.g||null),n.f=t,n.C=e,n.g=s,n.c=Rc(n.i,n,r,u,s)})}).then(function(t){return u&&rr(u),t?Br(t):null}).o(function(t){throw u&&rr(u),t}),Fh(n,e,i)}function Mh(e,t,n,r,i){if(!wr())return we(new E("operation-not-supported-in-this-environment"));if(e.h&&!i)return we(e.h);var o=null,s=Ar(e.uid+":::");return r=r().then(function(){if(jh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,_h(e)}).then(function(t){return t=e.ha?(t=e.ha).b.set(qh,e.w(),t.a):t}).then(function(){return Oc(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ha)return Bh(e.ha);throw o}).then(function(){if(o)throw o}),Fh(e,r,i)}function jh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new E("internal-error");throw new E("auth-domain-config-required")}}function Fh(n,t,e){var r,i=(t=t,e=e,(r=n).h&&!e?(t.cancel(),we(r.h)):t.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new th("userInvalidated")),r.h=t),t}));return n.J.push(i),i.oa(function(){G(n.J,i)}),i.o(function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Xc(t.w(),yh(n),m(n.jc,n)):e)||t})}function Uh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[zs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new lh(e,n,t);return t.providerData&&V(t.providerData,function(t){t&&Ch(i,Br(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Vh(t){this.a=t,this.b=Wu()}Wc.prototype.Rc=function(t){var n=this;return t.sb(this.a.a,this.c).then(function(t){var e=ht(n.f);return delete e[Kc],delete e[Qc],ft(e,t),n.g(e)})},w(Yc,E),Jc.prototype.sb=function(t,e,n){return e.type==Ji?(o=this,s=t,a=n,e.Ha().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ft(t,{phoneVerificationInfo:Co(o.a)}),Qa(s,Ea,t)})):(r=this,i=t,e.Ha().then(function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:Co(r.a)}),Qa(i,Ta,t)}));var r,i,o,s,a},w($c,Jc),w(Zc,$c),w(th,qe),(t=eh.prototype).yc=function(t){var e;nh(this,(t=t.hd,e=[],V(t.mfaInfo||[],function(t){(t=Gr(t))&&e.push(t)}),e))},t.Rb=function(){return this.a.I().then(function(t){return new Xi(t,null)})},t.fc=function(e,n){var r=this,i=this.a.a;return this.Rb().then(function(t){return e.sb(i,t,n)}).then(function(t){return Oh(r.a,t),r.a.reload()})},t.bd=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Qa(e,Ka,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return nh(n,e),Oh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:B(this.b,function(t){return t.w()})}}},rh.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=gn(ih(n,t)).then(xr).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},rh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},oh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},oh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?we(new E("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?uh(this,{grant_type:"refresh_token",refresh_token:this.a}):_e(null):_e({accessToken:this.b.toString(),refreshToken:this.a})},ch.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(lh,fn),lh.prototype.wa=function(t){this.ya=t,Qs(this.a,t)},lh.prototype.la=function(){return this.ya},lh.prototype.Ga=function(){return Q(this.$)},lh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Vr(lh.prototype,"providerId","firebase"),(t=lh.prototype).reload=function(){var t=this;return Fh(this,Th(this).then(function(){return Ph(t).then(function(){return _h(t)}).then(Eh)}))},t.oc=function(t){return this.I(t).then(function(t){return new Gc(t)})},t.I=function(t){var e=this;return Fh(this,Th(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.za&&(bh(e,t.accessToken),e.dispatchEvent(new th("tokenChanged"))),Ah(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");Ih(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?B(e,function(t){return new hh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)Ch(this,n[r]);Ah(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new th("userReloaded",{hd:t}))},t.Lc=function(t){return Fr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Fh(this,t.c(this.a,this.uid).then(function(t){return Oh(e,t),n=xh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Fr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(e){var n=this,r=null;return Fh(this,Rh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=xh(n,t,"link"),Dh(n,t)}).then(function(){return r}))},t.Dc=function(t,e){var n=this;return Fh(this,Rh(this,"phone").then(function(){return Hc(yh(n),t,e,m(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Fh(this,_e().then(function(){return Hc(yh(n),t,e,m(n.tb,n))}),!0)},t.Bb=function(e){var n=this;return Fh(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.ed=function(e){var n=this;return Fh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Oh(n,t),n.reload()}))},t.Cb=function(e){var n=this;return Fh(this,this.I().then(function(t){return n.a.Cb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Th(this);var n=this;return Fh(this,this.I().then(function(t){return n.a.Db(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Oh(n,t),Ah(n,"displayName",t.displayName||null),Ah(n,"photoURL",t.photoUrl||null),V(n.providerData,function(t){"password"===t.providerId&&(Vr(t,"displayName",n.displayName),Vr(t,"photoURL",n.photoURL))}),_h(n)}).then(Eh))},t.cd=function(e){var n=this;return Fh(this,Ph(this).then(function(t){return H(Sh(n),e)?Qa(n.a,_a,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return V(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),V(Sh(n),function(t){e[t]||Nh(n,t)}),e[No.PROVIDER_ID]||Vr(n,"phoneNumber",null),_h(n)}):_h(n).then(function(){throw new E("no-such-provider")})}))},t.delete=function(){var e=this;return Fh(this,this.I().then(function(t){return Qa(e.a,ba,{idToken:t})}).then(function(){e.dispatchEvent(new th("userDeleted"))})).then(function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");fh(e,null),ph(e,null),vh(e,null),e.J=[],e.D=!0,mh(e),Vr(e,"refreshToken",null),e.i&&Cc(e.i,e)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?m(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?m(this.Lb,this):null},t.Ec=function(t){var e=this;return Lh(this,"linkViaPopup",t,function(){return Rh(e,t.providerId).then(function(){return _h(e)})},!1)},t.Nc=function(t){return Lh(this,"reauthViaPopup",t,function(){return _e()},!0)},t.Fc=function(t){var e=this;return Mh(this,"linkViaRedirect",t,function(){return Rh(e,t.providerId)},!1)},t.Oc=function(t){return Mh(this,"reauthViaRedirect",t,function(){return _e()},!0)},t.Kb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return fa(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=xh(i,t,"link"),Dh(i,t)}).then(function(){return o}),Fh(this,t)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Fh(this,_e().then(function(){return to(pa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=xh(i,t,"reauthenticate"),Oh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(e){var n=this,r=null;return Fh(this,this.I().then(function(t){return r=t,void 0===e||ct(e)?{}:Pi(new _i(e))}).then(function(t){return n.a.ub(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Eb=function(e,n){var r=this,i=null;return Fh(this,this.I().then(function(t){return i=t,void 0===n||ct(n)?{}:Pi(new _i(n))}).then(function(t){return r.a.Eb(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Fh(this,t=to(_e(t),n.uid).then(function(t){return e=xh(n,t,"reauthenticate"),Oh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ft(e,this.metadata.w()),V(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),ft(e,this.O.w()),e};var qh={name:"redirectUser",F:"session"};function Bh(t){return Yu(t.b,qh,t.a)}function zh(t){var e,n,r,i;this.a=t,this.b=Wu(),this.c=null,this.f=(n=Wh("local"),r=Wh("session"),i=Wh("none"),function(n,r,i){var o=Qu(r,i),s=Ku(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=Nr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Gh,e.a).then(function(t){return t?Wh(t):n})})})}).then(function(t){return e.c=t,Hh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Wh("local"),this.a,m(this.g,this))}function Hh(t,e){var n,a,r=[];for(n in Hu)Hu[n]!==e&&r.push(Yu(t.b,Wh(Hu[n]),t.a));return r.push(Yu(t.b,Gh,t.a)),a=r,new pe(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Ie(a[s],b(t,s),o);else n(i)})}zh.prototype.g=function(){var e=this,n=Wh("local");Xh(this,function(){return _e().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Hh(e,"local").then(function(){e.c=n})})})};var Gh={name:"persistence",F:"session"};function Wh(t){return{name:"authUser",F:t}}function Kh(t,e){return Xh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Qh(t){return Xh(t,function(){return Yu(t.b,t.c,t.a)})}function Yh(t,e,n){return Xh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Uh(t||{})})})}function Xh(t,e){return t.f=t.f.then(e,e),t.f}function Jh(t){if(this.l=!1,Vr(this,"settings",new Bc),Vr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new E("invalid-api-key");var n,e,r,i,o,s;t=Jl.SDK_VERSION?gr(Jl.SDK_VERSION):null,this.a=new qs(this.app.options&&this.app.options.apiKey,k(S),t),this.R=[],this.s=[],this.O=[],this.hb=Jl.INTERNAL.createSubscribe(m(this.zc,this)),this.X=void 0,this.bc=Jl.INTERNAL.createSubscribe(m(this.Ac,this)),il(this,null),this.i=new zh(this.app.options.apiKey+":"+this.app.name),this.D=new Vh(this.app.options.apiKey+":"+this.app.name),this.$=cl(this,(e=(n=this).app.options.authDomain,t=function(e){var t=function(t,e){return t.b.get(qh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Uh(t||{})})}(e.D,e.app.options.authDomain).then(function(t){return(e.m=t)&&(t.ha=e.D),Bh(e.D)});return cl(e,t)}(n).then(function(){return Yh(n.i,e,n.P)}).then(function(e){return e?(e.ha=n.D,n.m&&(n.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Kh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Qh(n.i)})):null}).then(function(t){il(n,t||null)}),cl(n,t))),this.h=cl(this,(r=this).$.then(function(){return nl(r)}).o(function(){}).then(function(){if(!r.l)return r.ja()}).o(function(){}).then(function(){var t;r.l||(r.ba=!0,(t=r.i).b.addListener(Wh("local"),t.a,r.ja))})),this.ba=!1,this.ja=m(this.Zc,this),this.Ba=m(this.da,this),this.ya=m(this.mc,this),this.za=m(this.wc,this),this.Aa=m(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,s=i.app.options.apiKey,o&&wr()&&(i.Oa=i.$.then(function(){var t;if(!i.l)return i.b=Lc(o,s,i.app.name,i.P),Sc(i.b,i),sl(i)&&wh(sl(i)),i.m&&(wh(i.m),(t=i.m).wa(i.la()),fh(t,i),dh(t=i.m,i.J),vh(t,i),Ys((t=i.m).a,i.P),ph(t,i),i.m=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Gc,this),this.u=0,fn.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){var t;return t=this.P?Br({protocol:(t=Pn(this.P.url)).c,host:t.a,port:t.g,options:Br({disableWarnings:this.P.ec})}):null},enumerable:!1}),this.J=[],this.P=null}function $h(t){qe.call(this,"languageCodeChanged"),this.h=t}function Zh(t){qe.call(this,"emulatorConfigChanged"),this.c=t}function tl(t){qe.call(this,"frameworkChanged"),this.f=t}function el(t){return t.Oa||we(new E("auth-domain-config-required"))}function nl(t){if(!wr())return we(new E("operation-not-supported-in-this-environment"));var e=el(t).then(function(){return t.b.qa()}).then(function(t){return t?Br(t):null});return cl(t,e)}function rl(o,s){var a={};return a.apiKey=o.app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.P&&(a.emulatorConfig=o.P),o.$.then(function(){return t=a,e=s,n=o.D,r=o.Ga(),i=new lh(t,e),n&&(i.ha=n),r&&dh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return sl(o)&&t.uid==sl(o).uid?kh(sl(o),t):(il(o,t),wh(t)),o.da(t)}).then(function(){ul(o)})}function il(t,e){var n,r;sl(t)&&(n=sl(t),r=t.Ba,W(n.S,function(t){return t==r}),nn(sl(t),"tokenChanged",t.ya),nn(sl(t),"userDeleted",t.za),nn(sl(t),"userInvalidated",t.Aa),mh(sl(t))),e&&(e.S.push(t.Ba),Ze(e,"tokenChanged",t.ya),Ze(e,"userDeleted",t.za),Ze(e,"userInvalidated",t.Aa),0<t.u&&gh(e)),Vr(t,"currentUser",e),e&&(e.wa(t.la()),fh(e,t),dh(e,t.J),vh(e,t),Ys(e.a,t.P),ph(e,t))}function ol(n,t){var e=null,r=null;return cl(n,t.then(function(t){return e=ko(t),r=Vi(t),rl(n,t)},function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Xc(t.w(),n,m(n.kc,n)):e)||t}).then(function(){return Br({user:sl(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function sl(t){return t.currentUser}function al(t){return sl(t)&&sl(t)._lat||null}function ul(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](al(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](al(t))}}function cl(t,e){return t.R.push(e),e.oa(function(){G(t.R,e)}),e}function hl(){}function ll(){this.a={},this.b=1e12}zh.prototype.xb=function(e){var n=null,r=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in Hu)if(Hu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(lr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Eu()&&"none"!==t)throw n;break;default:if(!_r()&&"none"!==t)throw n}}(e),Xh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Hh(r,e)}).then(function(){if(r.c=Wh(e),n)return r.b.set(r.c,n,r.a)}):_e()})},w(Jh,fn),w($h,qe),w(Zh,qe),w(tl,qe),(t=Jh.prototype).xb=function(t){return t=this.i.xb(t),cl(this,t)},t.wa=function(t){this.aa===t||this.l||(this.aa=t,Qs(this.a,this.aa),this.dispatchEvent(new $h(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new E("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,n=e,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!n&&ar().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.P={url:t,ec:e},this.settings.ib=!0,Ys(this.a,this.P),this.dispatchEvent(new Zh(this.P))}var n},t.Gc=function(t){this.J.push(t),Js(this.a,Jl.SDK_VERSION?gr(Jl.SDK_VERSION,this.J):null),this.dispatchEvent(new tl(this.J))},t.Ga=function(){return Q(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:sl(this)&&sl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return ol(i,la(i.a,o))})},t.Xc=function(e){if(!wr())return we(new E("operation-not-supported-in-this-environment"));var n=this,t=Ui(e.providerId),r=Ar(),i=null,o=ir(i=(!Tr()||cr())&&this.app.options.authDomain&&e.isOAuthProvider?cu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Jl.SDK_VERSION||null,null,null,this.T(),this.P):i,t&&t.ua,t&&t.ta);return cl(this,t=el(this).then(function(t){return kc(t,o,"signInViaPopup",e,r,!!i,n.T())}).then(function(){return new pe(function(t,e){n.na("signInViaPopup",null,new E("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=r,n.c=Rc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&rr(o),t?Br(t):null}).o(function(t){throw o&&rr(o),t}))},t.Yc=function(t){if(!wr())return we(new E("operation-not-supported-in-this-environment"));var e=this;return cl(this,el(this).then(function(){return Xh(t=e.i,function(){return t.b.set(Gh,t.c.F,t.a)});var t}).then(function(){return Oc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var e=this;return nl(this).then(function(t){return e.b&&Fc(e.b.b),t}).o(function(t){throw e.b&&Fc(e.b.b),t})},t.dd=function(t){if(!t)return we(new E("null-user"));if(this.S!=t.tenantId)return we(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u=(r=t,i=n,o=e.D,s=e.Ga(),a=r.b,(n={})[zs]=a.b&&a.b.toString(),n.refreshToken=a.a,i=new lh(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),s&&dh(i,s),kh(i,r),i);return cl(this,this.h.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return sl(e)&&t.uid==sl(e).uid?(kh(sl(e),t),e.da(t)):(il(e,u),wh(u),e.da(u))}).then(function(){ul(e)}))},t.Ab=function(){var t=this,e=this.h.then(function(){return t.b&&Fc(t.b.b),sl(t)?(il(t,null),Qh(t.i).then(function(){ul(t)})):_e()});return cl(this,e)},t.Zc=function(){var r=this;return Yh(this.i,this.app.options.authDomain).then(function(t){if(!r.l){var e,n;if((n=sl(r)&&t)&&(n=sl(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return kh(sl(r),t),sl(r).I();(sl(r)||t)&&(il(r,t),t&&(wh(t),t.ha=r.D),r.b&&Sc(r.b,r),ul(r))}})},t.da=function(t){return Kh(this.i,t)},t.mc=function(){ul(this),this.da(sl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return ol(e,_e(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(sl(e))})},t.Ac=function(t){var e,n,r=this;n=function(){t.next(sl(r))},(e=this).O.push(n),cl(e,e.h.then(function(){!e.l&&H(e.O,n)&&e.X!==e.getUid()&&(e.X=e.getUid(),n(al(e)))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(sl(r)):"function"==typeof t.next&&t.next(sl(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(sl(r)):"function"==typeof t.next&&t.next(sl(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this,n=this.h.then(function(){return sl(e)?sl(e).I(t).then(function(t){return{accessToken:t}}):null});return cl(this,n)},t.Tc=function(t){var n=this;return this.h.then(function(){return ol(n,Qa(n.a,Ba,{token:t}))}).then(function(t){var e=t.user;return Ah(e,"isAnonymous",!1),n.da(e),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return ol(n,Qa(n.a,za,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return ol(n,Qa(n.a,ga,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return ol(e,t.ka(e.a))})},t.Sc=function(t){return Fr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var n=this;return this.h.then(function(){var t=sl(n);if(t&&t.isAnonymous){var e=Br({providerId:null,isNewUser:!1});return Br({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return ol(n,n.a.zb()).then(function(t){var e=t.user;return Ah(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return sl(this)&&sl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&sl(this)&&gh(sl(this))},t.Pc=function(e){var n=this;V(this.s,function(t){t==e&&n.u--}),this.u<0&&(this.u=0),0==this.u&&sl(this)&&mh(sl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),cl(this,this.h.then(function(){e.l||H(e.s,t)&&t(al(e))}))},t.removeAuthTokenListener=function(e){W(this.s,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Wh("local"),t.a,this.ja),this.b&&(Cc(this.b,this),Fc(this.b.b)),Promise.resolve()},t.hc=function(t){return cl(this,Qa(this.a,ma,{identifier:t,continueUri:Ir()?tr():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Bc=function(t){return!!Eo(t)},t.wb=function(e,n){var r=this;return cl(this,_e().then(function(){var t=new _i(n);if(!t.c)throw new E("argument-error",Ei+" must be true when sending sign in link to email");return Pi(t)}).then(function(t){return r.a.wb(e,t)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return cl(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return cl(this,this.a.Ra(t).then(function(t){return new Jr(t)}))},t.jb=function(t){return cl(this,this.a.jb(t).then(function(){}))},t.vb=function(e,t){var n=this;return cl(this,_e().then(function(){return void 0===t||ct(t)?{}:Pi(new _i(t))}).then(function(t){return n.a.vb(e,t)}).then(function(){}))},t.Wc=function(t,e){return cl(this,Hc(this,t,e,m(this.$a,this)))},t.Vc=function(n,r){var i=this;return cl(this,_e().then(function(){var t=r||tr(),e=Io(n,t);if(!(t=Eo(t)))throw new E("argument-error","Invalid email link!");if(t.tenantId!==i.T())throw new E("tenant-id-mismatch");return i.$a(e)}))},hl.prototype.render=function(){},hl.prototype.reset=function(){},hl.prototype.getResponse=function(){},hl.prototype.execute=function(){};var fl=null;function pl(t,e){return(e=dl(e))&&t.a[e]||null}function dl(t){return(t=void 0===t?1e12:t)?t.toString():null}function vl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ze(this.f,"click",this.i)}function yl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function gl(){}function ml(){}ll.prototype.render=function(t,e){return this.a[this.b.toString()]=new vl(t,e),this.b++},ll.prototype.reset=function(t){var e=pl(this,t);t=dl(t),e&&t&&(e.delete(),delete this.a[t])},ll.prototype.getResponse=function(t){return(t=pl(this,t))?t.getResponse():null},ll.prototype.execute=function(t){(t=pl(this,t))&&t.execute()},vl.prototype.getResponse=function(){return yl(this),this.b},vl.prototype.execute=function(){yl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},vl.prototype.delete=function(){yl(this),this.g=!0,clearTimeout(this.a),this.a=null,nn(this.f,"click",this.i)},Vr(gl,"FACTOR_ID","phone"),ml.prototype.g=function(){return _e(fl=fl||new ll)},ml.prototype.c=function(){};var bl=null;function _l(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var wl=new dt(mt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Il=new Or(3e4,6e4);_l.prototype.g=function(i){var o=this;return new pe(function(t,e){var r=setTimeout(function(){e(new E("network-request-failed"))},Il.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new E("internal-error"))),delete l[o.a]},_e(Ds(It(wl,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},_l.prototype.c=function(){this.b--};var El=null;function Tl(t,e,n,r,i,o,s){if(Vr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s=s?bl=bl||new ml:El=El||new _l,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Nl])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Al],!l.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new qs(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[Sl];this.a[Sl]=function(t){var e;kl(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=br(u,l))&&e(t)};var c=this.a[Cl];this.a[Cl]=function(){var t;kl(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=br(c,l))&&t()}}var Sl="callback",Cl="expired-callback",Nl="sitekey",Al="size";function kl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Pl(t,e){return t.h.push(e),e.oa(function(){G(t.h,e)}),e}function Ol(t){if(t.D)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function Rl(t,e,n){var r=!1;try{this.b=n||Jl.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Jl.SDK_VERSION?gr(Jl.SDK_VERSION,o):null,Tl.call(this,n,t,e,function(){try{var e=i.b.auth().la()}catch(t){e=null}return e},o,k(S),r)}function xl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Dl.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=Dl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=Tl.prototype).Ia=function(){var e=this;return this.f||(this.f=Pl(this,_e().then(function(){if(Ir()&&!hr())return ar();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(t){return e.g=t,Qa(e.s,Oa,{})}).then(function(t){e.a[Nl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t})))},t.render=function(){Ol(this);var n=this;return Pl(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.v,n.i||(t=ee(e),e=se("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Ol(this);var i=this;return Pl(this,this.render().then(function(e){return new pe(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,W(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Ol(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ol(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ee(this.v);for(;t=e.firstChild;)e.removeChild(t)}},w(Rl,Tl);var Dl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ll(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Ml(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function jl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:y}}function Fl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Ul(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Vl(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ka||!e)}}}function ql(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}}function Bl(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function zl(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Hl(t){return y(t)&&"string"==typeof t.uid}function Gl(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Wl(e,n,t,r){return{name:t||"",K:e.K+" or "+n.K,optional:!!r,M:function(t){return e.M(t)||n.M(t)}}}function Kl(t,e){for(var n in e){var r=e[n].name;t[r]=Xl(r,t[n],e[n].j)}}function Ql(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){xl(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Yl(t,e,n,r){t[e]=Xl(e,n,r)}function Xl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return xl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Kl(Jh.prototype,{jb:{name:"applyActionCode",j:[Ll("code")]},Ra:{name:"checkActionCode",j:[Ll("code")]},nb:{name:"confirmPasswordReset",j:[Ll("code"),Ll("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Ll("email"),Ll("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Ll("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Ll("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Wl(jl(),Fl(),"nextOrObserver"),Fl("opt_error",!0),Fl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Wl(jl(),Fl(),"nextOrObserver"),Fl("opt_error",!0),Fl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Ll("email"),Wl(jl("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Ll("email"),jl("actionCodeSettings")]},xb:{name:"setPersistence",j:[Ll("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Vl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Vl()]},Tc:{name:"signInWithCustomToken",j:[Ll("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Ll("email"),Ll("password")]},Vc:{name:"signInWithEmailLink",j:[Ll("email"),Ll("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Ll("phoneNumber"),Gl()]},Xc:{name:"signInWithPopup",j:[Bl()]},Yc:{name:"signInWithRedirect",j:[Bl()]},dd:{name:"updateCurrentUser",j:[Wl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof lh)}},Ul(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ll(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Ll("url"),jl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Ll("code")]}}),Ql(Jh.prototype,{lc:{name:"languageCode",kb:Wl(Ll(),Ul(),"languageCode")},ti:{name:"tenantId",kb:Wl(Ll(),Ul(),"tenantId")}}),(Jh.Persistence=Hu).LOCAL="local",Jh.Persistence.SESSION="session",Jh.Persistence.NONE="none",Kl(lh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Ml("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ml("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Vl()]},qb:{name:"linkWithCredential",j:[Vl()]},Dc:{name:"linkWithPhoneNumber",j:[Ll("phoneNumber"),Gl()]},Ec:{name:"linkWithPopup",j:[Bl()]},Fc:{name:"linkWithRedirect",j:[Bl()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Vl()]},tb:{name:"reauthenticateWithCredential",j:[Vl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Ll("phoneNumber"),Gl()]},Nc:{name:"reauthenticateWithPopup",j:[Bl()]},Oc:{name:"reauthenticateWithRedirect",j:[Bl()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Wl(jl("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ll(null,!0)]},cd:{name:"unlink",j:[Ll("provider")]},Bb:{name:"updateEmail",j:[Ll("email")]},Cb:{name:"updatePassword",j:[Ll("password")]},ed:{name:"updatePhoneNumber",j:[Vl("phone")]},Db:{name:"updateProfile",j:[jl("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Ll("email"),Wl(jl("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]}}),Kl(ll.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kl(hl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kl(pe.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Ql(Bc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Ml("appVerificationDisabledForTesting")}}),Kl(zc.prototype,{confirm:{name:"confirm",j:[Ll("verificationCode")]}}),Yl(Zi,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[so,_o,So,ro],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Wl(Ll(),jl(),"json")]),Yl(wo,"credential",function(t,e){return new bo(t,e)},[Ll("email"),Ll("password")]),Kl(bo.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(ho.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},Ka:{name:"setCustomParameters",j:[jl("customOAuthParameters")]}}),Yl(ho,"credential",lo,[Wl(Ll(),jl(),"token")]),Yl(wo,"credentialWithLink",Io,[Ll("email"),Ll("emailLink")]),Kl(fo.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},Ka:{name:"setCustomParameters",j:[jl("customOAuthParameters")]}}),Yl(fo,"credential",po,[Wl(Ll(),jl(),"token")]),Kl(vo.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},Ka:{name:"setCustomParameters",j:[jl("customOAuthParameters")]}}),Yl(vo,"credential",yo,[Wl(Ll(),Wl(jl(),Ul()),"idToken"),Wl(Ll(),Ul(),"accessToken",!0)]),Kl(go.prototype,{Ka:{name:"setCustomParameters",j:[jl("customOAuthParameters")]}}),Yl(go,"credential",mo,[Wl(Ll(),jl(),"token"),Ll("secret",!0)]),Kl(co.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},credential:{name:"credential",j:[Wl(Ll(),Wl(jl(),Ul()),"optionsOrIdToken"),Wl(Ll(),Ul(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[jl("customOAuthParameters")]}}),Kl(io.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(eo.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),Yl(No,"credential",Ao,[Ll("verificationId"),Ll("verificationCode")]),Kl(No.prototype,{fb:{name:"verifyPhoneNumber",j:[Wl(Ll(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?zl(t.session,Ji)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?zl(t.session,$i)&&Hl(t.multiFactorHint):t.session&&t.multiFactorUid?zl(t.session,$i)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Gl()]}}),Kl(To.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(E.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(jo.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(Mo.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(Yc.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(Wc.prototype,{Rc:{name:"resolveSignIn",j:[ql()]}}),Kl(eh.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[ql(),Ll("displayName",!0)]},bd:{name:"unenroll",j:[Wl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Hl},Ll(),"multiFactorInfoIdentifier")]}}),Kl(Rl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Yl(li,"parseLink",bi,[Ll("link")]),Yl(gl,"assertion",function(t){return new Zc(t)},[Vl("phone")]),function(){if(void 0===Jl||!Jl.INTERNAL||!Jl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:$r,VERIFY_AND_CHANGE_EMAIL:ti,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Jh,AuthCredential:Zi,Error:E};Yl(t,"EmailAuthProvider",wo,[]),Yl(t,"FacebookAuthProvider",ho,[]),Yl(t,"GithubAuthProvider",fo,[]),Yl(t,"GoogleAuthProvider",vo,[]),Yl(t,"TwitterAuthProvider",go,[]),Yl(t,"OAuthProvider",co,[Ll("providerId")]),Yl(t,"SAMLAuthProvider",uo,[Ll("providerId")]),Yl(t,"PhoneAuthProvider",No,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Jh)}}]),Yl(t,"RecaptchaVerifier",Rl,[Wl(Ll(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),jl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Jl.app.App)}}]),Yl(t,"ActionCodeURL",li,[]),Yl(t,"PhoneMultiFactorGenerator",gl,[]),Jl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Jh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Jl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.nc,t),addAuthTokenListener:m(t.cc,t),removeAuthTokenListener:m(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Jl.registerVersion("@firebase/auth","0.16.4"),Jl.INTERNAL.extendNamespace({User:lh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ps=(Os.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Po(e))},Os.prototype.get=function(t){t=this.domStorage_.getItem(this.prefixedName_(t));return null==t?null:ko(t)},Os.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Os.prototype.prefixedName_=function(t){return this.prefix_+t},Os.prototype.toString=function(){return this.domStorage_.toString()},Os);function Os(t){this.domStorage_=t,this.prefix_="firebase:"}var Rs=(xs.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},xs.prototype.get=function(t){return Ro(this.cache_,t)?this.cache_[t]:null},xs.prototype.remove=function(t){delete this.cache_[t]},xs);function xs(){this.cache_={},this.isInMemoryStorage=!0}function Ds(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,so(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new jo).update(e),t=t.digest(),uo.encodeByteArray(t)}function Ls(t,e){so(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Hs.logLevel=ss.VERBOSE,Ks=Hs.log.bind(Hs),e&&zs.set("logging_enabled",!0)):"function"==typeof t?Ks=t:(Ks=null,zs.remove("logging_enabled"))}function Ms(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Ws.apply(void 0,no([],eo(t)));Hs.error(n)}function js(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Fs(t,e){return t===e?0:t<e?-1:1}function Us(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Po(e))}function Vs(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var qs,Sn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ps(e)}}catch(t){}return new Rs},Bs=Sn("localStorage"),zs=Sn("sessionStorage"),Hs=new fs("@firebase/database"),Gs=(qs=1,function(){return qs++}),Ws=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Ws.apply(null,i):n+="object"==typeof i?Po(i):i,n+=" "}return n},Ks=null,Qs=!0,Ys=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===Qs&&(Qs=!1,null===Ks&&!0===zs.get("logging_enabled")&&Ls(!0)),Ks&&(t=Ws.apply(null,e),Ks(t))},Xs=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Ys.apply(void 0,no([n],eo(t)))}},Js=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Ws.apply(void 0,no([],eo(t)));throw Hs.error(n),new Error(n)},$s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Ws.apply(void 0,no([],eo(t)));Hs.warn(n)},Zs="[MIN_NAME]",ta="[MAX_NAME]",ea=function(t,e){if(t===e)return 0;if(t===Zs||e===ta)return-1;if(e===Zs||t===ta)return 1;var n=ha(t),r=ha(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},na=function(t){if("object"!=typeof t||null===t)return Po(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Po(n[i]),r+=":",r+=na(t[n[i]]);return r+="}"};function ra(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function ia(t){var e,n,r,i;so(!js(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);u+=c=1===c.length?"0"+c:c}return u.toLowerCase()}function oa(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var sa=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");n=new Error(t+" at "+e.path.toString()+": "+n);return n.code=t.toUpperCase(),n},aa=new RegExp("^-?(0*)\\d{1,10}$"),ua=-2147483648,ca=2147483647,ha=function(t){if(aa.test(t)){t=Number(t);if(ua<=t&&t<=ca)return t}return null},la=function(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw $s("Exception was thrown by user callback.",t),e},Math.floor(0))}},fa=32,pa=768,da=(va.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},va);function va(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}function ya(){return new da("")}function ga(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ma(t){return t.pieces_.length-t.pieceNum_}function ba(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new da(t.pieces_,e)}function _a(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function wa(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Ia(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new da(e,0)}function Ea(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof da)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)0<i[r].length&&n.push(i[r]);return new da(n,0)}function Ta(t){return t.pieceNum_>=t.pieces_.length}function Sa(t,e){var n=ga(t),r=ga(e);if(null===n)return e;if(n===r)return Sa(ba(t),ba(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ca(t,e){for(var n=wa(t,0),r=wa(e,0),i=0;i<n.length&&i<r.length;i++){var o=ea(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Na(t,e){if(ma(t)!==ma(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Aa(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ma(t)>ma(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var ka=function(t,e){this.errorPrefix_=e,this.parts_=wa(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Ko(this.parts_[n]);Pa(this)};function Pa(t){if(t.byteLength_>pa)throw new Error(t.errorPrefix_+"has a key path longer than "+pa+" bytes ("+t.byteLength_+").");if(t.parts_.length>fa)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fa+") or object contains a cycle "+Oa(t))}function Oa(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Ra=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xa="websocket",Da="long_polling",La=(Ma.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Ma.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(Ma.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Bs.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),Ma.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Ma.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},Ma);function Ma(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bs.get("host:"+t)||this._host}function ja(t,e,n){var r;if(so("string"==typeof e,"typeof type must == string"),so("object"==typeof n,"typeof params must == object"),e===xa)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Da)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}((e=t).host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=t.namespace);var i=[];return ra(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}function Fa(t){return"string"==typeof t&&0!==t.length&&!Ja.test(t)}function Ua(t){return"string"==typeof t&&0!==t.length&&!$a.test(t)}function Va(t){return null===t||"string"==typeof t||"number"==typeof t&&!js(t)||t&&"object"==typeof t&&Ro(t,".sv")}function qa(t,e,n,r,i){i&&void 0===n||tu(Ho(t,e,i),n,r)}function Ba(t,e,n,r,i){if(!i||void 0!==n){var o=Ho(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];ra(n,function(t,e){t=new da(t);if(tu(o,e,Ea(r,t)),".priority"===_a(t)&&!Va(e))throw new Error(o+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(t)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=wa(n=e[r]),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Fa(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ca);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&Aa(s,n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function za(t,e,n,r){if(!r||void 0!==n){if(js(n))throw new Error(Ho(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Va(n))throw new Error(Ho(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Ha(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ho(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Ga(t,e,n,r){if(!(r&&void 0===n||Fa(n)))throw new Error(Ho(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Wa(t,e,n,r){if(!(r&&void 0===n||Ua(n)))throw new Error(Ho(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Ka(t,e){if(".info"===ga(e))throw new Error(t+" failed = Can't modify data under /.info/")}var Qa,Ya=function(t,e){var n=Xa(t),r=n.namespace;"firebase.com"===n.domain&&Js(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Js("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");t="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new La(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new da(n.pathString)}},Xa=function(t){var e,n,r,i="",o="",s="",a="",u="",c=!0,h="https",l=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(h=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(a=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=to(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):$s("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===h||"wss"===h,l=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),s=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=s),"ns"in n&&(u=n.ns)),{host:i,port:l,domain:o,subdomain:s,secure:c,scheme:h,pathString:a,namespace:u}},Ja=/[\[\].#$\/\u0000-\u001F\u007F]/,$a=/[\[\].#$\u0000-\u001F\u007F]/,Za=10485760,tu=function(r,t,e){var i=e instanceof da?new ka(e,r):e;if(void 0===t)throw new Error(r+"contains undefined "+Oa(i));if("function"==typeof t)throw new Error(r+"contains a function "+Oa(i)+" with contents = "+t.toString());if(js(t))throw new Error(r+"contains "+t.toString()+" "+Oa(i));if("string"==typeof t&&t.length>Za/3&&Ko(t)>Za)throw new Error(r+"contains a string greater than "+Za+" utf8 bytes "+Oa(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var o=!1,s=!1;if(ra(t,function(t,e){if(".value"===t)o=!0;else if(".priority"!==t&&".sv"!==t&&(s=!0,!Fa(t)))throw new Error(r+" contains an invalid key ("+t+") "+Oa(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var n;n=t,0<(t=i).parts_.length&&(t.byteLength_+=1),t.parts_.push(n),t.byteLength_+=Ko(n),Pa(t),tu(r,e,i),e=(t=i).parts_.pop(),t.byteLength_-=Ko(e),0<t.parts_.length&&--t.byteLength_}),o&&s)throw new Error(r+' contains ".value" child '+Oa(i)+" in addition to actual children.")}},eu=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Fa(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&(r=(r=r)&&r.replace(/^\/*\.info(\/|$)/,"/"),!Ua(r)))throw new Error(Ho(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};function nu(t){return"number"==typeof t?"number:"+ia(t):"string:"+t}var ru,iu=function(t){var e;t.isLeafNode()?(e=t.val(),so("string"==typeof e||"number"==typeof e||"object"==typeof e&&Ro(e,".sv"),"Priority must be a string or number.")):so(t===Qa||t.isEmpty(),"priority of unexpected type."),so(t===Qa||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ou=(Object.defineProperty(su,"__childrenNodeConstructor",{get:function(){return ru},set:function(t){ru=t},enumerable:!1,configurable:!0}),su.prototype.isLeafNode=function(){return!0},su.prototype.getPriority=function(){return this.priorityNode_},su.prototype.updatePriority=function(t){return new su(this.value_,t)},su.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:su.__childrenNodeConstructor.EMPTY_NODE},su.prototype.getChild=function(t){return Ta(t)?this:".priority"===ga(t)?this.priorityNode_:su.__childrenNodeConstructor.EMPTY_NODE},su.prototype.hasChild=function(){return!1},su.prototype.getPredecessorChildName=function(t,e){return null},su.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:su.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},su.prototype.updateChild=function(t,e){var n=ga(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(so(".priority"!==n||1===ma(t),".priority must be the last token in a path"),this.updateImmediateChild(n,su.__childrenNodeConstructor.EMPTY_NODE.updateChild(ba(t),e)))},su.prototype.isEmpty=function(){return!1},su.prototype.numChildren=function(){return 0},su.prototype.forEachChild=function(t,e){return!1},su.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},su.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+nu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?ia(this.value_):this.value_,this.lazyHash_=Ds(t)),this.lazyHash_},su.prototype.getValue=function(){return this.value_},su.prototype.compareTo=function(t){return t===su.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof su.__childrenNodeConstructor?-1:(so(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},su.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=su.VALUE_TYPE_ORDER.indexOf(e),i=su.VALUE_TYPE_ORDER.indexOf(n);return so(0<=r,"Unknown leaf type: "+e),so(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},su.prototype.withIndex=function(){return this},su.prototype.isIndexed=function(){return!0},su.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},su.VALUE_TYPE_ORDER=["object","boolean","number","string"],su);function su(t,e){void 0===e&&(e=su.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,so(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),iu(this.priorityNode_)}var au=(uu.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},uu.prototype.hasNext=function(){return 0<this.nodeStack_.length},uu.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},uu);function uu(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var cu=(hu.prototype.copy=function(t,e,n,r,i){return new hu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},hu.prototype.count=function(){return this.left.count()+1+this.right.count()},hu.prototype.isEmpty=function(){return!1},hu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},hu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},hu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},hu.prototype.minKey=function(){return this.min_().key},hu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},hu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},hu.prototype.removeMin_=function(){if(this.left.isEmpty())return fu.EMPTY_NODE;var t=this;return(t=(t=!t.left.isRed_()&&!t.left.left.isRed_()?t.moveRedLeft_():t).copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},hu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=!(r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_())?r.moveRedLeft_():r).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=!((r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_())?r.moveRedRight_():r).key)){if(r.right.isEmpty())return fu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},hu.prototype.isRed_=function(){return this.color},hu.prototype.fixUp_=function(){var t=this;return t=(t=(t=t.right.isRed_()&&!t.left.isRed_()?t.rotateLeft_():t).left.isRed_()&&t.left.left.isRed_()?t.rotateRight_():t).left.isRed_()&&t.right.isRed_()?t.colorFlip_():t},hu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t=t.right.left.isRed_()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_():t},hu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t=t.left.left.isRed_()?(t=t.rotateRight_()).colorFlip_():t},hu.prototype.rotateLeft_=function(){var t=this.copy(null,null,hu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},hu.prototype.rotateRight_=function(){var t=this.copy(null,null,hu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},hu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},hu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},hu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},hu.RED=!0,hu.BLACK=!1,hu);function hu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:hu.RED,this.left=null!=r?r:fu.EMPTY_NODE,this.right=null!=i?i:fu.EMPTY_NODE}lu.prototype.copy=function(t,e,n,r,i){return this},lu.prototype.insert=function(t,e,n){return new cu(t,e,null)},lu.prototype.remove=function(t,e){return this},lu.prototype.count=function(){return 0},lu.prototype.isEmpty=function(){return!0},lu.prototype.inorderTraversal=function(t){return!1},lu.prototype.reverseTraversal=function(t){return!1},lu.prototype.minKey=function(){return null},lu.prototype.maxKey=function(){return null},lu.prototype.check_=function(){return 0},lu.prototype.isRed_=function(){return!1},K=lu;function lu(){}var fu=(pu.prototype.insert=function(t,e){return new pu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,cu.BLACK,null,null))},pu.prototype.remove=function(t){return new pu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,cu.BLACK,null,null))},pu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},pu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},pu.prototype.isEmpty=function(){return this.root_.isEmpty()},pu.prototype.count=function(){return this.root_.count()},pu.prototype.minKey=function(){return this.root_.minKey()},pu.prototype.maxKey=function(){return this.root_.maxKey()},pu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},pu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},pu.prototype.getIterator=function(t){return new au(this.root_,null,this.comparator_,!1,t)},pu.prototype.getIteratorFrom=function(t,e){return new au(this.root_,t,this.comparator_,!1,e)},pu.prototype.getReverseIteratorFrom=function(t,e){return new au(this.root_,t,this.comparator_,!0,e)},pu.prototype.getReverseIterator=function(t){return new au(this.root_,null,this.comparator_,!0,t)},pu.EMPTY_NODE=new K,pu);function pu(t,e){void 0===e&&(e=pu.EMPTY_NODE),this.comparator_=t,this.root_=e}var du=(vu.Wrap=function(t,e){return new vu(t,e)},vu);function vu(t,e){this.name=t,this.node=e}var yu,gu,mu,bu=(_u.prototype.getCompare=function(){return this.compare.bind(this)},_u.prototype.indexedValueChanged=function(t,e){t=new du(Zs,t),e=new du(Zs,e);return 0!==this.compare(t,e)},_u.prototype.minPost=function(){return du.MIN},_u);function _u(){}function wu(){return null!==mu&&mu.apply(this,arguments)||this}var Iu,Eu,Tu=new(Xi(wu,mu=bu),wu.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),r=n.compareTo(r);return 0===r?ea(t.name,e.name):r},wu.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},wu.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},wu.prototype.minPost=function(){return du.MIN},wu.prototype.maxPost=function(){return new du(ta,new ou("[PRIORITY-POST]",gu))},wu.prototype.makePost=function(t,e){t=yu(t);return new du(e,new ou("[PRIORITY-POST]",t))},wu.prototype.toString=function(){return".priority"},wu),W=(Xi(Su,Eu=bu),Object.defineProperty(Su,"__EMPTY_NODE",{get:function(){return Iu},set:function(t){Iu=t},enumerable:!1,configurable:!0}),Su.prototype.compare=function(t,e){return ea(t.name,e.name)},Su.prototype.isDefinedOn=function(t){throw ao("KeyIndex.isDefinedOn not expected to be called.")},Su.prototype.indexedValueChanged=function(t,e){return!1},Su.prototype.minPost=function(){return du.MIN},Su.prototype.maxPost=function(){return new du(ta,Iu)},Su.prototype.makePost=function(t,e){return so("string"==typeof t,"KeyIndex indexValue must always be a string."),new du(t,Iu)},Su.prototype.toString=function(){return".key"},Su);function Su(){return null!==Eu&&Eu.apply(this,arguments)||this}var Cu=new W,Nu=Math.log(2),Au=(ku.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},ku);function ku(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Nu,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Pu,Ou,Ru=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return r=c[t],i=h?h(r):r,new cu(i,r.node,cu.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new cu(i,r.node,cu.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t;t=l(1+n,r),r=c[n],n=h?h(r):r;o(new cu(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},s=0;s<t.count;++s){var a=t.nextBitIsOne(),u=Math.pow(2,t.count-(s+1));a?r(u,cu.BLACK):(r(u,cu.BLACK),r(u,cu.RED))}return n}(new Au(c.length));return new fu(e||t,n)},xu={},Du=(Object.defineProperty(Lu,"Default",{get:function(){return so(Tu,"ChildrenNode.ts has not been loaded"),Pu=Pu||new Lu({".priority":xu},{".priority":Tu})},enumerable:!1,configurable:!0}),Lu.prototype.get=function(t){var e=xo(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof fu?e:null},Lu.prototype.hasIndex=function(t){return Ro(this.indexSet_,t.toString())},Lu.prototype.addIndex=function(t,e){so(t!==Cu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(du.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Ru(r,t.getCompare()):xu;var a=t.toString(),u=Ji({},this.indexSet_);u[a]=t;e=Ji({},this.indexes_);return e[a]=n,new Lu(e,u)},Lu.prototype.addToIndexes=function(s,a){var u=this;return new Lu(Lo(this.indexes_,function(t,e){var n=xo(u.indexSet_,e);if(so(n,"Missing index implementation for "+e),t===xu){if(n.isDefinedOn(s.node)){for(var r=[],i=a.getIterator(du.Wrap),o=i.getNext();o;)o.name!==s.name&&r.push(o),o=i.getNext();return r.push(s),Ru(r,n.getCompare())}return xu}n=a.get(s.name);return(t=n?t.remove(new du(s.name,n)):t).insert(s,s.node)}),this.indexSet_)},Lu.prototype.removeFromIndexes=function(n,r){return new Lu(Lo(this.indexes_,function(t){if(t===xu)return t;var e=r.get(n.name);return e?t.remove(new du(n.name,e)):t}),this.indexSet_)},Lu);function Lu(t,e){this.indexes_=t,this.indexSet_=e}function Mu(t,e){return ea(t.name,e.name)}function ju(t,e){return ea(t,e)}var Fu,Uu=(Object.defineProperty(Vu,"EMPTY_NODE",{get:function(){return Ou=Ou||new Vu(new fu(ju),null,Du.Default)},enumerable:!1,configurable:!0}),Vu.prototype.isLeafNode=function(){return!1},Vu.prototype.getPriority=function(){return this.priorityNode_||Ou},Vu.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Vu(this.children_,t,this.indexMap_)},Vu.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();t=this.children_.get(t);return null===t?Ou:t},Vu.prototype.getChild=function(t){var e=ga(t);return null===e?this:this.getImmediateChild(e).getChild(ba(t))},Vu.prototype.hasChild=function(t){return null!==this.children_.get(t)},Vu.prototype.updateImmediateChild=function(t,e){if(so(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new du(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?Ou:this.priorityNode_;return new Vu(r,n,i)},Vu.prototype.updateChild=function(t,e){var n=ga(t);if(null===n)return e;so(".priority"!==ga(t)||1===ma(t),".priority must be the last token in a path");e=this.getImmediateChild(n).updateChild(ba(t),e);return this.updateImmediateChild(n,e)},Vu.prototype.isEmpty=function(){return this.children_.isEmpty()},Vu.prototype.numChildren=function(){return this.children_.count()},Vu.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Tu,function(t,e){r[t]=e.val(n),i++,s&&Vu.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Vu.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+nu(this.getPriority().val())+":"),this.forEachChild(Tu,function(t,e){e=e.hash();""!==e&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":Ds(n)),this.lazyHash_},Vu.prototype.getPredecessorChildName=function(t,e,n){n=this.resolveIndex_(n);if(n){e=n.getPredecessorKey(new du(t,e));return e?e.name:null}return this.children_.getPredecessorKey(t)},Vu.prototype.getFirstChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.minKey();return t&&t.name}return this.children_.minKey()},Vu.prototype.getFirstChild=function(t){t=this.getFirstChildName(t);return t?new du(t,this.children_.get(t)):null},Vu.prototype.getLastChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.maxKey();return t&&t.name}return this.children_.maxKey()},Vu.prototype.getLastChild=function(t){t=this.getLastChildName(t);return t?new du(t,this.children_.get(t)):null},Vu.prototype.forEachChild=function(t,e){t=this.resolveIndex_(t);return t?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Vu.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Vu.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,du.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Vu.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Vu.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,du.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Vu.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Bu?-1:0},Vu.prototype.withIndex=function(t){if(t===Cu||this.indexMap_.hasIndex(t))return this;t=this.indexMap_.addIndex(t,this.children_);return new Vu(this.children_,this.priorityNode_,t)},Vu.prototype.isIndexed=function(t){return t===Cu||this.indexMap_.hasIndex(t)},Vu.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(Tu),n=t.getIterator(Tu),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},Vu.prototype.resolveIndex_=function(t){return t===Cu?null:this.indexMap_.get(t.toString())},Vu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Vu);function Vu(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&iu(this.priorityNode_),this.children_.isEmpty()&&so(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function qu(){return Fu.call(this,new fu(ju),Uu.EMPTY_NODE,Du.Default)||this}var Bu=new(Xi(qu,Fu=Uu),qu.prototype.compareTo=function(t){return t===this?0:1},qu.prototype.equals=function(t){return t===this},qu.prototype.getPriority=function(){return this},qu.prototype.getImmediateChild=function(t){return Uu.EMPTY_NODE},qu.prototype.isEmpty=function(){return!1},qu);Object.defineProperties(du,{MIN:{value:new du(Zs,Uu.EMPTY_NODE)},MAX:{value:new du(ta,Bu)}}),W.__EMPTY_NODE=Uu.EMPTY_NODE,ou.__childrenNodeConstructor=Uu,Qa=Bu,gu=Bu;var zu,Hu=!0;function Gu(n,t){if(void 0===t&&(t=null),null===n)return Uu.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),so(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ou(n,Gu(t));if(n instanceof Array||!Hu){var r=Uu.EMPTY_NODE;return ra(n,function(t,e){Ro(n,t)&&"."!==t.substring(0,1)&&(!(e=Gu(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(Gu(t))}var i=[],o=!1;if(ra(n,function(t,e){"."!==t.substring(0,1)&&((e=Gu(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new du(t,e))))}),0===i.length)return Uu.EMPTY_NODE;var e=Ru(i,Mu,function(t){return t.name},ju);if(o){var s=Ru(i,Tu.getCompare());return new Uu(e,Gu(t),new Du({".priority":s},{".priority":Tu}))}return new Uu(e,Gu(t),Du.Default)}function Wu(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ku(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}yu=Gu,(Sn=zu=zu||{})[Sn.OVERWRITE=0]="OVERWRITE",Sn[Sn.MERGE=1]="MERGE",Sn[Sn.ACK_USER_WRITE=2]="ACK_USER_WRITE",Sn[Sn.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Yu,Xu=(Ju.prototype.operationForChild=function(t){if(Ta(this.path)){if(null!=this.affectedTree.value)return so(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new da(t));return new Ju(ya(),e,this.revert)}return so(ga(this.path)===t,"operationForChild called for unrelated child."),new Ju(ba(this.path),this.affectedTree,this.revert)},Ju);function Ju(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=zu.ACK_USER_WRITE,this.source=Wu()}var $u=(Zu.fromObject=function(t){var n=new Zu(null);return ra(t,function(t,e){n=n.set(new da(t),e)}),n},Zu.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Zu.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ya(),value:this.value};if(Ta(t))return null;var n=ga(t),r=this.children.get(n);if(null===r)return null;e=r.findRootMostMatchingPathAndValue(ba(t),e);return null==e?null:{path:Ea(new da(n),e.path),value:e.value}},Zu.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Zu.prototype.subtree=function(t){if(Ta(t))return this;var e=ga(t),e=this.children.get(e);return null!==e?e.subtree(ba(t)):new Zu(null)},Zu.prototype.set=function(t,e){if(Ta(t))return new Zu(e,this.children);var n=ga(t),e=(this.children.get(n)||new Zu(null)).set(ba(t),e),e=this.children.insert(n,e);return new Zu(this.value,e)},Zu.prototype.remove=function(t){if(Ta(t))return this.children.isEmpty()?new Zu(null):new Zu(null,this.children);var e=ga(t),n=this.children.get(e);if(n){n=n.remove(ba(t)),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n);return null===this.value&&t.isEmpty()?new Zu(null):new Zu(this.value,t)}return this},Zu.prototype.get=function(t){if(Ta(t))return this.value;var e=ga(t),e=this.children.get(e);return e?e.get(ba(t)):null},Zu.prototype.setTree=function(t,e){if(Ta(t))return e;var n=ga(t),t=(this.children.get(n)||new Zu(null)).setTree(ba(t),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new Zu(this.value,e)},Zu.prototype.fold=function(t){return this.fold_(ya(),t)},Zu.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(Ea(n,t),r)}),r(n,this.value,i)},Zu.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ya(),e)},Zu.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Ta(t))return null;var i=ga(t),r=this.children.get(i);return r?r.findOnPath_(ba(t),Ea(e,i),n):null},Zu.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ya(),e)},Zu.prototype.foreachOnPath_=function(t,e,n){if(Ta(t))return this;this.value&&n(e,this.value);var r=ga(t),i=this.children.get(r);return i?i.foreachOnPath_(ba(t),Ea(e,r),n):new Zu(null)},Zu.prototype.foreach=function(t){this.foreach_(ya(),t)},Zu.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(Ea(n,t),r)}),this.value&&r(n,this.value)},Zu.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Zu);function Zu(t,e){void 0===e&&(e=Yu=Yu||new fu(Fs)),this.value=t,this.children=e}var tc=(ec.prototype.operationForChild=function(t){return Ta(this.path)?new ec(this.source,ya()):new ec(this.source,ba(this.path))},ec);function ec(t,e){this.source=t,this.path=e,this.type=zu.LISTEN_COMPLETE}var nc=(rc.prototype.operationForChild=function(t){return Ta(this.path)?new rc(this.source,ya(),this.snap.getImmediateChild(t)):new rc(this.source,ba(this.path),this.snap)},rc);function rc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=zu.OVERWRITE}var ic=(oc.prototype.operationForChild=function(t){if(Ta(this.path)){var e=this.children.subtree(new da(t));return e.isEmpty()?null:e.value?new nc(this.source,ya(),e.value):new oc(this.source,ya(),e)}return so(ga(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new oc(this.source,ba(this.path),this.children)},oc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},oc);function oc(t,e,n){this.source=t,this.path=e,this.children=n,this.type=zu.MERGE}var sc=(ac.prototype.isFullyInitialized=function(){return this.fullyInitialized_},ac.prototype.isFiltered=function(){return this.filtered_},ac.prototype.isCompleteForPath=function(t){if(Ta(t))return this.isFullyInitialized()&&!this.filtered_;t=ga(t);return this.isCompleteForChild(t)},ac.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},ac.prototype.getNode=function(){return this.node_},ac);function ac(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var uc=(cc.prototype.updateEventSnap=function(t,e,n){return new cc(new sc(t,e,n),this.serverCache_)},cc.prototype.updateServerSnap=function(t,e,n){return new cc(this.eventCache_,new sc(t,e,n))},cc.prototype.getEventCache=function(){return this.eventCache_},cc.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},cc.prototype.getServerCache=function(){return this.serverCache_},cc.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},cc);function cc(t,e){this.eventCache_=t,this.serverCache_=e}function hc(t){return{type:"value",snapshotNode:t}}function lc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function fc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function pc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var dc=(vc.prototype.updateChild=function(t,e,n,r,i,o){so(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(fc(e,s)):so(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(lc(e,n)):o.trackChildChange(pc(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},vc.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Tu,function(t,e){n.hasChild(t)||i.trackChildChange(fc(t,e))}),n.isLeafNode()||n.forEachChild(Tu,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(pc(t,e,n)):i.trackChildChange(lc(t,e))})),n.withIndex(this.index_)},vc.prototype.updatePriority=function(t,e){return t.isEmpty()?Uu.EMPTY_NODE:t.updatePriority(e)},vc.prototype.filtersNodes=function(){return!1},vc.prototype.getIndexedFilter=function(){return this},vc.prototype.getIndex=function(){return this.index_},vc);function vc(t){this.index_=t}var yc=(gc.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;so("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),so(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,pc(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,fc(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,lc(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw ao("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,pc(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},gc.prototype.getChanges=function(){return Array.from(this.changeMap.values())},gc);function gc(){this.changeMap=new Map}function mc(){}var bc=new(mc.prototype.getCompleteChild=function(t){return null},mc.prototype.getChildAfterChild=function(t,e,n){return null},mc),_c=(wc.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);e=null!=this.optCompleteServerCache_?new sc(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,e)},wc.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),t=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===t.length?null:t[0]},wc);function wc(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var Ic=function(t,e){this.viewCache=t,this.changes=e},Ec=(Tc.prototype.assertIndexed=function(t){so(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),so(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Tc.prototype.applyOperation=function(t,e,n,r){var i=new yc;if(e.type===zu.OVERWRITE)var o=e,s=o.source.fromUser?this.applyUserOverwrite_(t,o.path,o.snap,n,r,i):(so(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered()&&!Ta(o.path),this.applyServerOverwrite_(t,o.path,o.snap,n,r,a,i));else if(e.type===zu.MERGE){o=e;s=o.source.fromUser?this.applyUserMerge_(t,o.path,o.children,n,r,i):(so(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,o.path,o.children,n,r,a,i))}else if(e.type===zu.ACK_USER_WRITE){var a=e;s=a.revert?this.revertUserWrite_(t,a.path,n,r,i):this.ackUserWrite_(t,a.path,a.affectedTree,n,r,i)}else{if(e.type!==zu.LISTEN_COMPLETE)throw ao("Unknown operation type: "+e.type);s=this.listenComplete_(t,e.path,n,i)}i=i.getChanges();return Tc.maybeAddValueEvent_(t,s,i),new Ic(s,i)},Tc.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(hc(e.getCompleteEventSnap())))},Tc.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=void 0,l=void 0;return h=Ta(e)?(so(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(s=(s=t.getCompleteServerSnap())instanceof Uu?s:Uu.EMPTY_NODE,s=n.calcCompleteEventChildren(s),this.filter_.updateFullNode(t.getEventCache().getNode(),s,i)):(a=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),a,i))):".priority"===(a=ga(e))?(so(1===ma(e),"Can't have a priority with additional path components"),u=o.getNode(),l=t.getServerCache().getNode(),null!=(c=n.calcEventCacheAfterServerOverwrite(e,u,l))?this.filter_.updatePriority(u,c):o.getNode()):(u=ba(e),c=void 0,null!=(c=o.isCompleteForChild(a)?(l=t.getServerCache().getNode(),null!=(l=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),l))?o.getNode().getImmediateChild(a).updateChild(u,l):o.getNode().getImmediateChild(a)):n.calcCompleteChild(a,t.getServerCache()))?this.filter_.updateChild(o.getNode(),a,c,u,r,i):o.getNode()),t.updateEventSnap(h,o.isFullyInitialized()||Ta(e),this.filter_.filtersNodes())},Tc.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(Ta(e))h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{o=ga(e);if(!a.isCompleteForPath(e)&&1<ma(e))return t;c=ba(e),n=a.getNode().getImmediateChild(o).updateChild(c,n);h=".priority"===o?u.updatePriority(a.getNode(),n):u.updateChild(a.getNode(),o,n,c,bc,null)}u=t.updateServerSnap(h,a.isFullyInitialized()||Ta(e),u.filtersNodes()),i=new _c(r,u,i);return this.generateEventCacheAfterServerEvent_(u,e,r,i,s)},Tc.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new _c(r,t,i);return Ta(e)?(a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(a,!0,this.filter_.filtersNodes())):".priority"===(s=ga(e))?(a=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered())):(r=ba(e),i=u.getNode().getImmediateChild(s),a=void 0,a=Ta(r)?n:null!=(e=c.getCompleteChild(s))?".priority"===_a(r)&&e.getChild(Ia(r)).isEmpty()?e:e.updateChild(r,n):Uu.EMPTY_NODE,i.equals(a)?t:(o=this.filter_.updateChild(u.getNode(),s,a,r,c,o),t.updateEventSnap(o,u.isFullyInitialized(),this.filter_.filtersNodes())))},Tc.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Tc.prototype.applyUserMerge_=function(n,r,t,i,o,s){var a=this,u=n;return t.foreach(function(t,e){t=Ea(r,t);Tc.cacheHasChild_(n,ga(t))&&(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),t.foreach(function(t,e){t=Ea(r,t);Tc.cacheHasChild_(n,ga(t))||(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),u},Tc.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},Tc.prototype.applyServerMerge_=function(r,t,e,i,o,s,a){var u=this;if(r.getServerCache().getNode().isEmpty()&&!r.getServerCache().isFullyInitialized())return r;var c=r,e=Ta(t)?e:new $u(null).setTree(t,e),h=r.getServerCache().getNode();return e.children.inorderTraversal(function(t,e){var n;h.hasChild(t)&&(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new da(t),e,i,o,s,a))}),e.children.inorderTraversal(function(t,e){var n=!r.getServerCache().isCompleteForChild(t)&&void 0===e.value;h.hasChild(t)||n||(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new da(t),e,i,o,s,a))}),c},Tc.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(Ta(r)&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(Ta(r)){var u=new $u(null);return a.getNode().forEachChild(Cu,function(t,e){u=u.set(new da(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=new $u(null);return e.foreach(function(t,e){var n=Ea(r,t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},Tc.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),i=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||Ta(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(i,e,n,bc,r)},Tc.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u=new _c(n,t,r),c=t.getEventCache().getNode(),r=void 0;return Ta(e)||".priority"===ga(e)?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),so(s instanceof Uu,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),r=this.filter_.updateFullNode(c,a,i)):(s=ga(e),(r=null!=(a=null==(a=n.calcCompleteChild(s,t.getServerCache()))&&t.getServerCache().isCompleteForChild(s)?c.getImmediateChild(s):a)?this.filter_.updateChild(c,s,a,ba(e),u,i):t.getEventCache().getNode().hasChild(s)?this.filter_.updateChild(c,s,Uu.EMPTY_NODE,ba(e),u,i):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(r=this.filter_.updateFullNode(r,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(ya()),t.updateEventSnap(r,o,this.filter_.filtersNodes())},Tc);function Tc(t){this.filter_=t}var Sc=function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()};function Cc(n,t,e,r){var i=[],o=[];return t.forEach(function(t){var e;"child_changed"===t.type&&n.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((e=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:e}))}),Nc(n,i,"child_removed",t,r,e),Nc(n,i,"child_added",t,r,e),Nc(n,i,"child_moved",o,r,e),Nc(n,i,"child_changed",t,r,e),Nc(n,i,"value",t,r,e),i}function Nc(o,s,e,t,a,u){t=t.filter(function(t){return t.type===e});t.sort(function(t,e){return function(t,e,n){if(null==e.childName||null==n.childName)throw ao("Should only compare child_ events.");e=new du(e.childName,e.snapshotNode),n=new du(n.childName,n.snapshotNode);return t.index_.compare(e,n)}(o,t,e)}),t.forEach(function(e){var t,n,r,i=(t=o,r=u,"value"===(n=e).type||"child_removed"===n.type||(n.prevName=r.getPredecessorChildName(n.childName,n.snapshotNode,t.index_)),n);a.forEach(function(t){t.respondsTo(e.type)&&s.push(t.createEvent(i,o.query_))})})}function Ac(t){if(t===""+ca)return"-";var e=ha(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?ta:(e=n[i],e=xc.charAt(xc.indexOf(e)+1),n[i]=e,n.slice(0,i+1).join(""))}function kc(t){if(t===""+ua)return Zs;var e=ha(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+ca:(delete n[n.length-1],n.join("")):(n[n.length-1]=xc.charAt(xc.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var Pc,Oc,Rc,xc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Dc=(Pc=0,Oc=[],function(t){var e=t===Pc;Pc=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=xc.charAt(t%64),t=Math.floor(t/64);so(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Oc[r];r--)Oc[r]=0;Oc[r]++}else for(r=0;r<12;r++)Oc[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=xc.charAt(Oc[r]);return so(20===i.length,"nextPushId: Length should be 20."),i});function Lc(){return null!==Rc&&Rc.apply(this,arguments)||this}var Mc,jc=new(Xi(Lc,Rc=bu),Lc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?ea(t.name,e.name):n},Lc.prototype.isDefinedOn=function(t){return!0},Lc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},Lc.prototype.minPost=function(){return du.MIN},Lc.prototype.maxPost=function(){return du.MAX},Lc.prototype.makePost=function(t,e){t=Gu(t);return new du(e,t)},Lc.prototype.toString=function(){return".value"},Lc),Fc=(Xi(Uc,Mc=bu),Uc.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},Uc.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},Uc.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),r=n.compareTo(r);return 0===r?ea(t.name,e.name):r},Uc.prototype.makePost=function(t,e){t=Gu(t),t=Uu.EMPTY_NODE.updateChild(this.indexPath_,t);return new du(e,t)},Uc.prototype.maxPost=function(){var t=Uu.EMPTY_NODE.updateChild(this.indexPath_,Bu);return new du(ta,t)},Uc.prototype.toString=function(){return wa(this.indexPath_,0).join("/")},Uc);function Uc(t){var e=Mc.call(this)||this;return e.indexPath_=t,so(!Ta(t)&&".priority"!==ga(t),"Can't create PathIndex with empty path or .priority key"),e}var Vc=(qc.prototype.getStartPost=function(){return this.startPost_},qc.prototype.getEndPost=function(){return this.endPost_},qc.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},qc.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new du(e,n))||(n=Uu.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},qc.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Uu.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(Uu.EMPTY_NODE),i=this;return e.forEachChild(Tu,function(t,e){i.matches(new du(t,e))||(r=r.updateImmediateChild(t,Uu.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},qc.prototype.updatePriority=function(t,e){return t},qc.prototype.filtersNodes=function(){return!0},qc.prototype.getIndexedFilter=function(){return this.indexedFilter_},qc.prototype.getIndex=function(){return this.index_},qc.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},qc.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},qc);function qc(t){this.indexedFilter_=new dc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=qc.getStartPost_(t),this.endPost_=qc.getEndPost_(t)}var Bc=(zc.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new du(e,n))||(n=Uu.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},zc.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Uu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Uu.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Uu.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();){s=i.getNext();(l=!l&&h(u,s)<=0?!0:l)&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,Uu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},zc.prototype.updatePriority=function(t,e){return t},zc.prototype.filtersNodes=function(){return!0},zc.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},zc.prototype.getIndex=function(){return this.index_},zc.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;so(a.numChildren()===this.limit_,"");var u=new du(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(pc(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(fc(e,l));l=a.updateImmediateChild(e,Uu.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(lc(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(fc(c.name,c.node)),i.trackChildChange(lc(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Uu.EMPTY_NODE)):t},zc);function zc(t){this.rangedFilter_=new Vc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Hc=(Gc.prototype.hasStart=function(){return this.startSet_},Gc.prototype.hasStartAfter=function(){return this.startAfterSet_},Gc.prototype.hasEndBefore=function(){return this.endBeforeSet_},Gc.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},Gc.prototype.getIndexStartValue=function(){return so(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Gc.prototype.getIndexStartName=function(){return so(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zs},Gc.prototype.hasEnd=function(){return this.endSet_},Gc.prototype.getIndexEndValue=function(){return so(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Gc.prototype.getIndexEndName=function(){return so(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ta},Gc.prototype.hasLimit=function(){return this.limitSet_},Gc.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Gc.prototype.getLimit=function(){return so(this.limitSet_,"Only valid if limit has been set"),this.limit_},Gc.prototype.getIndex=function(){return this.index_},Gc.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Gc.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Tu},Gc.prototype.copy=function(){var t=new Gc;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Gc);function Gc(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tu}function Wc(t,e,n){t=t.copy();return t.startSet_=!0,void 0===e&&(e=null),t.indexStartValue_=e,null!=n?(t.startNameSet_=!0,t.indexStartName_=n):(t.startNameSet_=!1,t.indexStartName_=""),t}function Kc(t,e,n){t=t.copy();return t.endSet_=!0,void 0===e&&(e=null),t.indexEndValue_=e,void 0!==n?(t.endNameSet_=!0,t.indexEndName_=n):(t.endNameSet_=!1,t.indexEndName_=""),t}function Qc(t,e){t=t.copy();return t.index_=e,t}function Yc(t){var e,n={};return t.isDefault()||(e=t.index_===Tu?"$priority":t.index_===jc?"$value":t.index_===Cu?"$key":(so(t.index_ instanceof Fc,"Unrecognized index type!"),t.index_.toString()),n.orderBy=Po(e),t.startSet_&&(n.startAt=Po(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Po(t.indexStartName_))),t.endSet_&&(n.endAt=Po(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Po(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var Xc,Jc=($c.prototype.getQuery=function(){return this.query_},$c.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},$c.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},$c.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!Ta(t)&&!e.getImmediateChild(ga(t)).isEmpty())?e.getChild(t):null},$c.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},$c.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},$c.prototype.removeEventRegistration=function(t,e){var n,r=[];if(e&&(so(null==t,"A cancel should cancel all event registrations."),n=this.query_.path,this.eventRegistrations_.forEach(function(t){t=t.createCancelEvent(e,n);t&&r.push(t)})),t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return r},$c.prototype.applyOperation=function(t,e,n){t.type===zu.MERGE&&null!==t.source.queryId&&(so(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),so(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,n=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(n.viewCache),so(n.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=n.viewCache,this.generateEventsForChanges_(n.changes,n.viewCache.getEventCache().getNode(),null)},$c.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Tu,function(t,e){n.push(lc(t,e))}),e.isFullyInitialized()&&n.push(hc(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},$c.prototype.generateEventsForChanges_=function(t,e,n){n=n?[n]:this.eventRegistrations_;return Cc(this.eventGenerator_,t,e,n)},$c);function $c(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new dc(n.getIndex()),i=(o=n).loadsAllData()?new dc(o.getIndex()):new(o.hasLimit()?Bc:Vc)(o);this.processor_=new Ec(i);var t=e.getServerCache(),n=e.getEventCache(),o=r.updateFullNode(Uu.EMPTY_NODE,t.getNode(),null),e=i.updateFullNode(Uu.EMPTY_NODE,n.getNode(),null),r=new sc(o,t.isFullyInitialized(),r.filtersNodes()),i=new sc(e,n.isFullyInitialized(),i.filtersNodes());this.viewCache_=new uc(i,r),this.eventGenerator_=new Sc(this.query_)}var Zc=function(){this.views=new Map};function th(t,e,n,r){var i,o,s=e.source.queryId;if(null!==s){var a=t.views.get(s);return so(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(e,n,r)}var u=[];try{for(var c=to(t.views.values()),h=c.next();!h.done;h=c.next())a=h.value,u=u.concat(a.applyOperation(e,n,r))}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function eh(t,e,n,r,i){var o=e.queryIdentifier(),t=t.views.get(o);if(t)return t;o=n.calcCompleteEventCache(i?r:null),t=!1,t=!!o||(o=r instanceof Uu?n.calcCompleteEventChildren(r):Uu.EMPTY_NODE,!1),i=new uc(new sc(o,t,!1),new sc(r,i,!1));return new Jc(e,i)}function nh(t,e,n,r){var i,o,s=e.queryIdentifier(),a=[],u=[],c=ah(t);if("default"===s)try{for(var h=to(t.views.entries()),l=h.next();!l.done;l=h.next()){var f=eo(l.value,2),p=f[0],d=f[1],u=u.concat(d.removeEventRegistration(n,r));d.isEmpty()&&(t.views.delete(p),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery()))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=t.views.get(s))&&(u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(t.views.delete(s),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery())));return c&&!ah(t)&&a.push((so(Xc,"Reference.ts has not been loaded"),new Xc(e.repo,e.path))),{removed:a,events:u}}function rh(t){var e,n,r=[];try{for(var i=to(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||r.push(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function ih(t,e){var n,r,i=null;try{for(var o=to(t.views.values()),s=o.next();!s.done;s=o.next())var a=s.value,i=i||a.getCompleteServerCache(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function oh(t,e){if(e.getQueryParams().loadsAllData())return uh(t);e=e.queryIdentifier();return t.views.get(e)}function sh(t,e){return null!=oh(t,e)}function ah(t){return null!=uh(t)}function uh(t){var e,n;try{for(var r=to(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var ch=(hh.empty=function(){return new hh(new $u(null))},hh);function hh(t){this.writeTree_=t}function lh(t,e,n){if(Ta(e))return new ch(new $u(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,r=Sa(i,e),o=o.updateChild(r,n);return new ch(t.writeTree_.set(i,o))}n=new $u(n),n=t.writeTree_.setTree(e,n);return new ch(n)}function fh(t,n,e){var r=t;return ra(e,function(t,e){r=lh(r,Ea(n,t),e)}),r}function ph(t,e){if(Ta(e))return ch.empty();e=t.writeTree_.setTree(e,new $u(null));return new ch(e)}function dh(t,e){return null!=vh(t,e)}function vh(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Sa(n.path,e)):null}function yh(t){var n=[],e=t.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Tu,function(t,e){n.push(new du(t,e))}):t.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new du(t,e.value))}),n}function gh(t,e){if(Ta(e))return t;var n=vh(t,e);return new ch(null!=n?new $u(n):t.writeTree_.subtree(e))}function mh(t){return t.writeTree_.isEmpty()}function bh(t,e){return function n(r,t,i){{if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(so(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(Ea(r,t),e,i)}),i=!i.getChild(r).isEmpty()&&null!==o?i.updateChild(Ea(r,".priority"),o):i}}(ya(),t.writeTree_,e)}var _h=(wh.prototype.childWrites=function(t){return new Ih(t,this)},wh.prototype.addOverwrite=function(t,e,n,r){so(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=lh(this.visibleWrites_,t,e)),this.lastWriteId_=n},wh.prototype.addMerge=function(t,e,n){so(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=fh(this.visibleWrites_,t,e),this.lastWriteId_=n},wh.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},wh.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});so(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:Aa(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=ph(this.visibleWrites_,r.path):ra(r.children,function(t){n.visibleWrites_=ph(n.visibleWrites_,Ea(r.path,t))}),!0)},wh.prototype.getCompleteWriteData=function(t){return vh(this.visibleWrites_,t)},wh.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=gh(this.visibleWrites_,e);if(!r&&mh(i))return t;if(r||null!=t||dh(i,ya()))return bh(wh.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(Aa(t.path,e)||Aa(e,t.path))},e),t||Uu.EMPTY_NODE);return null}i=vh(this.visibleWrites_,e);if(null!=i)return i;i=gh(this.visibleWrites_,e);return mh(i)?t:null!=t||dh(i,ya())?bh(i,t||Uu.EMPTY_NODE):null},wh.prototype.calcCompleteEventChildren=function(t,e){var n=Uu.EMPTY_NODE,r=vh(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Tu,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=gh(this.visibleWrites_,t);return e.forEachChild(Tu,function(t,e){e=bh(gh(i,new da(t)),e);n=n.updateImmediateChild(t,e)}),yh(i).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return yh(gh(this.visibleWrites_,t)).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},wh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){so(n||r,"Either existingEventSnap or existingServerSnap must exist");t=Ea(t,e);if(dh(this.visibleWrites_,t))return null;t=gh(this.visibleWrites_,t);return mh(t)?r.getChild(e):bh(t,r.getChild(e))},wh.prototype.calcCompleteChild=function(t,e,n){var r=Ea(t,e),t=vh(this.visibleWrites_,r);return null!=t?t:n.isCompleteForChild(e)?bh(gh(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},wh.prototype.shadowingWrite=function(t){return vh(this.visibleWrites_,t)},wh.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=gh(this.visibleWrites_,t),t=vh(a,ya());if(null!=t)s=t;else{if(null==e)return[];s=bh(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),l=h.getNext();l&&u.length<r;)0!==c(l,n)&&u.push(l),l=h.getNext();return u},wh.prototype.recordContainsPath_=function(t,e){if(t.snap)return Aa(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Aa(Ea(t.path,n),e))return!0;return!1},wh.prototype.resetTree_=function(){this.visibleWrites_=wh.layerTree_(this.allWrites_,wh.DefaultFilter_,ya()),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},wh.DefaultFilter_=function(t){return t.visible},wh.layerTree_=function(t,e,n){for(var r=ch.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)Aa(n,s)?r=lh(r,a=Sa(n,s),o.snap):Aa(s,n)&&(a=Sa(s,n),r=lh(r,ya(),o.snap.getChild(a)));else{if(!o.children)throw ao("WriteRecord should have .snap or .children");Aa(n,s)?r=fh(r,a=Sa(n,s),o.children):Aa(s,n)&&(Ta(a=Sa(s,n))?r=fh(r,ya(),o.children):(o=xo(o.children,ga(a)))&&(a=o.getChild(ba(a)),r=lh(r,ya(),a)))}}}return r},wh);function wh(){this.visibleWrites_=ch.empty(),this.allWrites_=[],this.lastWriteId_=-1}var Ih=(Eh.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},Eh.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},Eh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},Eh.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(Ea(this.treePath_,t))},Eh.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},Eh.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},Eh.prototype.child=function(t){return new Eh(Ea(this.treePath_,t),this.writeTree_)},Eh);function Eh(t,e){this.treePath_=t,this.writeTree_=e}var Th=1,Sh=function(t){this.listenProvider_=t,this.syncPointTree_=new $u(null),this.pendingWriteTree_=new _h,this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Ch(t,e,n,r,i){return t.pendingWriteTree_.addOverwrite(e,n,r,i),i?Rh(t,new nc(Wu(),e,n)):[]}function Nh(t,e,n){void 0===n&&(n=!1);var r=t.pendingWriteTree_.getWrite(e);if(t.pendingWriteTree_.removeWrite(e)){var i=new $u(null);return null!=r.snap?i=i.set(ya(),!0):ra(r.children,function(t){i=i.set(new da(t),!0)}),Rh(t,new Xu(r.path,i,n))}return[]}function Ah(t,e,n){return Rh(t,new nc(Ku(),e,n))}function kh(n,t,e,r){var i=t.path,o=n.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||sh(o,t))){var a=nh(o,t,e,r);0===o.views.size&&(n.syncPointTree_=n.syncPointTree_.remove(i));e=a.removed,s=a.events,o=-1!==e.findIndex(function(t){return t.getQueryParams().loadsAllData()}),a=n.syncPointTree_.findOnPath(i,function(t,e){return ah(e)});if(o&&!a){i=n.syncPointTree_.subtree(i);if(!i.isEmpty())for(var u=i.fold(function(t,e,n){if(e&&ah(e))return[uh(e)];var r=[];return e&&(r=rh(e)),ra(n,function(t,e){r=r.concat(e)}),r}),c=0;c<u.length;++c){var h=u[c],l=h.getQuery(),h=Dh(n,h);n.listenProvider_.startListening(Vh(l),Lh(n,l),h.hashFn,h.onComplete)}}!a&&0<e.length&&!r&&(o?n.listenProvider_.stopListening(Vh(t),null):e.forEach(function(t){var e=n.queryToTagMap.get(Mh(t));n.listenProvider_.stopListening(Vh(t),e)})),function(t,e){for(var n=0;n<e.length;++n){var r,i=e[n];i.getQueryParams().loadsAllData()||(r=Mh(i),i=t.queryToTagMap.get(r),t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i))}}(n,e)}return s}function Ph(t,e,n){var r=e.path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){t=Sa(t,r);i=i||ih(e,t),o=o||ah(e)});var s=t.syncPointTree_.get(r);s?(o=o||ah(s),i=i||ih(s,ya())):(s=new Zc,t.syncPointTree_=t.syncPointTree_.set(r,s)),null!=i?c=!0:(c=!1,i=Uu.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){e=ih(e,ya());e&&(i=i.updateImmediateChild(t,e))}));var a=sh(s,e);a||e.getQueryParams().loadsAllData()||(u=Mh(e),so(!t.queryToTagMap.has(u),"View does not exist, but we have a tag"),h=Th++,t.queryToTagMap.set(u,h),t.tagToQueryMap.set(h,u));var u,c,h,l=t.pendingWriteTree_.childWrites(r),h=(h=n,c=eh(u=s,n=e,l,i,c=c),u.views.has(n.queryIdentifier())||u.views.set(n.queryIdentifier(),c),c.addEventRegistration(h),c.getInitialEvents(h));return a||o||(s=oh(s,e),h=h.concat(function(t,e,n){var r=e.path,i=Lh(t,e),n=Dh(t,n),n=t.listenProvider_.startListening(Vh(e),i,n.hashFn,n.onComplete),r=t.syncPointTree_.subtree(r);if(i)so(!ah(r.value),"If we're adding a query, it shouldn't be shadowed");else for(var o=r.fold(function(t,e,n){if(!Ta(t)&&e&&ah(e))return[uh(e).getQuery()];var r=[];return e&&(r=r.concat(rh(e).map(function(t){return t.getQuery()}))),ra(n,function(t,e){r=r.concat(e)}),r}),s=0;s<o.length;++s){var a=o[s];t.listenProvider_.stopListening(Vh(a),Lh(t,a))}return n}(t,e,s))),h}function Oh(t,n,e){var r=t.pendingWriteTree_,t=t.syncPointTree_.findOnPath(n,function(t,e){t=ih(e,Sa(t,n));if(t)return t});return r.calcCompleteEventCache(n,t,e,!0)}function Rh(t,e){return function t(e,n,r,i){{if(Ta(e.path))return xh(e,n,r,i);var o=n.get(ya());null==r&&null!=o&&(r=ih(o,ya()));var s=[],a=ga(e.path),u=e.operationForChild(a),c=n.children.get(a);return c&&u&&(n=r?r.getImmediateChild(a):null,a=i.child(a),s=s.concat(t(u,c,n,a))),s=o?s.concat(th(o,e,i,r)):s}}(e,t.syncPointTree_,null,t.pendingWriteTree_.childWrites(ya()))}function xh(i,t,o,s){var e=t.get(ya());null==o&&null!=e&&(o=ih(e,ya()));var a=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=s.child(t),t=i.operationForChild(t);t&&(a=a.concat(xh(t,e,n,r)))}),a=e?a.concat(th(e,i,s,o)):a}function Dh(r,t){var i=t.getQuery(),o=Lh(r,i);return{hashFn:function(){return(t.getServerCache()||Uu.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return o?function(t,e,n){var r=jh(t,n);if(r){n=Fh(r),r=n.path,n=n.queryId,e=Sa(r,e);return Uh(t,r,new tc(Qu(n),e))}return[]}(r,i.path,o):(e=r,n=i.path,Rh(e,new tc(Ku(),n)));var e,n,t=sa(t,i);return kh(r,i,null,t)}}}function Lh(t,e){e=Mh(e);return t.queryToTagMap.get(e)}function Mh(t){return t.path.toString()+"$"+t.queryIdentifier()}function jh(t,e){return t.tagToQueryMap.get(e)}function Fh(t){var e=t.indexOf("$");return so(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new da(t.substr(0,e))}}function Uh(t,e,n){var r=t.syncPointTree_.get(e);return so(r,"Missing sync point for query tag that we're tracking"),th(r,n,t.pendingWriteTree_.childWrites(e),null)}function Vh(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var qh=(Bh.prototype.getImmediateChild=function(t){return new Bh(this.node_.getImmediateChild(t))},Bh.prototype.node=function(){return this.node_},Bh);function Bh(t){this.node_=t}var zh=(Hh.prototype.getImmediateChild=function(t){t=Ea(this.path_,t);return new Hh(this.syncTree_,t)},Hh.prototype.node=function(){return Oh(this.syncTree_,this.path_)},Hh);function Hh(t,e){this.syncTree_=t,this.path_=e}var Gh=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},Wh=function(t,e,n){return t&&"object"==typeof t?(so(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Kh(t[".sv"],e,n):"object"==typeof t[".sv"]?Qh(t[".sv"],e):void so(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Kh=function(t,e,n){if("timestamp"===t)return n.timestamp;so(!1,"Unexpected server value: "+t)},Qh=function(t,e,n){t.hasOwnProperty("increment")||so(!1,"Unexpected server value: "+JSON.stringify(t,null,2));t=t.increment;"number"!=typeof t&&so(!1,"Unexpected increment value: "+t);e=e.node();if(so(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode())return t;e=e.getValue();return"number"!=typeof e?t:e+t},Yh=function(t,e,n,r){return Jh(e,new zh(n,t),r)},Xh=function(t,e,n){return Jh(t,new qh(e),n)};function Jh(t,r,i){var e=t.getPriority().val(),n=Wh(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,e=Wh(o.getValue(),r,i);return e!==o.getValue()||n!==o.getPriority().val()?new ou(e,Gu(n)):t}var t=t,s=t;return n!==t.getPriority().val()&&(s=s.updatePriority(new ou(n))),t.forEachChild(Tu,function(t,e){var n=Jh(e,r.getImmediateChild(t),i);n!==e&&(s=s.updateImmediateChild(t,n))}),s}function $h(){return{value:null,children:new Map}}function Zh(t,e,n){var r;Ta(e)?(t.value=n,t.children.clear()):null!==t.value?t.value=t.value.updateChild(e,n):(r=ga(e),t.children.has(r)||t.children.set(r,$h()),Zh(t.children.get(r),e=ba(e),n))}function tl(t,n,r){var i;null!==t.value?r(n,t.value):(i=function(t,e){tl(e,new da(n.toString()+"/"+t),r)},t.children.forEach(function(t,e){i(e,t)}))}var el=(nl.prototype.getNode=function(t){return this.rootNode_.getChild(t)},nl.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},nl);function nl(){this.rootNode_=Uu.EMPTY_NODE}var rl=(il.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Ro(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},il.prototype.get=function(){return co(this.counters_)},il);function il(){this.counters_={}}var ol={},sl={};function al(t){t=t.toString();return ol[t]||(ol[t]=new rl),ol[t]}var ul=(cl.prototype.get=function(){var t=this.collection_.get(),n=Ji({},t);return this.last_&&ra(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},cl);function cl(t){this.collection_=t,this.last_=null}var hl=(ll.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;ra(t,function(t,e){0<e&&Ro(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),oa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},ll);function ll(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ul(t);t=1e4+2e4*Math.random();oa(this.reportStats_.bind(this),Math.floor(t))}var fl=function(){this.eventLists_=[],this.recursionDepth_=0};function pl(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Na(o,n.path)||(t.eventLists_.push(n),n=null),(n=null===n?{events:[],path:o}:n).events.push(i)}n&&t.eventLists_.push(n)}function dl(t,e,n){pl(t,n),yl(t,function(t){return Na(t,e)})}function vl(t,e,n){pl(t,n),yl(t,function(t){return Aa(t,e)||Aa(e,t)})}function yl(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(function(t){for(var e=0;e<t.events.length;e++){var n,r=t.events[e];null!==r&&(t.events[e]=null,n=r.getEventRunner(),Ks&&Ys("event: "+r.toString()),la(n))}}(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}gl.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=no([],eo(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},gl.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});t=this.getInitialEvent(t);t&&e.apply(n,t)},gl.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},gl.prototype.validateEventType_=function(e){so(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},K=gl;function gl(t){this.allowedEvents_=t,this.listeners_={},so(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var ml,bl=(Xi(_l,ml=K),_l.getInstance=function(){return new _l},_l.prototype.getInitialEvent=function(t){return so("visible"===t,"Unknown event type: "+t),[this.visible_]},_l);function _l(){var e,t,n=ml.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var wl,Il=(Xi(El,wl=K),El.getInstance=function(){return new El},El.prototype.getInitialEvent=function(t){return so("online"===t,"Unknown event type: "+t),[this.online_]},El.prototype.currentlyOnline=function(){return this.online_},El);function El(){var t=wl.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||vo()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Tl=(Sl.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Sl.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum];)if("break"===function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&la(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break},Sl);function Sl(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Cl="pLPCommand",Nl="pRTLPCB",Al=(kl.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Tl(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;s.isClosed_||(s.scriptTagHolder=new Pl(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=eo(t,5),r=n[0],i=n[1],o=n[2];n[3],n[4];if(s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=eo(t,2),r=n[0],n=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,n)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.hostname&&Ra.test(location.hostname)&&(t.r="f"),t=s.urlFn(t),s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},kl.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},kl.forceAllow=function(){kl.forceAllow_=!0},kl.forceDisallow=function(){kl.forceDisallow_=!0},kl.isAvailable=function(){return!!kl.forceAllow_||!(kl.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},kl.prototype.markConnectionHealthy=function(){},kl.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},kl.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},kl.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},kl.prototype.send=function(t){t=Po(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var t=function(t){t=ro(t);return uo.encodeByteArray(t,!0)}(t),e=Vs(t,1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},kl.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},kl.prototype.incrementIncomingBytes_=function(t){t=Po(t).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},kl);function kl(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xs(t),this.stats_=al(e),this.urlFn=function(t){return ja(e,Da,t)}}var Pl=(Ol.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ys("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Ol.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Ol.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Ol.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},Ol.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Ol.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);function r(){n.outstandingRequests.delete(e),n.newRequest_()}var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},Ol.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){Ys("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},Ol);function Ol(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Gs(),window[Cl+this.uniqueCallbackIdentifier]=t,window[Nl+this.uniqueCallbackIdentifier]=e,this.myIFrame=Ol.createIFrame_();var e="",i="<html><body>"+(e=this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)?'<script>document.domain="'+document.domain+'";<\/script>':e)+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){Ys("frame writing exception"),t.stack&&Ys(t.stack),Ys(t)}}var Rl="";function xl(t){Rl=t}var Dl=null;"undefined"!=typeof MozWebSocket?Dl=MozWebSocket:"undefined"!=typeof WebSocket&&(Dl=WebSocket);var Ll=(Ml.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.hostname&&Ra.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),ja(t,xa,r)},Ml.prototype.open=function(e,t){var n,r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bs.set("previous_websocket_failure",!0);try{mo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Dl(this.connURL,[],n))}catch(t){this.log_("Error instantiating WebSocket.");e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");t=t.message||t.data;t&&r.log_(t),r.onClosed_()}},Ml.prototype.start=function(){},Ml.forceDisallow=function(){Ml.forceDisallow_=!0},Ml.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&((t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)),!e&&null!==Dl&&!Ml.forceDisallow_},Ml.previouslyFailed=function(){return Bs.isInMemoryStorage||!0===Bs.get("previous_websocket_failure")},Ml.prototype.markConnectionHealthy=function(){Bs.remove("previous_websocket_failure")},Ml.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=ko(t),this.onMessage(t))},Ml.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Ml.prototype.extractFrameCount_=function(t){if(so(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Ml.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(t):null!==(t=this.extractFrameCount_(t))&&this.appendFrame_(t))},Ml.prototype.send=function(t){this.resetKeepAlive();t=Po(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=Vs(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},Ml.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Ml.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Ml.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Ml.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},Ml.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Ml.responsesRequiredToBeHealthy=2,Ml.healthyTimeout=3e4,Ml);function Ml(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xs(this.connId),this.stats_=al(e),this.connURL=Ml.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var jl=(Object.defineProperty(Fl,"ALL_TRANSPORTS",{get:function(){return[Al,Ll]},enumerable:!1,configurable:!0}),Fl.prototype.initTransports_=function(t){var e,n,r=Ll&&Ll.isAvailable(),i=r&&!Ll.previouslyFailed();if(t.webSocketOnly&&(r||$s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ll];else{var o=this.transports_=[];try{for(var s=to(Fl.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Fl.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Fl.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Fl);function Fl(t){this.initTransports_(t)}var Ul=(Vl.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=oa(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},Vl.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Vl.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},Vl.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},Vl.prototype.sendRequest=function(t){t={t:"d",d:t};this.sendData_(t)},Vl.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Vl.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},Vl.prototype.onSecondaryMessageReceived_=function(t){var e=Us("t",t),t=Us("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},Vl.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Vl.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Vl.prototype.onPrimaryMessageReceived_=function(t){var e=Us("t",t),t=Us("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},Vl.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Vl.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Vl.prototype.onControl_=function(t){var e=Us("t",t);if("d"in t){t=t.d;if("h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?Ms("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ms("Unknown control packet command: "+e)}},Vl.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&$s("Protocol version mismatch detected"),this.tryStartUpgrade_())},Vl.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Vl.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),oa(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},Vl.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},Vl.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oa(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},Vl.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Vl.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Vl.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Vl.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Vl.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Vl.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Vl.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Vl);function Vl(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xs("c:"+this.id+":"),this.transportManager_=new jl(e),this.log_("Connection created"),this.start_()}ql.prototype.put=function(t,e,n,r){},ql.prototype.merge=function(t,e,n,r){},ql.prototype.refreshAuthToken=function(t){},ql.prototype.onDisconnectPut=function(t,e,n){},ql.prototype.onDisconnectMerge=function(t,e,n){},ql.prototype.onDisconnectCancel=function(t,e){},ql.prototype.reportStats=function(t){},W=ql;function ql(){}var Bl,zl=1e3,Hl=3e5,Gl=(Xi(Wl,Bl=W),Wl.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(Po(e)),so(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},Wl.prototype.get=function(t){var n=this,r=new lo,i={p:t.path.toString(),q:t.queryObject()},e={action:"g",request:i,onComplete:function(t){var e=t.d;"ok"===t.s?(n.onDataUpdate_(i.p,e,!1,null),r.resolve(e)):r.reject(e)}};this.outstandingGets_.push(e),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=n.outstandingGets_[o];void 0!==t&&e===t&&(delete n.outstandingGets_[o],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),n.log_("get "+o+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),r.promise},Wl.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),so(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),so(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");n={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},Wl.prototype.sendGet_=function(e){var n=this,r=this.outstandingGets_[e];this.sendRequest("g",r.request,function(t){delete n.outstandingGets_[e],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),r.onComplete&&r.onComplete(t)})},Wl.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;Wl.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},Wl.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Ro(t,"w")&&(t=xo(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',e=e.path.toString(),$s("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},Wl.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},Wl.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){t=Oo(t).claims;return"object"==typeof t&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Wl.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=function(t){t=Oo(t).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(n=this.authToken_)?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},Wl.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),so(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},Wl.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);t={p:t};r&&(t.q=n,t.t=r),this.sendRequest("n",t)},Wl.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},Wl.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},Wl.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},Wl.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n};this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},Wl.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},Wl.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},Wl.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n};void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++;r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},Wl.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},Wl.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},Wl.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Po(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},Wl.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Ms("Unrecognized action received from server: "+Po(t)+"\nAre you using the latest client?")},Wl.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Wl.prototype.scheduleConnect_=function(t){var e=this;so(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},Wl.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},Wl.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=zl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Wl.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=zl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},Wl.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Wl.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){so(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?Ys("getToken() completed but was canceled"):(Ys("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Ul(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){$s(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(h.repoInfo_.nodeAdmin&&$s(t),c())}))},Wl.prototype.interrupt=function(t){Ys("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Wl.prototype.resume=function(t){Ys("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Do(this.interruptReasons_)&&(this.reconnectDelay_=zl,this.realtime_||this.scheduleConnect_(0))},Wl.prototype.handleTimestamp_=function(t){t-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},Wl.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Wl.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return na(t)}).join("$"):"default",e=this.removeListen_(t,e);e&&e.onComplete&&e.onComplete("permission_denied")},Wl.prototype.removeListen_=function(t,e){var n,r=new da(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},Wl.prototype.onAuthRevoked_=function(t,e){Ys("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},Wl.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},Wl.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=to(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,to(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},Wl.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Rl.replace(/\./g,"-")]=1,vo()?t["framework.cordova"]=1:go()&&(t["framework.reactnative"]=1),this.reportStats(t)},Wl.prototype.shouldReconnect_=function(){var t=Il.getInstance().currentlyOnline();return Do(this.interruptReasons_)&&t},Wl.nextPersistentConnectionId_=0,Wl.nextConnectionId_=0,Wl);function Wl(t,e,n,r,i,o,s){var a=Bl.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=Wl.nextPersistentConnectionId_++,a.log_=Xs("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingGets_=[],a.outstandingPutCount_=0,a.outstandingGetCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=zl,a.maxReconnectDelay_=Hl,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!mo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),bl.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&Il.getInstance().on("online",a.onOnline_,a),a}var Kl,Ql=(Xi(Yl,Kl=W),Yl.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Yl.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(so(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},Yl.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=Yl.getListenId_(t,n),a={};this.listens_[s]=a;t=Yc(t.getQueryParams());this.restRequest_(o+".json",t,function(t,e){null===(t=404===t?e=null:t)&&i.onDataUpdate_(o,e,!1,n),xo(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},Yl.prototype.unlisten=function(t,e){e=Yl.getListenId_(t,e);delete this.listens_[e]},Yl.prototype.get=function(t){var n=this,e=Yc(t.getQueryParams()),r=t.path.toString(),i=new lo;return this.restRequest_(r+".json",e,function(t,e){null===(t=404===t?e=null:t)?(n.onDataUpdate_(r,e,!1,null),i.resolve(e)):i.reject(new Error(e))}),i.promise},Yl.prototype.refreshAuthToken=function(t){},Yl.prototype.restRequest_=function(r,i,o){var s=this;(i=void 0===i?{}:i).format="export",this.authTokenProvider_.getToken(!1).then(function(t){t=t&&t.accessToken;t&&(i.auth=t);var e=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+r+"?ns="+s.repoInfo_.namespace+Mo(i);s.log_("Sending REST request for "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(o&&4===n.readyState){s.log_("REST Response for "+e+" received. status:",n.status,"response:",n.responseText);var t=null;if(200<=n.status&&n.status<300){try{t=ko(n.responseText)}catch(t){$s("Failed to parse JSON response for "+e+": "+n.responseText)}o(null,t)}else 401!==n.status&&404!==n.status&&$s("Got unsuccessful REST response for "+e+" Status: "+n.status),o(n.status);o=null}},n.open("GET",e,!0),n.send()})},Yl);function Yl(t,e,n){var r=Kl.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=Xs("p:rest:"),r.listens_={},r}var Xl=($l.prototype.val=function(){return zo("DataSnapshot.val",0,0,arguments.length),this.node_.val()},$l.prototype.exportVal=function(){return zo("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},$l.prototype.toJSON=function(){return zo("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},$l.prototype.exists=function(){return zo("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},$l.prototype.child=function(t){zo("DataSnapshot.child",0,1,arguments.length),t=String(t),Wa("DataSnapshot.child",1,t,!1);var e=new da(t),t=this.ref_.child(e);return new $l(this.node_.getChild(e),t,Tu)},$l.prototype.hasChild=function(t){zo("DataSnapshot.hasChild",1,1,arguments.length),Wa("DataSnapshot.hasChild",1,t,!1);t=new da(t);return!this.node_.getChild(t).isEmpty()},$l.prototype.getPriority=function(){return zo("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},$l.prototype.forEach=function(n){var r=this;return zo("DataSnapshot.forEach",1,1,arguments.length),Go("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new $l(e,r.ref_.child(t),Tu))})},$l.prototype.hasChildren=function(){return zo("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty($l.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),$l.prototype.numChildren=function(){return zo("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},$l.prototype.getRef=function(){return zo("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty($l.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),$l);function $l(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Zl=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function tf(t,e){for(var n=e instanceof da?e:new da(e),r=t,i=ga(n);null!==i;)var o=xo(r.node.children,i)||{children:{},childCount:0},r=new Zl(i,r,o),i=ga(n=ba(n));return r}function ef(t){return t.node.value}function nf(t,e){t.node.value=e,af(t)}function rf(t){return 0<t.node.childCount}function of(n,r){ra(n.node.children,function(t,e){r(new Zl(t,n,e))})}function sf(t){return new da(null===t.parent?t.name:sf(t.parent)+"/"+t.name)}function af(t){var e,n,r,i;null!==t.parent&&(e=t.parent,n=t.name,i=function(t){return void 0===ef(t)&&!rf(t)}(r=t),t=Ro(e.node.children,n),i&&t?(delete e.node.children[n],e.node.childCount--,af(e)):i||t||(e.node.children[n]=r.node,e.node.childCount++,af(e)))}var uf="repo_interrupt",cf=25,hf=(lf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},lf);function lf(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$h(),this.transactionQueueTree_=new Zl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}function ff(s){if(s.stats_=al(s.repoInfo_),s.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))s.server_=new Ql(s.repoInfo_,function(t,e,n,r){vf(s,t,e,n,r)},s.authTokenProvider_),setTimeout(function(){return yf(s,!0)},0);else{var t=s.app.options.databaseAuthVariableOverride;if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Po(t)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}s.persistentConnection_=new Gl(s.repoInfo_,s.app.options.appId,function(t,e,n,r){vf(s,t,e,n,r)},function(t){yf(s,t)},function(t){var n;n=s,ra(t,function(t,e){gf(n,t,e)})},s.authTokenProvider_,t),s.server_=s.persistentConnection_}var e,n;s.authTokenProvider_.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),s.statsReporter_=(e=s.repoInfo_,n=function(){return new hl(s.stats_,s.server_)},e=e.toString(),sl[e]||(sl[e]=n()),sl[e]),s.infoData_=new el,s.infoSyncTree_=new Sh({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=Ah(s.infoSyncTree_,t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),gf(s,"connected",!1),s.serverSyncTree_=new Sh({startListening:function(n,t,e,r){return s.server_.listen(n,e,t,function(t,e){e=r(t,e);vl(s.eventQueue_,n.path,e)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}function pf(t){t=t.infoData_.getNode(new da(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function df(t){return Gh({timestamp:pf(t)})}function vf(t,e,n,r,i){t.dataUpdateCount++;var o=new da(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s,a,u,c=[],h=o;0<(c=i?r?(s=Lo(n,function(t){return Gu(t)}),function(t,e,n,r){var i=jh(t,r);if(i){r=Fh(i),i=r.path,r=r.queryId,e=Sa(i,e),n=$u.fromObject(n);return Uh(t,i,new ic(Qu(r),e,n))}return[]}(t.serverSyncTree_,o,s,i)):(e=Gu(n),s=t.serverSyncTree_,a=o,u=e,null==(i=jh(s,e=i))?[]:(e=Fh(i),i=e.path,e=e.queryId,a=Sa(i,a),Uh(s,i,new nc(Qu(e),a,u)))):r?(a=Lo(n,function(t){return Gu(t)}),u=t.serverSyncTree_,r=o,a=a,a=$u.fromObject(a),Rh(u,new ic(Ku(),r,a))):(n=Gu(n),Ah(t.serverSyncTree_,o,n))).length&&(h=Of(t,o)),vl(t.eventQueue_,h,c)}function yf(t,e){gf(t,"connected",e),!1===e&&function(n){Cf(n,"onDisconnectEvents");var r=df(n),i=$h();tl(n.onDisconnect_,ya(),function(t,e){e=Yh(t,e,n.serverSyncTree_,r);Zh(i,t,e)});var o=[];tl(i,ya(),function(t,e){o=o.concat(Ah(n.serverSyncTree_,t,e));t=Lf(n,t);Of(n,t)}),n.onDisconnect_=$h(),vl(n.eventQueue_,ya(),o)}(t)}function gf(t,e,n){e=new da("/.info/"+e),n=Gu(n);t.infoData_.updateSnapshot(e,n);n=Ah(t.infoSyncTree_,e,n);vl(t.eventQueue_,e,n)}function mf(t){return t.nextWriteId_++}function bf(n,r){var t=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){t=Sa(t,n);r=r||ih(e,t)});var i=t.syncPointTree_.get(n);i?r=r||ih(i,ya()):(i=new Zc,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new sc(r,!0,!1):null;return eh(i,e,t.pendingWriteTree_.childWrites(e.path),o?s.getNode():Uu.EMPTY_NODE,o).getCompleteNode()}(n.serverSyncTree_,r);return null!=t?Promise.resolve(new Xl(t,r.getRef(),r.getQueryParams().getIndex())):n.server_.get(r).then(function(t){var e=Gu(t),t=Ah(n.serverSyncTree_,r.path,e);return dl(n.eventQueue_,r.path,t),Promise.resolve(new Xl(e,r.getRef(),r.getQueryParams().getIndex()))},function(t){return Cf(n,"get for query "+Po(r)+" failed: "+t),Promise.reject(new Error(t))})}function _f(r,i,t,e,o){Cf(r,"set",{path:i.toString(),value:t,priority:e});var n=df(r),t=Gu(t,e),e=Oh(r.serverSyncTree_,i),n=Xh(t,e,n),s=mf(r),n=Ch(r.serverSyncTree_,i,n,s,!0);pl(r.eventQueue_,n),r.server_.put(i.toString(),t.val(!0),function(t,e){var n="ok"===t;n||$s("set at "+i+" failed: "+t);n=Nh(r.serverSyncTree_,s,!n);vl(r.eventQueue_,i,n),Nf(0,o,t,e)});t=Lf(r,i);Of(r,t),vl(r.eventQueue_,t,[])}function wf(i,o,t,s){Cf(i,"update",{path:o.toString(),value:t});var a,e,n,r,u,c=!0,h=df(i),l={};ra(t,function(t,e){c=!1,l[t]=Yh(Ea(o,t),Gu(e),i.serverSyncTree_,h)}),c?(Ys("update() called with empty data.  Don't do anything."),Nf(0,s,"ok",void 0)):(a=mf(i),e=i.serverSyncTree_,n=o,r=l,u=a,e.pendingWriteTree_.addMerge(n,r,u),r=$u.fromObject(r),r=Rh(e,new ic(Wu(),n,r)),pl(i.eventQueue_,r),i.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||$s("update at "+o+" failed: "+t);var r=Nh(i.serverSyncTree_,a,!n),n=0<r.length?Of(i,o):o;vl(i.eventQueue_,n,r),Nf(0,s,t,e)}),ra(t,function(t){t=Lf(i,Ea(o,t));Of(i,t)}),vl(i.eventQueue_,o,[]))}function If(n,r,i){n.server_.onDisconnectCancel(r.toString(),function(t,e){"ok"===t&&!function t(n,e){if(Ta(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;var r=n.value;return n.value=null,r.forEachChild(Tu,function(t,e){Zh(n,new da(t),e)}),t(n,e)}if(0<n.children.size)return r=ga(e),e=ba(e),n.children.has(r)&&t(n.children.get(r),e)&&n.children.delete(r),0===n.children.size;return!0}(n.onDisconnect_,r),Nf(0,i,t,e)})}function Ef(n,r,t,i){var o=Gu(t);n.server_.onDisconnectPut(r.toString(),o.val(!0),function(t,e){"ok"===t&&Zh(n.onDisconnect_,r,o),Nf(0,i,t,e)})}function Tf(t,e,n){n=".info"===ga(e.path)?Ph(t.infoSyncTree_,e,n):Ph(t.serverSyncTree_,e,n);dl(t.eventQueue_,e.path,n)}function Sf(t){t.persistentConnection_&&t.persistentConnection_.interrupt(uf)}function Cf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Ys.apply(void 0,no([r],eo(e)))}function Nf(t,n,r,i){n&&la(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})}function Af(t){return t.__database||(t.__database=new hp(t))}function kf(t,e,n){return Oh(t.serverSyncTree_,e,n)||Uu.EMPTY_NODE}function Pf(e,t){var n;(t=void 0===t?e.transactionQueueTree_:t)||Df(e,t),ef(t)?(n=xf(e,t),so(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(s,a,u){for(var t=u.map(function(t){return t.currentWriteId}),e=o=kf(s,a,t),t=o.hash(),n=0;n<u.length;n++){var r=u[n];so(0===r.status,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=1,r.retryCount++;var i=Sa(a,r.path);e=e.updateChild(i,r.currentOutputSnapshotRaw)}var o=e.val(!0),c=a;s.server_.put(c.toString(),o,function(t){Cf(s,"transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i=[],o=0;o<u.length;o++)u[o].status=2,e=e.concat(Nh(s.serverSyncTree_,u[o].currentWriteId)),u[o].onComplete&&(n=u[o].currentOutputSnapshotResolved,r=new tp(s,u[o].path),r=new Xl(n,r,Tu),i.push(u[o].onComplete.bind(null,null,!0,r))),u[o].unwatcher();Df(s,tf(s.transactionQueueTree_,a)),Pf(s,s.transactionQueueTree_),vl(s.eventQueue_,a,e);for(o=0;o<i.length;o++)la(i[o])}else{if("datastale"===t)for(o=0;o<u.length;o++)3===u[o].status?u[o].status=4:u[o].status=0;else{$s("transaction at "+c.toString()+" failed: "+t);for(o=0;o<u.length;o++)u[o].status=4,u[o].abortReason=t}Of(s,a)}},t)}(e,sf(t),n)):rf(t)&&of(t,function(t){Pf(e,t)})}function Of(t,e){var n=Rf(t,e),e=sf(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],o=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),s=0;s<e.length;s++){var a,u,c,h=e[s],l=Sa(n,h.path),f=!1,p=void 0;so(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status?(f=!0,p=h.abortReason,i=i.concat(Nh(t.serverSyncTree_,h.currentWriteId,!0))):0===h.status&&(i=h.retryCount>=cf?(f=!0,p="maxretry",i.concat(Nh(t.serverSyncTree_,h.currentWriteId,!0))):(a=kf(t,h.path,o),h.currentInputSnapshot=a,void 0!==(c=e[s].update(a.val()))?(tu("transaction failed: Data returned ",c,h.path),u=Gu(c),"object"==typeof c&&null!=c&&Ro(c,".priority")||(u=u.updatePriority(a.getPriority())),l=h.currentWriteId,c=df(t),c=Xh(u,a,c),h.currentOutputSnapshotRaw=u,h.currentOutputSnapshotResolved=c,h.currentWriteId=mf(t),o.splice(o.indexOf(l),1),(i=i.concat(Ch(t.serverSyncTree_,h.path,c,h.currentWriteId,h.applyLocally))).concat(Nh(t.serverSyncTree_,l,!0))):(f=!0,p="nodata",i.concat(Nh(t.serverSyncTree_,h.currentWriteId,!0))))),vl(t.eventQueue_,n,i),i=[],f&&(e[s].status=2,function(t){setTimeout(t,Math.floor(0))}(e[s].unwatcher),e[s].onComplete&&("nodata"===p?(h=new tp(t,e[s].path),f=e[s].currentInputSnapshot,h=new Xl(f,h,Tu),r.push(e[s].onComplete.bind(null,null,!1,h))):r.push(e[s].onComplete.bind(null,new Error(p),!1,null))))}for(Df(t,t.transactionQueueTree_),s=0;s<r.length;s++)la(r[s]);Pf(t,t.transactionQueueTree_)}}(t,xf(t,n),e),e}function Rf(t,e){for(var n=t.transactionQueueTree_,r=ga(e);null!==r&&void 0===ef(n);)n=tf(n,r),r=ga(e=ba(e));return n}function xf(t,e){var n=[];return function e(n,t,r){var i=ef(t);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);of(t,function(t){e(n,t,r)})}(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function Df(e,t){var n=ef(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,nf(t,0<n.length?n:void 0)}of(t,function(t){Df(e,t)})}function Lf(e,t){var n=sf(Rf(e,t)),t=tf(e.transactionQueueTree_,t);return function(t,e){for(var n=void 0?t:t.parent;null!==n;){if(e(n))return;n=n.parent}}(t,function(t){Mf(e,t)}),Mf(e,t),function e(t,n,r,i){r&&!i&&n(t),of(t,function(t){e(t,n,!0,i)}),r&&i&&n(t)}(t,function(t){Mf(e,t)}),n}function Mf(t,e){var n=ef(e);if(n){for(var r=[],i=[],o=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(so(o===s-1,"All SENT items should be at beginning of queue."),n[o=s].status=3,n[s].abortReason="set"):(so(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Nh(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?nf(e,void 0):n.length=o+1,vl(t.eventQueue_,sf(e),i);for(s=0;s<r.length;s++)la(r[s])}}var jf=(Ff.prototype.cancel=function(t){zo("OnDisconnect.cancel",0,1,arguments.length),Go("OnDisconnect.cancel",1,t,!0);var e=new lo;return If(this.repo_,this.path_,e.wrapCallback(t)),e.promise},Ff.prototype.remove=function(t){zo("OnDisconnect.remove",0,1,arguments.length),Ka("OnDisconnect.remove",this.path_),Go("OnDisconnect.remove",1,t,!0);var e=new lo;return Ef(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},Ff.prototype.set=function(t,e){zo("OnDisconnect.set",1,2,arguments.length),Ka("OnDisconnect.set",this.path_),qa("OnDisconnect.set",1,t,this.path_,!1),Go("OnDisconnect.set",2,e,!0);var n=new lo;return Ef(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},Ff.prototype.setWithPriority=function(t,e,n){zo("OnDisconnect.setWithPriority",2,3,arguments.length),Ka("OnDisconnect.setWithPriority",this.path_),qa("OnDisconnect.setWithPriority",1,t,this.path_,!1),za("OnDisconnect.setWithPriority",2,e,!1),Go("OnDisconnect.setWithPriority",3,n,!0);var r,i,o,s,a=new lo;return r=this.repo_,i=this.path_,t=t,e=e,o=a.wrapCallback(n),s=Gu(t,e),r.server_.onDisconnectPut(i.toString(),s.val(!0),function(t,e){"ok"===t&&Zh(r.onDisconnect_,i,s),Nf(0,o,t,e)}),a.promise},Ff.prototype.update=function(t,e){if(zo("OnDisconnect.update",1,2,arguments.length),Ka("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,$s("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ba("OnDisconnect.update",1,t,this.path_,!1),Go("OnDisconnect.update",2,e,!0);var i,o,s,a,u=new lo;return i=this.repo_,o=this.path_,s=t,a=u.wrapCallback(e),Do(s)?(Ys("onDisconnect().update() called with empty data.  Don't do anything."),Nf(0,a,"ok",void 0)):i.server_.onDisconnectMerge(o.toString(),s,function(t,e){"ok"===t&&ra(s,function(t,e){e=Gu(e);Zh(i.onDisconnect_,Ea(o,t),e)}),Nf(0,a,t,e)}),u.promise},Ff);function Ff(t,e){this.repo_=t,this.path_=e}var Uf=(Vf.prototype.toJSON=function(){return zo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},Vf);function Vf(t,e){this.committed=t,this.snapshot=e}var qf=(Bf.prototype.getPath=function(){var t=this.snapshot.getRef();return("value"===this.eventType?t:t.getParent()).path},Bf.prototype.getEventType=function(){return this.eventType},Bf.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Bf.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Po(this.snapshot.exportVal())},Bf);function Bf(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var zf=(Hf.prototype.getPath=function(){return this.path},Hf.prototype.getEventType=function(){return"cancel"},Hf.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Hf.prototype.toString=function(){return this.path.toString()+":cancel"},Hf);function Hf(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var Gf=(Wf.prototype.respondsTo=function(t){return"value"===t},Wf.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new qf("value",this,new Xl(t.snapshotNode,e.getRef(),n))},Wf.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){so(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},Wf.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new zf(this,t,e):null},Wf.prototype.matches=function(t){return t instanceof Wf&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},Wf.prototype.hasAnyCallback=function(){return null!==this.callback_},Wf);function Wf(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var Kf,Qf=(Yf.prototype.respondsTo=function(t){t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t;return Ro(this.callbacks_,t)},Yf.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new zf(this,t,e):null},Yf.prototype.createEvent=function(t,e){so(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),e=e.getQueryParams().getIndex();return new qf(t.type,this,new Xl(t.snapshotNode,n,e),t.prevName)},Yf.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){so(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Yf.prototype.matches=function(e){var n=this;if(e instanceof Yf){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});t=t[0],r=r[0];return!(r!==t||e.callbacks_[t]&&this.callbacks_[r]&&e.callbacks_[t]!==this.callbacks_[r])}}}return!1},Yf.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Yf);function Yf(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var Xf=(Object.defineProperty(Jf,"__referenceConstructor",{get:function(){return so(Kf,"Reference.ts has not been loaded"),Kf},set:function(t){Kf=t},enumerable:!1,configurable:!0}),Jf.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Cu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Zs)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==ta)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Tu){if(null!=e&&!Va(e)||null!=n&&!Va(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(so(t.getIndex()instanceof Fc||t.getIndex()===jc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},Jf.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},Jf.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},Jf.prototype.getQueryParams=function(){return this.queryParams_},Jf.prototype.getRef=function(){return zo("Query.ref",0,0,arguments.length),new Jf.__referenceConstructor(this.repo,this.path)},Jf.prototype.on=function(t,e,n,r){zo("Query.on",2,4,arguments.length),Ha("Query.on",1,t,!1),Go("Query.on",2,e,!1);n=Jf.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,n.cancel,n.context):((r={})[t]=e,this.onChildEvent(r,n.cancel,n.context)),e},Jf.prototype.onValueEvent=function(t,e,n){n=new Gf(t,e||null,n||null);Tf(this.repo,this,n)},Jf.prototype.onChildEvent=function(t,e,n){n=new Qf(t,e,n);Tf(this.repo,this,n)},Jf.prototype.off=function(t,e,n){zo("Query.off",0,3,arguments.length),Ha("Query.off",1,t,!0),Go("Query.off",2,e,!0),Wo("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Gf(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Qf(i,null,n||null)),i=this.repo,n=r,n=".info"===ga((r=this).path)?kh(i.infoSyncTree_,r,n):kh(i.serverSyncTree_,r,n),dl(i.eventQueue_,r.path,n)},Jf.prototype.get=function(){return bf(this.repo,this)},Jf.prototype.once=function(e,n,t,r){var i=this;zo("Query.once",1,4,arguments.length),Ha("Query.once",1,e,!1),Go("Query.once",2,n,!0);var o=Jf.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new lo;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},Jf.prototype.limitToFirst=function(t){if(zo("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Jf(this.repo,this.path,(e=this.queryParams_,t=t,(e=e.copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="l",e),this.orderByCalled_);var e},Jf.prototype.limitToLast=function(t){if(zo("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Jf(this.repo,this.path,(e=this.queryParams_,t=t,(e=e.copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="r",e),this.orderByCalled_);var e},Jf.prototype.orderByChild=function(t){if(zo("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Wa("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");t=new da(t);if(Ta(t))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");t=new Fc(t),t=Qc(this.queryParams_,t);return Jf.validateQueryEndpoints_(t),new Jf(this.repo,this.path,t,!0)},Jf.prototype.orderByKey=function(){zo("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=Qc(this.queryParams_,Cu);return Jf.validateQueryEndpoints_(t),new Jf(this.repo,this.path,t,!0)},Jf.prototype.orderByPriority=function(){zo("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=Qc(this.queryParams_,Tu);return Jf.validateQueryEndpoints_(t),new Jf(this.repo,this.path,t,!0)},Jf.prototype.orderByValue=function(){zo("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=Qc(this.queryParams_,jc);return Jf.validateQueryEndpoints_(t),new Jf(this.repo,this.path,t,!0)},Jf.prototype.startAt=function(t,e){void 0===t&&(t=null),zo("Query.startAt",0,2,arguments.length),qa("Query.startAt",1,t,this.path,!0),Ga("Query.startAt",2,e,!0);var n=Wc(this.queryParams_,t,e);if(Jf.validateLimit_(n),Jf.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new Jf(this.repo,this.path,n,this.orderByCalled_)},Jf.prototype.startAfter=function(t,e){void 0===t&&(t=null),zo("Query.startAfter",0,2,arguments.length),qa("Query.startAfter",1,t,this.path,!1),Ga("Query.startAfter",2,e,!0);var n,e=(n=this.queryParams_,t=t,e=e,(e=n.index_===Cu?Wc(n,t="string"==typeof t?Ac(t):t,e):Wc(n,t,null==e?ta:Ac(e))).startAfterSet_=!0,e);if(Jf.validateLimit_(e),Jf.validateQueryEndpoints_(e),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new Jf(this.repo,this.path,e,this.orderByCalled_)},Jf.prototype.endAt=function(t,e){void 0===t&&(t=null),zo("Query.endAt",0,2,arguments.length),qa("Query.endAt",1,t,this.path,!0),Ga("Query.endAt",2,e,!0);e=Kc(this.queryParams_,t,e);if(Jf.validateLimit_(e),Jf.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new Jf(this.repo,this.path,e,this.orderByCalled_)},Jf.prototype.endBefore=function(t,e){void 0===t&&(t=null),zo("Query.endBefore",0,2,arguments.length),qa("Query.endBefore",1,t,this.path,!1),Ga("Query.endBefore",2,e,!0);var n,e=(n=this.queryParams_,t=t,e=e,(e=n.index_===Cu?Kc(n,t="string"==typeof t?kc(t):t,e):Kc(n,t,null==e?Zs:kc(e))).endBeforeSet_=!0,e);if(Jf.validateLimit_(e),Jf.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new Jf(this.repo,this.path,e,this.orderByCalled_)},Jf.prototype.equalTo=function(t,e){if(zo("Query.equalTo",1,2,arguments.length),qa("Query.equalTo",1,t,this.path,!1),Ga("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},Jf.prototype.toString=function(){return zo("Query.toString",0,0,arguments.length),this.repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this.path)},Jf.prototype.toJSON=function(){return zo("Query.toJSON",0,1,arguments.length),this.toString()},Jf.prototype.queryObject=function(){return t=this.queryParams_,n={},t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_&&(n.l=t.limit_,""===(e=t.viewFrom_)&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e),t.index_!==Tu&&(n.i=t.index_.toString()),n;var t,e,n},Jf.prototype.queryIdentifier=function(){var t=this.queryObject(),t=na(t);return"{}"===t?"default":t},Jf.prototype.isEqual=function(t){if(zo("Query.isEqual",1,1,arguments.length),!(t instanceof Jf))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=Na(this.path,t.path),t=this.queryIdentifier()===t.queryIdentifier();return e&&n&&t},Jf.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Go(t,3,r.cancel,!0),r.context=n,Wo(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Ho(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Jf.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Jf);function Jf(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var $f,Zf,tp=(Xi(ep,$f=Xf),ep.prototype.getKey=function(){return zo("Reference.key",0,0,arguments.length),Ta(this.path)?null:_a(this.path)},ep.prototype.child=function(t){var e,n,r,i;return zo("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof da||(null===ga(this.path)?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),Wa(e,n,r,i)):Wa("Reference.child",1,t,!1)),new ep(this.repo,Ea(this.path,t))},ep.prototype.getParent=function(){zo("Reference.parent",0,0,arguments.length);var t=Ia(this.path);return null===t?null:new ep(this.repo,t)},ep.prototype.getRoot=function(){zo("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},ep.prototype.databaseProp=function(){return Af(this.repo)},ep.prototype.set=function(t,e){zo("Reference.set",1,2,arguments.length),Ka("Reference.set",this.path),qa("Reference.set",1,t,this.path,!1),Go("Reference.set",2,e,!0);var n=new lo;return _f(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},ep.prototype.update=function(t,e){if(zo("Reference.update",1,2,arguments.length),Ka("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,$s("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ba("Reference.update",1,t,this.path,!1),Go("Reference.update",2,e,!0);var i=new lo;return wf(this.repo,this.path,t,i.wrapCallback(e)),i.promise},ep.prototype.setWithPriority=function(t,e,n){if(zo("Reference.setWithPriority",2,3,arguments.length),Ka("Reference.setWithPriority",this.path),qa("Reference.setWithPriority",1,t,this.path,!1),za("Reference.setWithPriority",2,e,!1),Go("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new lo;return _f(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},ep.prototype.remove=function(t){return zo("Reference.remove",0,1,arguments.length),Ka("Reference.remove",this.path),Go("Reference.remove",1,t,!0),this.set(null,t)},ep.prototype.transaction=function(t,r,e){if(zo("Reference.transaction",1,3,arguments.length),Ka("Reference.transaction",this.path),Go("Reference.transaction",1,t,!1),Go("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Ho(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new lo;"function"==typeof r&&i.promise.catch(function(){});return function(t,e,n,r,i){function o(){}Cf(t,"transaction on "+e);var s=new tp(t,e);s.on("value",o);var a,u={path:e,update:n,onComplete:r,status:null,order:Gs(),applyLocally:i,retryCount:0,unwatcher:function(){s.off("value",o)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},n=kf(t,e,void 0);u.currentInputSnapshot=n,void 0===(r=u.update(n.val()))?(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&(a=new Xl(u.currentInputSnapshot,new tp(t,u.path),Tu),u.onComplete(null,!1,a))):(tu("transaction failed: Data returned ",r,u.path),u.status=0,(a=ef(i=tf(t.transactionQueueTree_,e))||[]).push(u),nf(i,a),i=void 0,"object"==typeof r&&null!==r&&Ro(r,".priority")?(i=xo(r,".priority"),so(Va(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(Oh(t.serverSyncTree_,e)||Uu.EMPTY_NODE).getPriority().val(),a=df(t),i=Gu(r,i),a=Xh(i,n,a),u.currentOutputSnapshotRaw=i,u.currentOutputSnapshotResolved=a,u.currentWriteId=mf(t),u=Ch(t.serverSyncTree_,e,a,u.currentWriteId,u.applyLocally),vl(t.eventQueue_,e,u),Pf(t,t.transactionQueueTree_))}(this.repo,this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new Uf(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},ep.prototype.setPriority=function(t,e){zo("Reference.setPriority",1,2,arguments.length),Ka("Reference.setPriority",this.path),za("Reference.setPriority",1,t,!1),Go("Reference.setPriority",2,e,!0);var n=new lo;return _f(this.repo,Ea(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},ep.prototype.push=function(t,e){zo("Reference.push",0,2,arguments.length),Ka("Reference.push",this.path),qa("Reference.push",1,t,this.path,!0),Go("Reference.push",2,e,!0);var n=pf(this.repo),r=Dc(n),n=this.child(r),i=this.child(r),t=null!=t?n.set(t,e).then(function(){return i}):Promise.resolve(i);return n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),"function"==typeof e&&t.catch(function(){}),n},ep.prototype.onDisconnect=function(){return Ka("Reference.onDisconnect",this.path),new jf(this.repo,this.path)},Object.defineProperty(ep.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(ep.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(ep.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(ep.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),ep);function ep(t,e){if(!(t instanceof hf))throw new Error("new Reference() no longer supported - use app.database().");return $f.call(this,t,e,new Hc,!1)||this}Xf.__referenceConstructor=tp,Zf=tp,so(!Xc,"__referenceConstructor has already been defined"),Xc=Zf;var np=(rp.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(Ys("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},rp.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},rp.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},rp.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$s(t)},rp);function rp(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var ip=(op.prototype.getToken=function(t){return Promise.resolve({accessToken:op.EMULATOR_AUTH_TOKEN})},op.prototype.addTokenChangeListener=function(t){t(op.EMULATOR_AUTH_TOKEN)},op.prototype.removeTokenChangeListener=function(t){},op.prototype.notifyForInvalidToken=function(){},op.EMULATOR_AUTH_TOKEN="owner",op);function op(){}var sp="FIREBASE_DATABASE_EMULATOR_HOST",ap={},up=!1;function cp(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||Js("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ys("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Ya(i,r),a=s.repoInfo,n=void 0;(n="undefined"!=typeof process?process.env[sp]:n)?(o=!0,i="http://"+n+"?ns="+a.namespace,a=(s=Ya(i,r)).repoInfo):o=!s.repoInfo.secure;e=r&&o?new ip:new np(t,e);return eu("Invalid Firebase Database URL",1,s),Ta(s.path)||Js("Database URL must point to the root of a Firebase Database (not including a child path)."),Af(function(t,e,n){var r=xo(ap,e.name);r||(r={},ap[e.name]=r);var i=xo(r,t.toURLString());i&&Js("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return i=new hf(t,up,e,n),r[t.toURLString()]=i}(a,t,e))}var hp=(Object.defineProperty(lp.prototype,"repo_",{get:function(){return this.instanceStarted_||(ff(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(lp.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new tp(this.repo_,ya())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(lp.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),lp.prototype.useEmulator=function(t,e){var n;this.checkDeleted_("useEmulator"),this.instanceStarted_?Js("Cannot call useEmulator() after instance has already been initialized."):(n=this.repoInternal_,t=t,e=e,n.repoInfo_=new La(t+":"+e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),n.repoInfo_.nodeAdmin&&(n.authTokenProvider_=new ip))},lp.prototype.ref=function(t){return this.checkDeleted_("ref"),zo("database.ref",0,1,arguments.length),t instanceof tp?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},lp.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),zo(e,1,1,arguments.length);var n=Ya(t,this.repo_.repoInfo_.nodeAdmin);eu(e,1,n);t=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||t.host===this.repo_.repoInfo_.host||Js(e+": Host name does not match the current database: (found "+t.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},lp.prototype.checkDeleted_=function(t){null===this.repoInternal_&&Js("Cannot call "+t+" on a deleted database.")},lp.prototype.goOffline=function(){zo("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),Sf(this.repo_)},lp.prototype.goOnline=function(){var t;zo("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),(t=this.repo_).persistentConnection_&&t.persistentConnection_.resume(uf)},lp.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},lp);function lp(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return $i(e,void 0,void 0,function(){return Zi(this,function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=xo(ap,e.app.name))&&xo(n,e.key)===e||Js("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),Sf(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof hf||Js("Don't call new Database() directly - please use firebase.database().")}var fp=Object.freeze({__proto__:null,forceLongPolling:function(){Ll.forceDisallow(),Al.forceAllow()},forceWebSockets:function(){Al.forceDisallow()},isWebSocketsAvailable:function(){return Ll.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){var i;t=t.repo,void 0===(e=e)&&(e=!1),"undefined"!=typeof console&&(t=e?(t.statsListener_||(t.statsListener_=new ul(t.stats_)),t.statsListener_.get()):t.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),ra(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},statsIncrementCounter:function(t,e){t=t.repo,e=e,t.stats_.incrementCounter(e),t=t.statsReporter_,e=e,t.statsToReport_[e]=!0},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){t=t.repo,e=e,t.interceptServerDataCallback_=e},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return xl(r),(r=new ns("auth-internal",new is("database-standalone"))).setComponent(new Zo("auth-internal",function(){return i},"PRIVATE")),{instance:cp(e,r,n,t),namespace:o}}}),Sn=Gl;Gl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Gl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var pp,dp=Object.freeze({__proto__:null,DataConnection:Sn,RealTimeConnection:Ul,hijackHash:function(i){var o=Gl.prototype.put;return Gl.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Gl.prototype.put=o}},ConnectionTarget:La,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){up=t}}),vp=hp.ServerValue;xl((pp=Jl).SDK_VERSION),pp.INTERNAL.registerComponent(new Zo("database",function(t,e){return cp(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),e,void 0)},"PUBLIC").setServiceProps({Reference:tp,Query:Xf,Database:hp,DataSnapshot:Xl,enableLogging:Ls,INTERNAL:fp,ServerValue:vp,TEST_ACCESS:dp}).setMultipleInstances(!0)),pp.registerVersion("@firebase/database","0.9.5");var yp=function(t,e){return(yp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function gp(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var bu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},mp={},bp=bu||self;function _p(){}function wp(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ip(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ep="closure_uid_"+(1e9*Math.random()>>>0),Tp=0;function Sp(t,e,n){return t.call.apply(t.bind,arguments)}function Cp(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function Np(t,e,n){return(Np=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Sp:Cp).apply(null,arguments)}function Ap(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function kp(){return Date.now()}function Pp(t,o){function e(){}e.prototype=o.prototype,t.X=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Kb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function Op(){this.j=this.j,this.i=this.i}Op.prototype.j=!1,Op.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Ep)&&t[Ep]||(t[Ep]=++Tp))},Op.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Rp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},xp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Dp(){return Array.prototype.concat.apply([],arguments)}function Lp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Mp(t){return/^[\s\xa0]*$/.test(t)}var jp,Fp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Up(t,e){return-1!=t.indexOf(e)}function Vp(t,e){return t<e?-1:e<t?1:0}t:{var qp=bp.navigator;if(qp){qp=qp.userAgent;if(qp){jp=qp;break t}}jp=""}function Bp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function zp(t){var e,n={};for(e in t)n[e]=t[e];return n}var Hp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gp(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Hp.length;i++)e=Hp[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Wp(t){return Wp[" "](t),t}Wp[" "]=_p;var Kp,Qp=Up(jp,"Opera"),Yp=Up(jp,"Trident")||Up(jp,"MSIE"),Xp=Up(jp,"Edge"),Jp=Xp||Yp,$p=Up(jp,"Gecko")&&!(Up(jp.toLowerCase(),"webkit")&&!Up(jp,"Edge"))&&!(Up(jp,"Trident")||Up(jp,"MSIE"))&&!Up(jp,"Edge"),Zp=Up(jp.toLowerCase(),"webkit")&&!Up(jp,"Edge");function td(){var t=bp.document;return t?t.documentMode:void 0}t:{var ed="",nd=(nd=jp,$p?/rv:([^\);]+)(\)|;)/.exec(nd):Xp?/Edge\/([\d\.]+)/.exec(nd):Yp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(nd):Zp?/WebKit\/(\S+)/.exec(nd):Qp?/(?:Version)[ \/]?(\S+)/.exec(nd):void 0);if(nd&&(ed=nd?nd[1]:""),Yp){nd=td();if(null!=nd&&nd>parseFloat(ed)){Kp=String(nd);break t}}Kp=ed}var rd={};function id(a){return t=a,e=function(){for(var t=0,e=Fp(String(Kp)).split("."),n=Fp(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=Vp(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Vp(0==o[2].length,0==s[2].length)||Vp(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=rd,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var od=bp.document&&Yp&&(td()||parseInt(Kp,10))||void 0,sd=!Yp||9<=Number(od),ad=Yp&&!id("9"),ud=function(){if(!bp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{bp.addEventListener("test",_p,e),bp.removeEventListener("test",_p,e)}catch(t){}return t}();function cd(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function hd(t,e){if(cd.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if($p){t:{try{Wp(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ld[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}cd.prototype.b=function(){this.defaultPrevented=!0},Pp(hd,cd);var ld={2:"touch",3:"pen",4:"mouse"};hd.prototype.b=function(){hd.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ad)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var fd="closure_listenable_"+(1e6*Math.random()|0),pd=0;function dd(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++pd,this.Y=this.Z=!1}function vd(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function yd(t){this.src=t,this.a={},this.b=0}function gd(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=Rp(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(vd(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function md(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}yd.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=md(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new dd(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var bd="closure_lm_"+(1e6*Math.random()|0),_d={};function wd(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=kd(r);return e&&e[fd]?e.wa(n,r,Ip(i)?!!i.capture:!!i,o):Id(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)wd(t,e[o],n,r,i);return null}return n=kd(n),t&&t[fd]?t.va(e,n,Ip(r)?!!r.capture:!!r,i):Id(t,e,n,!1,r,i)}function Id(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ip(i)?!!i.capture:!!i;if(s&&!sd)return null;var a,u,c=Nd(t);if(c||(t[bd]=c=new yd(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=Cd,r=u=sd?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=!ud?s:i)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Td(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ed(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[fd]?gd(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Td(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Nd(e))?(gd(n,t),0==n.b&&(n.src=null,e[bd]=null)):vd(t)))}function Td(t){return t in _d?_d[t]:_d[t]="on"+t}function Sd(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ed(t),n.call(r,e)}function Cd(t,e){if(t.Y)return!0;if(sd)return Sd(t,new hd(e,this));if(!e)t:{e=["window","event"];for(var n=bp,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Sd(t,e=new hd(e,this))}function Nd(t){return(t=t[bd])instanceof yd?t:null}var Ad="__closure_events_fn_"+(1e9*Math.random()>>>0);function kd(e){return"function"==typeof e?e:(e[Ad]||(e[Ad]=function(t){return e.handleEvent(t)}),e[Ad])}function Pd(){Op.call(this),this.c=new yd(this),(this.J=this).C=null}function Od(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new cd(e,t):e instanceof cd?e.target=e.target||t:(s=e,Gp(e=new cd(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=Rd(o,r,!0,e)&&s;if(s=Rd(o=e.a=t,r,!0,e)&&s,s=Rd(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=Rd(o=e.a=n[i],r,!1,e)&&s}function Rd(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&gd(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}Pp(Pd,Op),Pd.prototype[fd]=!0,(K=Pd.prototype).addEventListener=function(t,e,n,r){wd(this,t,e,n,r)},K.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Ip(i)?!!i.capture:!!i,r=kd(r),e&&e[fd]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=md(s=e.a[n],r,i,o))&&(vd(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Nd(e))&&(n=e.a[n.toString()],(r=(e=-1)<(e=n?md(n,r,i,o):e)?n[e]:null)&&Ed(r))}(this,t,e,n,r)},K.G=function(){if(Pd.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)vd(n[r]);delete e.a[t],e.b--}}this.C=null},K.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},K.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var xd=bp.JSON.stringify;function Dd(){this.b=this.a=null}var Ld,Md=(jd.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new jd(function(){return new Fd},function(t){t.reset()}));function jd(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Fd(){this.next=this.b=this.a=null}function Ud(t,e){var n;Ld||(n=bp.Promise.resolve(void 0),Ld=function(){n.then(Bd)}),Vd||(Ld(),Vd=!0),qd.add(t,e)}Dd.prototype.add=function(t,e){var n=Md.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Fd.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Vd=!(Fd.prototype.reset=function(){this.next=this.b=this.a=null}),qd=new Dd;function Bd(){for(var t,e;n=e=void 0,n=null,(e=qd).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){bp.setTimeout(function(){throw t},0)}(t)}var n=Md;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}Vd=!1}function zd(t,e){Pd.call(this),this.b=t||1,this.a=e||bp,this.f=Np(this.Za,this),this.g=kp()}function Hd(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Gd(t,e,n){if("function"==typeof t)n&&(t=Np(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Np(t.handleEvent,t)}return 2147483647<Number(e)?-1:bp.setTimeout(t,e||0)}Pp(zd,Pd),(K=zd.prototype).aa=!1,K.M=null,K.Za=function(){var t;this.aa&&(0<(t=kp()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Od(this,"tick"),this.aa&&(Hd(this),this.start())))},K.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=kp())},K.G=function(){zd.X.G.call(this),Hd(this),delete this.a};var Wd,Kd,Qd,Yd=(yp(Kd=Jd,Qd=Wd=Op),Kd.prototype=null===Qd?Object.create(Qd):(Xd.prototype=Qd.prototype,new Xd),Jd.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Gd(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},Jd.prototype.G=function(){Wd.prototype.G.call(this),this.a&&(bp.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},Jd);function Xd(){this.constructor=Kd}function Jd(t,e){var n=Wd.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function $d(t){Op.call(this),this.b=t,this.a={}}Pp($d,Op);var Zd=[];function tv(t,e,n,r){Array.isArray(n)||(n&&(Zd[0]=n.toString()),n=Zd);for(var i=0;i<n.length;i++){var o=wd(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ev(t){Bp(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ed(t)},t),t.a={}}function nv(){this.a=!0}function rv(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return xd(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}$d.prototype.G=function(){$d.X.G.call(this),ev(this)},$d.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nv.prototype.info=function(){};var iv={},ov=null;function sv(){return ov=ov||new Pd}function av(t){cd.call(this,iv.Fa,t)}function uv(t){var e=sv();Od(e,new av(e))}function cv(t,e){cd.call(this,iv.STAT_EVENT,t),this.stat=e}function hv(t){var e=sv();Od(e,new cv(e,t))}function lv(t){cd.call(this,iv.Ga,t)}function fv(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return bp.setTimeout(function(){t()},e)}iv.Fa="serverreachability",Pp(av,cd),iv.STAT_EVENT="statevent",Pp(cv,cd),iv.Ga="timingevent",Pp(lv,cd);W={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Sn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function pv(){}function dv(t){var e;return e=!(e=t.a)?t.a={}:e}function vv(){}pv.prototype.a=null;var yv,bu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function gv(){cd.call(this,"d")}function mv(){cd.call(this,"c")}function bv(){}function _v(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new $d(this),this.P=wv,t=Jp?125:void 0,this.R=new zd(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Pp(gv,cd),Pp(mv,cd),Pp(bv,pv),yv=new bv;var wv=45e3,Iv={},Ev={};function Tv(t,e,n){t.H=1,t.i=Gv(Uv(e)),t.j=n,t.I=!0,Sv(t,null)}function Sv(t,e){t.u=kp(),Nv(t),t.l=Uv(t.i);var s,a,u,c,h,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),iy(n.b,"t",r),t.D=0,t.a=Jy(t.g,t.g.C?e:null),0<t.O&&(t.F=new Yd(Np(t.Ca,t,t.a),t.O)),tv(t.J,t.a,"readystatechange",t.Xa),e=t.B?zp(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),uv(1),s=t.c,a=t.m,u=t.l,c=t.f,h=t.S,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function Cv(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var a=(a=n,o=i=void 0,i=(r=t).D,-1==(o=a.indexOf("\n",i))?Ev:(i=Number(a.substring(i,o)),isNaN(i)?Iv:(o+=1)+i>a.length?Ev:(a=a.substr(o,i),r.D=o+i,a)));if(a==Ev){4==e&&(t.h=4,hv(14),s=!1),rv(t.c,t.f,null,"[Incomplete Response]");break}if(a==Iv){t.h=4,hv(15),rv(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}rv(t.c,t.f,a,null),Rv(t,a)}4==e&&0==n.length&&(t.h=1,hv(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),zy(e),e.F=!0,hv(11))):(rv(t.c,t.f,n,"[Invalid Chunked Response]"),Ov(t),Pv(t))}function Nv(t){t.T=kp()+t.P,Av(t,t.P)}function Av(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=fv(Np(t.Va,t),e)}function kv(t){t.o&&(bp.clearTimeout(t.o),t.o=null)}function Pv(t){0==t.g.v||t.A||Wy(t.g,t)}function Ov(t){kv(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Hd(t.R),ev(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Rv(t,e){try{var n,r,i,o,s,a=t.g;if(0!=a.v&&(a.a==t||ly(a.b,t)))if(a.I=t.N,!t.C&&ly(a.b,t)&&3==a.v){try{var u=a.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!a.j){if(a.a){if(!(a.a.u+3e3<t.u))break t;Gy(a),Dy(a)}By(a),hv(18)}}else a.oa=c[1],0<a.oa-a.P&&c[2]<37500&&a.H&&0==a.o&&!a.m&&(a.m=fv(Np(a.Sa,a),6e3));if(hy(a.b)<=1&&a.ea){try{a.ea()}catch(t){}a.ea=void 0}}else Qy(a,11)}else if(!t.C&&a.a!=t||Gy(a),!Mp(e))for(e=u=a.ka.a.parse(e),u=0;u<e.length;u++)c=e[u],a.P=c[0],c=c[1],2==a.v?"c"==c[0]?(a.J=c[1],a.ga=c[2],null!=(r=c[3])&&(a.ha=r,a.c.info("VER="+a.ha)),null!=(o=c[4])&&(a.pa=o,a.c.info("SVER="+a.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,a.D=n,a.c.info("backChannelRequestTimeoutMs_="+n)),n=a,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(Up(r,"spdy")||Up(r,"quic")||Up(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(fy(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,Hv(n.B,n.A,s))),a.v=3,a.f&&a.f.ta(),a.U&&(a.N=kp()-t.u,a.c.info("Handshake RTT: "+a.N+"ms")),i=t,(n=a).la=Xy(n,n.C?n.ga:null,n.fa),i.C?(py(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(kv(o),Nv(o)),n.a=i):qy(n),0<a.g.length&&jy(a)):"stop"!=c[0]&&"close"!=c[0]||Qy(a,7):3==a.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Qy(a,7):xy(a):"noop"!=c[0]&&a.f&&a.f.sa(c),a.o=0);uv(4)}catch(t){}}function xv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(wp(t)||"string"==typeof t)xp(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(wp(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(wp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Dv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Dv)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Lv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Mv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Mv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Mv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(K=_v.prototype).setTimeout=function(t){this.P=t},K.Xa=function(t){t=t.target;var e=this.F;e&&3==ky(t)?e.f():this.Ca(t)},K.Ca=function(t){try{if(t==this.a)t:{var e=ky(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!Jp&&!this.a.$())){this.A||4!=e||7==n||uv(8==n||r<=0?3:2),kv(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,r=this.c,u=this.m,c=this.l,h=this.f,l=this.S,f=e,p=i,r.info(function(){return"XMLHTTP RESP ("+h+") [ attempt "+l+"]: "+u+"\n"+c+"\n"+f+" "+p}),this.b){if(this.U&&!this.C){e:{if(this.a){var s=this.a;if((s=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Mp(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,hv(12),Ov(this),Pv(this);break t}rv(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Rv(this,a)}this.I?(Cv(this,e,o),Jp&&this.b&&3==e&&(tv(this.J,this.R,"tick",this.Wa),this.R.start())):(rv(this.c,this.f,o,null),Rv(this,o)),4==e&&Ov(this),this.b&&!this.A&&(4==e?Wy(this.g,this):(this.b=!1,Nv(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,hv(12)):(this.h=0,hv(13)),Ov(this),Pv(this)}}}catch(t){}var u,c,h,l,f,p},K.Wa=function(){var t,e;this.a&&(t=ky(this.a),e=this.a.$(),this.D<e.length&&(kv(this),Cv(this,t,e),this.b&&4!=t&&Nv(this)))},K.cancel=function(){this.A=!0,Ov(this)},K.Va=function(){this.o=null;var t,e,n=kp();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(uv(3),hv(17)),Ov(this),this.h=2,Pv(this)):Av(this,this.T-n)},(K=Dv.prototype).K=function(){Lv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},K.L=function(){return Lv(this),this.a.concat()},K.get=function(t,e){return Mv(this.b,t)?this.b[t]:e},K.set=function(t,e){Mv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},K.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var jv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fv(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Fv?(this.a=void 0!==e?e:t.a,Vv(this,t.f),this.j=t.j,qv(this,t.c),Bv(this,t.h),this.g=t.g,e=t.b,(n=new ty).c=e.c,e.a&&(n.a=new Dv(e.a),n.b=e.b),zv(this,n),this.i=t.i):t&&(n=String(t).match(jv))?(this.a=!!e,Vv(this,n[1]||"",!0),this.j=Wv(n[2]||""),qv(this,n[3]||"",!0),Bv(this,n[4]),this.g=Wv(n[5]||"",!0),zv(this,n[6]||"",!0),this.i=Wv(n[7]||"")):(this.a=!!e,this.b=new ty(null,this.a))}function Uv(t){return new Fv(t)}function Vv(t,e,n){t.f=n?Wv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function qv(t,e,n){t.c=n?Wv(e,!0):e}function Bv(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function zv(t,e,n){var r,i;e instanceof ty?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(ey(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ny(this,e),iy(this,n,t))},r)),r.f=i):(n||(e=Kv(e,$v)),t.b=new ty(e,t.a))}function Hv(t,e,n){t.b.set(e,n)}function Gv(t){return Hv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^kp()).toString(36)),t}function Wv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Qv),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Qv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fv.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Kv(e,Yv,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Kv(e,Yv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Kv(n,"/"==n.charAt(0)?Jv:Xv,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Kv(n,Zv)),t.join("")};var Yv=/[#\/\?@]/g,Xv=/[#\?:]/g,Jv=/[#\?]/g,$v=/[#\?@]/g,Zv=/#/g;function ty(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ey(n){n.a||(n.a=new Dv,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function ny(t,e){ey(t),e=oy(t,e),Mv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Mv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Lv(t)))}function ry(t,e){return ey(t),e=oy(t,e),Mv(t.a.b,e)}function iy(t,e,n){ny(t,e),0<n.length&&(t.c=null,t.a.set(oy(t,e),Lp(n)),t.b+=n.length)}function oy(t,e){return e=String(e),e=t.f?e.toLowerCase():e}(K=ty.prototype).add=function(t,e){ey(this),this.c=null,t=oy(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},K.forEach=function(n,r){ey(this),this.a.forEach(function(t,e){xp(t,function(t){n.call(r,t,e,this)},this)},this)},K.L=function(){ey(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},K.K=function(t){ey(this);var e=[];if("string"==typeof t)ry(this,t)&&(e=Dp(e,this.a.get(oy(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Dp(e,t[n])}return e},K.set=function(t,e){return ey(this),this.c=null,ry(this,t=oy(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},K.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},K.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var sy=function(t,e){this.b=t,this.a=e};function ay(t){this.g=t||uy,t=bp.PerformanceNavigationTiming?0<(t=bp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(bp.ia&&bp.ia.ya&&bp.ia.ya()&&bp.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var uy=10;function cy(t){return t.b||t.a&&t.a.size>=t.f}function hy(t){return t.b?1:t.a?t.a.size:0}function ly(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function fy(t,e){t.a?t.a.add(e):t.b=e}function py(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function dy(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return Lp(t.c);var r=t.c;try{for(var i=gp(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function vy(){}function yy(){this.a=new vy}function gy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}ay.prototype.cancel=function(){var e,t;if(this.c=dy(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=gp(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},vy.prototype.stringify=function(t){return bp.JSON.stringify(t,void 0)},vy.prototype.parse=function(t){return bp.JSON.parse(t,void 0)};var my=bp.JSON.parse;function by(t){Pd.call(this),this.headers=new Dv,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=_y,this.D=this.F=!1}Pp(by,Pd);var _y="",wy=/^https?$/i,Iy=["POST","PUT"];function Ey(t){return"content-type"==t.toLowerCase()}function Ty(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Sy(t),Ny(t)}function Sy(t){t.u||(t.u=!0,Od(t,"complete"),Od(t,"error"))}function Cy(t){if(t.b&&void 0!==mp&&(!t.s[1]||4!=ky(t)||2!=t.W()))if(t.l&&4==ky(t))Gd(t.za,0,t);else if(Od(t,"readystatechange"),4==ky(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}(e=s)||((n=0===o)&&(!(i=String(t.B).match(jv)[1]||null)&&bp.self&&bp.self.location&&(i=(r=bp.self.location.protocol).substr(0,r.length-1)),n=!wy.test(i?i.toLowerCase():"")),e=n);if(e)Od(t,"complete"),Od(t,"success");else{t.h=6;try{var a=2<ky(t)?t.a.statusText:""}catch(o){a=""}t.f=a+" ["+t.W()+"]",Sy(t)}}finally{Ny(t)}}}function Ny(t,e){if(t.a){Ay(t);var n=t.a,r=t.s[0]?_p:null;t.a=null,t.s=null,e||Od(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Ay(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(bp.clearTimeout(t.m),t.m=null)}function ky(t){return t.a?t.a.readyState:0}function Py(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Bp(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Hv(t,e,n))}function Oy(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ry(t){this.pa=0,this.g=[],this.c=new nv,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Oy("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Oy("baseRetryDelayMs",5e3,t),this.Ra=Oy("retryDelaySeedMs",1e4,t),this.Ma=Oy("forwardChannelMaxRetries",2,t),this.ma=Oy("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ay(t&&t.concurrentRequestLimit),this.ka=new yy,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function xy(t){var e,n;Ly(t),3==t.v&&(e=t.R++,Hv(n=Uv(t.B),"SID",t.J),Hv(n,"RID",e),Hv(n,"TYPE","terminate"),Uy(t,n),(e=new _v(t,t.c,e,void 0)).H=2,e.i=Gv(Uv(n)),n=!1,!(n=bp.navigator&&bp.navigator.sendBeacon?bp.navigator.sendBeacon(e.i.toString(),""):n)&&bp.Image&&((new Image).src=e.i,n=!0),n||(e.a=Jy(e.g,null),e.a.ba(e.i)),e.u=kp(),Nv(e)),Yy(t)}function Dy(t){t.a&&(zy(t),t.a.cancel(),t.a=null)}function Ly(t){Dy(t),t.j&&(bp.clearTimeout(t.j),t.j=null),Gy(t),t.b.cancel(),t.h&&("number"==typeof t.h&&bp.clearTimeout(t.h),t.h=null)}function My(t,e){t.g.push(new sy(t.Oa++,e)),3==t.v&&jy(t)}function jy(t){cy(t.b)||t.h||(t.h=!0,Ud(t.Ba,t),t.u=0)}function Fy(t,e){var n=e?e.f:t.R++,r=Uv(t.B);Hv(r,"SID",t.J),Hv(r,"RID",n),Hv(r,"AID",t.P),Uy(t,r),t.i&&t.l&&Py(r,t.i,t.l),n=new _v(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Vy(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),fy(t.b,n),Tv(n,r,e)}function Uy(t,n){t.f&&xv({},function(t,e){Hv(n,e,t)})}function Vy(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Np(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r){var i="req"+c+"_"||"";try{xv(t,function(t,e){var n=t;Ip(t)&&(n=xd(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s)}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function qy(t){t.a||t.j||(t.T=1,Ud(t.Aa,t),t.o=0)}function By(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=fv(Np(t.Aa,t),Ky(t,t.o)),t.o++,1)}function zy(t){null!=t.s&&(bp.clearTimeout(t.s),t.s=null)}function Hy(t){t.a=new _v(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Uv(t.la);Hv(e,"RID","rpc"),Hv(e,"SID",t.J),Hv(e,"CI",t.H?"0":"1"),Hv(e,"AID",t.P),Uy(t,e),Hv(e,"TYPE","xmlhttp"),t.i&&t.l&&Py(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Gv(Uv(e)),n.j=null,n.I=!0,Sv(n,t)}function Gy(t){null!=t.m&&(bp.clearTimeout(t.m),t.m=null)}function Wy(t,e){var n,r,i,o=null;if(t.a==e){Gy(t),zy(t),t.a=null;var s=2}else{if(!ly(t.b,e))return;o=e.s,py(t.b,e),s=1}if(t.I=e.N,0!=t.v)if(e.b)1==s?(o=e.j?e.j.length:0,e=kp()-e.u,n=t.u,Od(s=sv(),new lv(s)),jy(t)):qy(t);else if(3==(n=e.h)||0==n&&0<t.I||(1!=s||(i=e,hy((r=t).b)>=r.b.f-(r.h?1:0)||(r.h?(r.g=i.s.concat(r.g),0):1==r.v||2==r.v||r.u>=(r.La?0:r.Ma)||(r.h=fv(Np(r.Ba,r,i),Ky(r,r.u)),r.u++,0))))&&(2!=s||!By(t)))switch(o&&0<o.length&&(e=t.b,e.c=e.c.concat(o)),n){case 1:Qy(t,5);break;case 4:Qy(t,10);break;case 3:Qy(t,6);break;default:Qy(t,2)}}function Ky(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Qy(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=Np(t.Ya,t),r||(r=new Fv("//www.google.com/images/cleardot.gif"),bp.location&&"http"==bp.location.protocol||Vv(r,"https"),Gv(r)),n=r.toString(),r=o,o=new nv,bp.Image?((i=new Image).onload=Ap(gy,o,i,"TestLoadImage: loaded",!0,r),i.onerror=Ap(gy,o,i,"TestLoadImage: error",!1,r),i.onabort=Ap(gy,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=Ap(gy,o,i,"TestLoadImage: timeout",!1,r),bp.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):hv(2),t.v=0,t.f&&t.f.ra(e),Yy(t),Ly(t)}function Yy(t){t.v=0,t.I=-1,t.f&&(0==dy(t.b).length&&0==t.g.length||(t.b.c.length=0,Lp(t.g),t.g.length=0),t.f.qa())}function Xy(t,e,n){var r,i,o,s,a,u=(s=n)instanceof Fv?Uv(s):new Fv(s,void 0);return""!=u.c?(e&&qv(u,e+"."+u.c),Bv(u,u.h)):(a=bp.location,r=a.protocol,i=e?e+"."+a.hostname:a.hostname,o=+a.port,s=n,a=new Fv(null,void 0),r&&Vv(a,r),i&&qv(a,i),o&&Bv(a,o),s&&(a.g=s),u=a),t.V&&Bp(t.V,function(t,e){Hv(u,e,t)}),e=t.A,n=t.na,e&&n&&Hv(u,e,n),Hv(u,"VER",t.ha),Uy(t,u),u}function Jy(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new by(t.Na)).F=t.C,e}function $y(){}function Zy(){if(Yp&&!(10<=Number(od)))throw Error("Environmental error: no available transport.")}function tg(t,e){Pd.call(this),this.a=new Ry(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Mp(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Mp(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new rg(this)}function eg(t){gv.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ng(){mv.call(this),this.status=1}function rg(t){this.a=t}(K=by.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?dv(this.H):dv(yv),this.a.onreadystatechange=Np(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Ty(this,t)}t=n||"";var i,o=new Dv(this.headers);r&&xv(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Ey,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=bp.FormData&&t instanceof bp.FormData,0<=Rp(Iy,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ay(this),0<this.o&&((this.D=(i=this.a,Yp&&id(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=Np(this.xa,this)):this.m=Gd(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ty(this,t)}},K.xa=function(){void 0!==mp&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Od(this,"timeout"),this.abort(8))},K.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Od(this,"complete"),Od(this,"abort"),Ny(this))},K.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ny(this,!0)),by.X.G.call(this)},K.za=function(){this.j||(this.A||this.l||this.g?Cy(this):this.Ua())},K.Ua=function(){Cy(this)},K.W=function(){try{return 2<ky(this)?this.a.status:-1}catch(t){return-1}},K.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},K.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),my(e)}},K.ua=function(){return this.h},K.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(K=Ry.prototype).ha=8,K.v=1,K.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new _v(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Gp(r=zp(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Vy(this,n,e),Hv(i=Uv(this.B),"RID",t),Hv(i,"CVER",22),this.A&&Hv(i,"X-HTTP-Session-Id",this.A),Uy(this,i),this.i&&r&&Py(i,this.i,r),fy(this.b,n),this.Ia&&Hv(i,"TYPE","init"),this.da?(Hv(i,"$req",e),Hv(i,"SID","null"),n.U=!0,Tv(n,i,null)):Tv(n,i,e),this.v=2}}else 3==this.v&&(t?Fy(this,t):0==this.g.length||cy(this.b)||Fy(this))},K.Aa=function(){var t;this.j=null,Hy(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=fv(Np(this.Ta,this),t))},K.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,hv(10),Dy(this),Hy(this))},K.Sa=function(){null!=this.m&&(this.m=null,Dy(this),By(this),hv(19))},K.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),hv(2)):(this.c.info("Failed to ping google.com"),hv(1))},(K=$y.prototype).ta=function(){},K.sa=function(){},K.ra=function(){},K.qa=function(){},K.Ja=function(){},Zy.prototype.a=function(t,e){return new tg(t,e)},Pp(tg,Pd),tg.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;hv(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Xy(t,null,t.fa),jy(t)},tg.prototype.close=function(){xy(this.a)},tg.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,My(this.a,e)):this.l?((e={}).__data__=xd(t),My(this.a,e)):My(this.a,t)},tg.prototype.G=function(){this.a.f=null,delete this.f,xy(this.a),delete this.a,tg.X.G.call(this)},Pp(eg,gv),Pp(ng,mv),Pp(rg,$y),rg.prototype.ta=function(){Od(this.a,"a")},rg.prototype.sa=function(t){Od(this.a,new eg(t))},rg.prototype.ra=function(t){Od(this.a,new ng)},rg.prototype.qa=function(){Od(this.a,"b")},Zy.prototype.createWebChannel=Zy.prototype.a,tg.prototype.send=tg.prototype.h,tg.prototype.open=tg.prototype.g,W.NO_ERROR=0,W.TIMEOUT=8,W.HTTP_ERROR=6,Sn.COMPLETE="complete",(vv.EventType=bu).OPEN="a",bu.CLOSE="b",bu.ERROR="c",bu.MESSAGE="d",Pd.prototype.listen=Pd.prototype.va,by.prototype.listenOnce=by.prototype.wa,by.prototype.getLastError=by.prototype.Qa,by.prototype.getLastErrorCode=by.prototype.ua,by.prototype.getStatus=by.prototype.W,by.prototype.getResponseJson=by.prototype.Pa,by.prototype.getResponseText=by.prototype.$,by.prototype.send=by.prototype.ba;var ig=sv,og=W,sg=Sn,ag=iv,ug=10,cg=11,hg=vv,lg=by,fg=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},pg=(Object.defineProperty(vg.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),vg.prototype.isEqual=function(t){return t instanceof vg&&t.projectId===this.projectId&&t.database===this.database},vg),dg=new fs("@firebase/firestore");function vg(t,e){this.projectId=t,this.database=e||"(default)"}function yg(){return dg.logLevel}function gg(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];dg.logLevel<=ss.DEBUG&&(e=n.map(_g),dg.debug.apply(dg,no(["Firestore (8.3.0): "+t],e)))}function mg(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];dg.logLevel<=ss.ERROR&&(e=n.map(_g),dg.error.apply(dg,no(["Firestore (8.3.0): "+t],e)))}function bg(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];dg.logLevel<=ss.WARN&&(e=n.map(_g),dg.warn.apply(dg,no(["Firestore (8.3.0): "+t],e)))}function _g(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function wg(t){t="FIRESTORE (8.3.0) INTERNAL ASSERTION FAILED: "+(t=void 0===t?"Unexpected state":t);throw mg(t),new Error(t)}function Ig(t){t||wg()}var Eg=(Tg.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Tg);function Tg(){}function Sg(t,e){return t<e?-1:e<t?1:0}function Cg(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function Ng(t){return t+"\0"}var Ag=(kg.fromBase64String=function(t){return new kg(atob(t))},kg.fromUint8Array=function(t){return new kg(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},kg.prototype.toBase64=function(){return t=this.h,btoa(t);var t},kg.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},kg.prototype.l=function(){return 2*this.h.length},kg.prototype._=function(t){return Sg(this.h,t.h)},kg.prototype.isEqual=function(t){return this.h===t.h},kg);function kg(t){this.h=t}Ag.T=new Ag("");var Pg,Og={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Rg=(Xi(jg,Pg=Error),jg),xg=(Mg.fromBase64String=function(t){try{return new Mg(Ag.fromBase64String(t))}catch(t){throw new Rg(Og.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},Mg.fromUint8Array=function(t){return new Mg(Ag.fromUint8Array(t))},Mg.prototype.toBase64=function(){return this.I.toBase64()},Mg.prototype.toUint8Array=function(){return this.I.toUint8Array()},Mg.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},Mg.prototype.isEqual=function(t){return this.I.isEqual(t.I)},Mg),Dg=(Lg.prototype.m=function(){return null!=this.uid},Lg.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},Lg.prototype.isEqual=function(t){return t.uid===this.uid},Lg);function Lg(t){this.uid=t}function Mg(t){this.I=t}function jg(t,e){var n=this;return(n=Pg.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}Dg.UNAUTHENTICATED=new Dg(null),Dg.R=new Dg("google-credentials-uid"),Dg.P=new Dg("first-party-uid");function Fg(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t}var Ug=(Qg.prototype.getToken=function(){return Promise.resolve(null)},Qg.prototype.p=function(){},Qg.prototype.v=function(t){(this.V=t)(Dg.UNAUTHENTICATED)},Qg.prototype.S=function(){this.V=null},Qg),Vg=(Kg.prototype.getToken=function(){var e=this,n=this.N,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.N!==n?(gg("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Ig("string"==typeof t.accessToken),new Fg(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},Kg.prototype.p=function(){this.forceRefresh=!0},Kg.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},Kg.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},Kg.prototype.$=function(){var t=this.auth&&this.auth.getUid();return Ig(null===t||"string"==typeof t),new Dg(t)},Kg),qg=(Object.defineProperty(Wg.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),Wg),Bg=(Gg.prototype.getToken=function(){return Promise.resolve(new qg(this.F,this.O))},Gg.prototype.v=function(t){t(Dg.P)},Gg.prototype.S=function(){},Gg.prototype.p=function(){},Gg),zg=(Hg.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Hg.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},Hg);function Hg(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}function Gg(t,e){this.F=t,this.O=e}function Wg(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=Dg.P}function Kg(t){var e=this;this.D=null,this.currentUser=Dg.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)},function(){}))}function Qg(){this.V=null}zg.q=-1;var Yg,Xg,Jg=(um.now=function(){return um.fromMillis(Date.now())},um.fromDate=function(t){return um.fromMillis(t.getTime())},um.fromMillis=function(t){var e=Math.floor(t/1e3);return new um(e,1e6*(t-1e3*e))},um.prototype.toDate=function(){return new Date(this.toMillis())},um.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},um.prototype.U=function(t){return this.seconds===t.seconds?Sg(this.nanoseconds,t.nanoseconds):Sg(this.seconds,t.seconds)},um.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},um.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},um.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},um.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},um),$g=(am.K=function(t){return new am(t)},am.min=function(){return new am(new Jg(0,0))},am.prototype._=function(t){return this.timestamp.U(t.timestamp)},am.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},am.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},am.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},am.prototype.j=function(){return this.timestamp},am),W=(Object.defineProperty(sm.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),sm.prototype.isEqual=function(t){return 0===sm.H(this,t)},sm.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof sm?t.forEach(function(t){e.push(t)}):e.push(t),this.J(e)},sm.prototype.limit=function(){return this.offset+this.length},sm.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},sm.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},sm.prototype.Z=function(){return this.segments[this.offset]},sm.prototype.tt=function(){return this.get(this.length-1)},sm.prototype.get=function(t){return this.segments[this.offset+t]},sm.prototype.et=function(){return 0===this.length},sm.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},sm.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},sm.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},sm.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},sm.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},sm),Zg=(Xi(om,Xg=W),om.prototype.J=function(t,e,n){return new om(t,e,n)},om.prototype.rt=function(){return this.it().join("/")},om.prototype.toString=function(){return this.rt()},om.ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new Rg(Og.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new om(n)},om.ct=function(){return new om([])},om),tm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,em=(Xi(im,Yg=W),im.prototype.J=function(t,e,n){return new im(t,e,n)},im.at=function(t){return tm.test(t)},im.prototype.rt=function(){return this.it().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t=!im.at(t)?"`"+t+"`":t}).join(".")},im.prototype.toString=function(){return this.rt()},im.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},im.ht=function(){return new im(["__name__"])},im.lt=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Rg(Og.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Rg(Og.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Rg(Og.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Rg(Og.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new im(e)},im.ct=function(){return new im([])},im),nm=(rm._t=function(t){return new rm(Zg.ot(t))},rm.ft=function(t){return new rm(Zg.ot(t).Y(5))},rm.prototype.dt=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},rm.prototype.isEqual=function(t){return null!==t&&0===Zg.H(this.path,t.path)},rm.prototype.toString=function(){return this.path.toString()},rm.H=function(t,e){return Zg.H(t.path,e.path)},rm.wt=function(t){return t.length%2==0},rm.Et=function(t){return new rm(new Zg(t.slice()))},rm);function rm(t){this.path=t}function im(){return null!==Yg&&Yg.apply(this,arguments)||this}function om(){return null!==Xg&&Xg.apply(this,arguments)||this}function sm(t,e,n){void 0===e?e=0:e>t.length&&wg(),void 0===n?n=t.length-e:n>t.length-e&&wg(),this.segments=t,this.offset=e,this.G=n}function am(t){this.timestamp=t}function um(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Rg(Og.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Rg(Og.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Rg(Og.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Rg(Og.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function cm(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function hm(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lm(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var fm=(dm.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},dm.prototype.isEqual=function(t){return Cg(this.fields,t.fields,function(t,e){return t.isEqual(e)})},dm),pm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dm(t){(this.fields=t).sort(em.H)}function vm(t){if(Ig(!!t),"string"!=typeof t)return{seconds:ym(t.seconds),nanos:ym(t.nanos)};var e=0,n=pm.exec(t);Ig(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function ym(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function gm(t){return"string"==typeof t?Ag.fromBase64String(t):Ag.fromUint8Array(t)}function mm(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bm(t){t=vm(t.mapValue.fields.__local_write_time__.timestampValue);return new Jg(t.seconds,t.nanos)}function _m(t){return null==t}function wm(t){return 0===t&&1/t==-1/0}function Im(t){return"number"==typeof t&&Number.isInteger(t)&&!wm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Em(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mm(t)?4:10:wg()}function Tm(r,i){var t,e,n=Em(r);if(n!==Em(i))return!1;switch(n){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return bm(r).isEqual(bm(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=vm(r.timestampValue),t=vm(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return e=i,gm(r.bytesValue).isEqual(gm(e.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return t=i,ym((e=r).geoPointValue.latitude)===ym(t.geoPointValue.latitude)&&ym(e.geoPointValue.longitude)===ym(t.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ym(t.integerValue)===ym(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=ym(t.doubleValue),e=ym(e.doubleValue);return t===e?wm(t)===wm(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return Cg(r.arrayValue.values||[],i.arrayValue.values||[],Tm);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(cm(e)!==cm(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!Tm(e[t],n[t])))return!1;return!0}();default:return wg()}}function Sm(t,e){return void 0!==(t.values||[]).find(function(t){return Tm(t,e)})}function Cm(t,e){var n,r,i,o=Em(t),s=Em(e);if(o!==s)return Sg(o,s);switch(o){case 0:return 0;case 1:return Sg(t.booleanValue,e.booleanValue);case 2:return r=e,i=ym(t.integerValue||t.doubleValue),r=ym(r.integerValue||r.doubleValue),i<r?-1:r<i?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1;case 3:return Nm(t.timestampValue,e.timestampValue);case 4:return Nm(bm(t),bm(e));case 5:return Sg(t.stringValue,e.stringValue);case 6:return function(t,e){t=gm(t),e=gm(e);return t._(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Sg(n[i],r[i]);if(0!==o)return o}return Sg(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,i=e.geoPointValue,0!==(r=Sg(ym(n.latitude),ym(i.latitude)))?r:Sg(ym(n.longitude),ym(i.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Cm(n[i],r[i]);if(o)return o}return Sg(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Sg(r[s],o[s]);if(0!==a)return a;a=Cm(n[r[s]],i[o[s]]);if(0!==a)return a}return Sg(r.length,o.length)}(t.mapValue,e.mapValue);default:throw wg()}}function Nm(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Sg(t,e);var n=vm(t),t=vm(e),e=Sg(n.seconds,t.seconds);return 0!==e?e:Sg(n.nanos,t.nanos)}function Am(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=vm(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?gm(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,nm.ft(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):wg();var e}(t)}function km(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function Pm(t){return t&&"integerValue"in t}function Om(t){return!!t&&"arrayValue"in t}function Rm(t){return t&&"nullValue"in t}function xm(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dm(t){return t&&"mapValue"in t}var Lm=(Fm.empty=function(){return new Fm({mapValue:{}})},Fm.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Dm(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},Fm.prototype.isEqual=function(t){return Tm(this.proto,t.proto)},Fm),Mm=(jm.prototype.set=function(t,e){return this.Rt(t,e),this},jm.prototype.delete=function(t){return this.Rt(t,null),this},jm.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===Em(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.tt(),e)},jm.prototype.Pt=function(){var t=this.yt(em.ct(),this.At);return null!=t?new Lm(t):this.It},jm.prototype.yt=function(r,t){var i=this,o=!1,e=this.It.field(r),s=Dm(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.yt(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},jm);function jm(t){void 0===t&&(t=Lm.empty()),this.It=t,this.At=new Map}function Fm(t){this.proto=t}var Um,Vm,qm,Sn=function(t,e){this.key=t,this.version=e},Bm=(Xi(Qm,qm=Sn),Qm.prototype.field=function(t){return this.gt.field(t)},Qm.prototype.data=function(){return this.gt},Qm.prototype.bt=function(){return this.gt.proto},Qm.prototype.isEqual=function(t){return t instanceof Qm&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},Qm.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Qm.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Qm),zm=(Xi(Km,Vm=Sn),Km.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Km.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),Km.prototype.isEqual=function(t){return t instanceof Km&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Km),Hm=(Xi(Wm,Um=Sn),Wm.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Wm.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Wm.prototype.isEqual=function(t){return t instanceof Wm&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Wm),Gm=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Wm(){return null!==Um&&Um.apply(this,arguments)||this}function Km(t,e,n){var r=this;return(r=Vm.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Qm(t,e,n,r){var i=this;return(i=qm.call(this,t,e)||this).gt=n,i.Vt=!!r.Vt,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Ym(t,e,n,r,i,o,s){return new Gm(t,e=void 0===e?null:e,n=void 0===n?[]:n,r=void 0===r?[]:r,i=void 0===i?null:i,o=void 0===o?null:o,s=void 0===s?null:s)}function Xm(t){var e=t;return null===e.vt&&(t=e.path.rt(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.rt()+t.op.toString()+Am(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.rt()+t.dir}).join(","),_m(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Sb(e.startAt)),e.endAt&&(t+="|ub:",t+=Sb(e.endAt)),e.vt=t),e.vt}function Jm(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!Tm(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ab(t.startAt,e.startAt)&&Ab(t.endAt,e.endAt)}function $m(t){return nm.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Zm,tb=(Xi(eb,Zm=function(){}),eb.create=function(t,e,n){return t.ut()?"in"===e||"not-in"===e?this.St(t,e,n):new ob(t,e,n):"array-contains"===e?new yb(t,n):"in"===e?new gb(t,n):"not-in"===e?new mb(t,n):"array-contains-any"===e?new bb(t,n):new eb(t,e,n)},eb.St=function(t,e,n){return new("in"===e?sb:ab)(t,n)},eb.prototype.matches=function(t){t=t.field(this.field);return"!="===this.op?null!==t&&this.Dt(Cm(t,this.value)):null!==t&&Em(this.value)===Em(t)&&this.Dt(Cm(t,this.value))},eb.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return wg()}},eb.prototype.Ct=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},eb);function eb(t,e,n){var r=this;return(r=Zm.call(this)||this).field=t,r.op=e,r.value=n,r}var nb,rb,ib,ob=(Xi(hb,ib=tb),hb.prototype.matches=function(t){t=nm.H(t.key,this.key);return this.Dt(t)},hb),sb=(Xi(cb,rb=tb),cb.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},cb),ab=(Xi(ub,nb=tb),ub.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},ub);function ub(t,e){var n=this;return(n=nb.call(this,t,"not-in",e)||this).keys=lb(0,e),n}function cb(t,e){var n=this;return(n=rb.call(this,t,"in",e)||this).keys=lb(0,e),n}function hb(t,e,n){var r=this;return(r=ib.call(this,t,e,n)||this).key=nm.ft(n.referenceValue),r}function lb(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return nm.ft(t.referenceValue)})}var fb,pb,db,vb,yb=(Xi(Tb,vb=tb),Tb.prototype.matches=function(t){t=t.field(this.field);return Om(t)&&Sm(t.arrayValue,this.value)},Tb),gb=(Xi(Eb,db=tb),Eb.prototype.matches=function(t){t=t.field(this.field);return null!==t&&Sm(this.value.arrayValue,t)},Eb),mb=(Xi(Ib,pb=tb),Ib.prototype.matches=function(t){if(Sm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.field(this.field);return null!==t&&!Sm(this.value.arrayValue,t)},Ib),bb=(Xi(wb,fb=tb),wb.prototype.matches=function(t){var e=this,t=t.field(this.field);return!(!Om(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return Sm(e.value.arrayValue,t)})},wb),_b=function(t,e){this.position=t,this.before=e};function wb(t,e){return fb.call(this,t,"array-contains-any",e)||this}function Ib(t,e){return pb.call(this,t,"not-in",e)||this}function Eb(t,e){return db.call(this,t,"in",e)||this}function Tb(t,e){return vb.call(this,t,"array-contains",e)||this}function Sb(t){return(t.before?"b":"a")+":"+t.position.map(Am).join(",")}var Cb=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Nb(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.ut()?nm.H(nm.ft(s.referenceValue),n.key):Cm(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ab(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Tm(t.position[n],e.position[n]))return!1;return!0}var kb=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null,this.startAt,this.endAt};function Pb(t,e,n,r,i,o,s,a){return new kb(t,e,n,r,i,o,s,a)}function Ob(t){return new kb(t)}function Rb(t){return!_m(t.limit)&&"F"===t.limitType}function xb(t){return!_m(t.limit)&&"L"===t.limitType}function Db(t){return 0<t.xt.length?t.xt[0].field:null}function Lb(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Mb(t){return null!==t.collectionGroup}function jb(t){var e=t;if(null===e.Nt){e.Nt=[];var n=Lb(e),t=Db(e);if(null!==n&&null===t)n.ut()||e.Nt.push(new Cb(n)),e.Nt.push(new Cb(em.ht(),"asc"));else{for(var r=!1,i=0,o=e.xt;i<o.length;i++){var s=o[i];e.Nt.push(s),s.field.ut()&&(r=!0)}r||(n=0<e.xt.length?e.xt[e.xt.length-1].dir:"asc",e.Nt.push(new Cb(em.ht(),n)))}}return e.Nt}function Fb(t){var e=t;if(!e.$t)if("F"===e.limitType)e.$t=Ym(e.path,e.collectionGroup,jb(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=jb(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Cb(o.field,s))}var a=e.endAt?new _b(e.endAt.position,!e.endAt.before):null,t=e.startAt?new _b(e.startAt.position,!e.startAt.before):null;e.$t=Ym(e.path,e.collectionGroup,n,e.filters,e.limit,a,t)}return e.$t}function Ub(t,e,n){return new kb(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vb(t,e){return Jm(Fb(t),Fb(e))&&t.limitType===e.limitType}function qb(t){return Xm(Fb(t))+"|lt:"+t.limitType}function Bb(t){return"Query(target="+(e=Fb(t),n=e.path.rt(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.rt()+" "+t.op+" "+Am(t.value)}).join(", ")+"]"),_m(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.rt()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Sb(e.startAt)),e.endAt&&(n+=", endAt: "+Sb(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function zb(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.dt(e.collectionGroup)&&e.path.nt(n):nm.wt(e.path)?e.path.isEqual(n):e.path.st(n))&&function(t){for(var e=0,n=i.xt;e<n.length;e++){var r=n[e];if(!r.field.ut()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||Nb(t.startAt,jb(t),n))&&(!t.endAt||!Nb(t.endAt,jb(t),n)));var e,n}function Hb(a){return function(t,e){for(var n=!1,r=0,i=jb(a);r<i.length;r++){var o=i[r],s=function(t,r,e){var n=t.field.ut()?nm.H(r.key,e.key):function(t,e){var n=r.field(t),t=e.field(t);return null!==n&&null!==t?Cm(n,t):wg()}(t.field,e);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return wg()}}(o,t,e);if(0!==s)return s;n=n||o.field.ut()}return 0}}var Gb=(Wb.prototype.kt=function(t){return new Wb(this.target,this.targetId,this.Ft,t,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Wb.prototype.Mt=function(t,e){return new Wb(this.target,this.targetId,this.Ft,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Wb.prototype.Lt=function(t){return new Wb(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,t,this.resumeToken)},Wb);function Wb(t,e,n,r,i,o,s){void 0===i&&(i=$g.min()),void 0===o&&(o=$g.min()),void 0===s&&(s=Ag.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function Kb(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wm(e)?"-0":e}}function Qb(t){return{integerValue:""+t}}function Yb(t,e){return Im(e)?Qb(e):Kb(t,e)}W=function(){this.qt=void 0};function Xb(t,e){return t instanceof c_?Pm(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var Jb,$b,Zb=(Xi(n_,$b=W),n_),t_=(Xi(e_,Jb=W),e_);function e_(t){var e=this;return(e=Jb.call(this)||this).elements=t,e}function n_(){return null!==$b&&$b.apply(this,arguments)||this}function r_(t,e){for(var n=f_(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return Tm(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var i_,o_=(Xi(s_,i_=W),s_);function s_(t){var e=this;return(e=i_.call(this)||this).elements=t,e}function a_(t,e){for(var n=f_(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!Tm(t,e)})}(i[r]);return{arrayValue:{values:n}}}var u_,c_=(Xi(h_,u_=W),h_);function h_(t,e){var n=this;return(n=u_.call(this)||this).Qt=t,n.Ut=e,n}function l_(t){return ym(t.integerValue||t.doubleValue)}function f_(t){return Om(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function p_(t,e){this.version=t,this.transformResults=e}var d_=function(t,e){this.field=t,this.transform=e},v_=(y_.Kt=function(){return new y_},y_.exists=function(t){return new y_(void 0,t)},y_.updateTime=function(t){return new y_(t)},Object.defineProperty(y_.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),y_.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},y_);function y_(t,e){this.updateTime=t,this.exists=e}function g_(t,e){return void 0!==t.updateTime?e instanceof Bm&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Bm}Sn=function(){};function m_(t,e,n){return t instanceof E_?function(t,e,n){if(!g_(t.jt,e))return e;var r=t.value,n=k_(t.fieldTransforms,n,e),r=P_(t.fieldTransforms,r,n),e=__(e);return new Bm(t.key,e,r,{Vt:!0})}(t,e,n):t instanceof T_?function(t,e,n){if(!g_(t.jt,e))return e;var r=__(e),e=N_(t,e,k_(t.fieldTransforms,n,e));return new Bm(t.key,r,e,{Vt:!0})}(t,e,n):(e=e,g_((t=t).jt,e)?new zm(t.key,$g.min()):e)}function b_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Cg(n,r,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof t_&&e instanceof t_||t instanceof o_&&e instanceof o_?Cg(t.elements,e.elements,Tm):t instanceof c_&&e instanceof c_?Tm(t.Ut,e.Ut):t instanceof Zb&&e instanceof Zb)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt));var n,r}function __(t){return t instanceof Bm?t.version:$g.min()}var w_,I_,E_=(Xi(C_,I_=Sn),C_),T_=(Xi(S_,w_=Sn),S_);function S_(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=w_.call(this)||this).key=t,o.data=e,o.Gt=n,o.jt=r,o.fieldTransforms=i,o.type=1,o}function C_(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=I_.call(this)||this).key=t,i.value=e,i.jt=n,i.fieldTransforms=r,i.type=0,i}function N_(t,e,n){var r,i,o;return i=t,e=r=e instanceof Bm?e.data():Lm.empty(),o=new Mm(e),i.Gt.fields.forEach(function(t){var e;t.et()||(null!==(e=i.data.field(t))?o.set(t,e):o.delete(t))}),r=o.Pt(),P_(t.fieldTransforms,r,n)}function A_(t,e,n){var r=[];Ig(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Bm&&(a=e.field(o.field)),r.push((o=s,s=a,a=n[i],o instanceof t_?r_(o,s):o instanceof o_?a_(o,s):a))}return r}function k_(t,e,n){for(var r,i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Bm&&(c=n.field(a.field)),i.push((r=c,a=e,c=void 0,(u=u)instanceof Zb?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof t_?r_(u,r):u instanceof o_?a_(u,r):(u=Xb(c=u,r),r=l_(u)+l_(c.Ut),Pm(u)&&Pm(c.Ut)?Qb(r):Kb(c.Qt,r))))}return i}function P_(t,e,n){for(var r=new Mm(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}function O_(t){this.count=t}var R_,x_,D_,L_=(Xi(F_,D_=Sn),F_),M_=(Xi(j_,x_=Sn),j_);function j_(t,e){var n=this;return(n=x_.call(this)||this).key=t,n.jt=e,n.type=3,n.fieldTransforms=[],n}function F_(t,e){var n=this;return(n=D_.call(this)||this).key=t,n.jt=e,n.type=2,n.fieldTransforms=[],n}function U_(t){switch(t){case Og.OK:return wg(),0;case Og.CANCELLED:case Og.UNKNOWN:case Og.DEADLINE_EXCEEDED:case Og.RESOURCE_EXHAUSTED:case Og.INTERNAL:case Og.UNAVAILABLE:case Og.UNAUTHENTICATED:return;case Og.INVALID_ARGUMENT:case Og.NOT_FOUND:case Og.ALREADY_EXISTS:case Og.PERMISSION_DENIED:case Og.FAILED_PRECONDITION:case Og.ABORTED:case Og.OUT_OF_RANGE:case Og.UNIMPLEMENTED:case Og.DATA_LOSS:return 1;default:return wg(),0}}function V_(t){if(void 0===t)return mg("GRPC error has no .code"),Og.UNKNOWN;switch(t){case R_.OK:return Og.OK;case R_.CANCELLED:return Og.CANCELLED;case R_.UNKNOWN:return Og.UNKNOWN;case R_.DEADLINE_EXCEEDED:return Og.DEADLINE_EXCEEDED;case R_.RESOURCE_EXHAUSTED:return Og.RESOURCE_EXHAUSTED;case R_.INTERNAL:return Og.INTERNAL;case R_.UNAVAILABLE:return Og.UNAVAILABLE;case R_.UNAUTHENTICATED:return Og.UNAUTHENTICATED;case R_.INVALID_ARGUMENT:return Og.INVALID_ARGUMENT;case R_.NOT_FOUND:return Og.NOT_FOUND;case R_.ALREADY_EXISTS:return Og.ALREADY_EXISTS;case R_.PERMISSION_DENIED:return Og.PERMISSION_DENIED;case R_.FAILED_PRECONDITION:return Og.FAILED_PRECONDITION;case R_.ABORTED:return Og.ABORTED;case R_.OUT_OF_RANGE:return Og.OUT_OF_RANGE;case R_.UNIMPLEMENTED:return Og.UNIMPLEMENTED;case R_.DATA_LOSS:return Og.DATA_LOSS;default:return wg()}}(W=R_=R_||{})[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";var q_=(W_.prototype.zt=function(t,e){return new W_(this.H,this.root.zt(t,e,this.H).copy(null,null,z_.Ht,null,null))},W_.prototype.remove=function(t){return new W_(this.H,this.root.remove(t,this.H).copy(null,null,z_.Ht,null,null))},W_.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},W_.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},W_.prototype.et=function(){return this.root.et()},Object.defineProperty(W_.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),W_.prototype.Jt=function(){return this.root.Jt()},W_.prototype.Yt=function(){return this.root.Yt()},W_.prototype.Xt=function(t){return this.root.Xt(t)},W_.prototype.forEach=function(n){this.Xt(function(t,e){return n(t,e),!1})},W_.prototype.toString=function(){var n=[];return this.Xt(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},W_.prototype.Zt=function(t){return this.root.Zt(t)},W_.prototype.te=function(){return new B_(this.root,null,this.H,!1)},W_.prototype.ee=function(t){return new B_(this.root,t,this.H,!1)},W_.prototype.ne=function(){return new B_(this.root,null,this.H,!0)},W_.prototype.se=function(t){return new B_(this.root,t,this.H,!0)},W_),B_=(G_.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},G_.prototype.ce=function(){return 0<this.re.length},G_.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},G_),z_=(H_.prototype.copy=function(t,e,n,r,i){return new H_(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},H_.prototype.et=function(){return!1},H_.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},H_.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},H_.prototype.min=function(){return this.left.et()?this:this.left.min()},H_.prototype.Jt=function(){return this.min().key},H_.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},H_.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},H_.prototype.he=function(){if(this.left.et())return H_.EMPTY;var t=this;return(t=(t=!t.left.le()&&!t.left.left.le()?t._e():t).copy(null,null,null,t.left.he(),null)).ue()},H_.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=!(r.left.et()||r.left.le()||r.left.left.le())?r._e():r).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=!((r=r.left.le()?r.fe():r).right.et()||r.right.le()||r.right.left.le())?r.de():r).key)){if(r.right.et())return H_.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.he())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.ue()},H_.prototype.le=function(){return this.color},H_.prototype.ue=function(){var t=this;return t=(t=(t=t.right.le()&&!t.left.le()?t.we():t).left.le()&&t.left.left.le()?t.fe():t).left.le()&&t.right.le()?t.Ee():t},H_.prototype._e=function(){var t=this.Ee();return t=t.right.left.le()?(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee():t},H_.prototype.de=function(){var t=this.Ee();return t=t.left.left.le()?(t=t.fe()).Ee():t},H_.prototype.we=function(){var t=this.copy(null,null,H_.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},H_.prototype.fe=function(){var t=this.copy(null,null,H_.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},H_.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},H_.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},H_.prototype.Ie=function(){if(this.le()&&this.left.le())throw wg();if(this.right.le())throw wg();var t=this.left.Ie();if(t!==this.right.Ie())throw wg();return t+(this.le()?0:1)},H_);function H_(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:H_.RED,this.left=null!=r?r:H_.EMPTY,this.right=null!=i?i:H_.EMPTY,this.size=this.left.size+1+this.right.size}function G_(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}function W_(t,e){this.H=t,this.root=e||z_.EMPTY}function K_(){this.size=0}z_.EMPTY=null,z_.RED=!0,z_.Ht=!1,z_.EMPTY=(Object.defineProperty(K_.prototype,"key",{get:function(){throw wg()},enumerable:!1,configurable:!0}),Object.defineProperty(K_.prototype,"value",{get:function(){throw wg()},enumerable:!1,configurable:!0}),Object.defineProperty(K_.prototype,"color",{get:function(){throw wg()},enumerable:!1,configurable:!0}),Object.defineProperty(K_.prototype,"left",{get:function(){throw wg()},enumerable:!1,configurable:!0}),Object.defineProperty(K_.prototype,"right",{get:function(){throw wg()},enumerable:!1,configurable:!0}),K_.prototype.copy=function(t,e,n,r,i){return this},K_.prototype.zt=function(t,e,n){return new z_(t,e)},K_.prototype.remove=function(t,e){return this},K_.prototype.et=function(){return!0},K_.prototype.Xt=function(t){return!1},K_.prototype.Zt=function(t){return!1},K_.prototype.Jt=function(){return null},K_.prototype.Yt=function(){return null},K_.prototype.le=function(){return!1},K_.prototype.Te=function(){return!0},K_.prototype.Ie=function(){return 0},new K_);var Q_=($_.prototype.has=function(t){return null!==this.data.get(t)},$_.prototype.first=function(){return this.data.Jt()},$_.prototype.last=function(){return this.data.Yt()},Object.defineProperty($_.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),$_.prototype.indexOf=function(t){return this.data.indexOf(t)},$_.prototype.forEach=function(n){this.data.Xt(function(t,e){return n(t),!1})},$_.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(0<=this.H(r.key,t[1]))return;e(r.key)}},$_.prototype.Ae=function(t,e){for(var n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},$_.prototype.Re=function(t){t=this.data.ee(t);return t.ce()?t.oe().key:null},$_.prototype.te=function(){return new Y_(this.data.te())},$_.prototype.ee=function(t){return new Y_(this.data.ee(t))},$_.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},$_.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},$_.prototype.et=function(){return this.data.et()},$_.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},$_.prototype.isEqual=function(t){if(!(t instanceof $_))return!1;if(this.size!==t.size)return!1;for(var e=this.data.te(),n=t.data.te();e.ce();){var r=e.oe().key,i=n.oe().key;if(0!==this.H(r,i))return!1}return!0},$_.prototype.it=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},$_.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},$_.prototype.copy=function(t){var e=new $_(this.H);return e.data=t,e},$_),Y_=(J_.prototype.oe=function(){return this.ye.oe().key},J_.prototype.ce=function(){return this.ye.ce()},J_),X_=new q_(nm.H);function J_(t){this.ye=t}function $_(t){this.H=t,this.data=new q_(this.H)}var Z_=new q_(nm.H);var tw=new q_(nm.H);var ew=new Q_(nm.H);function nw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ew,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var rw=new Q_(Sg);var iw=(_w.pe=function(t){return new _w(t.H)},_w.prototype.has=function(t){return null!=this.ge.get(t)},_w.prototype.get=function(t){return this.ge.get(t)},_w.prototype.first=function(){return this.Ve.Jt()},_w.prototype.last=function(){return this.Ve.Yt()},_w.prototype.et=function(){return this.Ve.et()},_w.prototype.indexOf=function(t){t=this.ge.get(t);return t?this.Ve.indexOf(t):-1},Object.defineProperty(_w.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),_w.prototype.forEach=function(n){this.Ve.Xt(function(t,e){return n(t),!1})},_w.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},_w.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},_w.prototype.isEqual=function(t){if(!(t instanceof _w))return!1;if(this.size!==t.size)return!1;for(var e=this.Ve.te(),n=t.Ve.te();e.ce();){var r=e.oe().key,i=n.oe().key;if(!r.isEqual(i))return!1}return!0},_w.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},_w.prototype.copy=function(t,e){var n=new _w;return n.H=this.H,n.ge=t,n.Ve=e,n},_w),ow=(bw.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);!n||0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):wg()},bw.prototype.ve=function(){var n=[];return this.be.Xt(function(t,e){n.push(e)}),n},bw),sw=(mw.Ne=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new mw(t,e,iw.pe(e),i,n,r,!0,!1)},Object.defineProperty(mw.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),mw.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Vb(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},mw),aw=(gw.Me=function(t,e){var n=new Map;return n.set(t,uw.Le(t,e)),new gw($g.min(),n,rw,X_,nw())},gw),uw=(yw.Le=function(t,e){return new yw(Ag.T,e,nw(),nw(),nw())},yw),cw=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},hw=function(t,e){this.targetId=t,this.je=e},lw=function(t,e,n,r){void 0===n&&(n=Ag.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},fw=(Object.defineProperty(vw.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(vw.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(vw.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(vw.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),vw.prototype.tn=function(t){0<t.l()&&(this.Ye=!0,this.He=t)},vw.prototype.en=function(){var n=nw(),r=nw(),i=nw();return this.ze.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:wg()}}),new uw(this.He,this.Je,n,r,i)},vw.prototype.nn=function(){this.Ye=!1,this.ze=Iw()},vw.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},vw.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},vw.prototype.on=function(){this.Ge+=1},vw.prototype.cn=function(){--this.Ge},vw.prototype.an=function(){this.Ye=!0,this.Je=!0},vw),pw=(dw.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof Bm?this.wn(r,t.We):t.We instanceof zm&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},dw.prototype.Tn=function(n){var r=this;this.In(n,function(t){var e=r.mn(t);switch(n.state){case 0:r.An(t)&&e.tn(n.resumeToken);break;case 1:e.cn(),e.Xe||e.nn(),e.tn(n.resumeToken);break;case 2:e.cn(),e.Xe||r.removeTarget(t);break;case 3:r.An(t)&&(e.an(),e.tn(n.resumeToken));break;case 4:r.An(t)&&(r.Rn(t),e.tn(n.resumeToken));break;default:wg()}})},dw.prototype.In=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.hn.forEach(function(t,e){r.An(e)&&n(e)})},dw.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,t=this.yn(e);t&&($m(t=t.target)?0===n?(t=new nm(t.path),this.En(e,t,new zm(t,$g.min()))):Ig(1===n):this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e)))},dw.prototype.Vn=function(r){var i=this,o=new Map;this.hn.forEach(function(t,e){var n=i.yn(e);n&&(t.Be&&$m(n.target)&&(n=new nm(n.target.path),null!==i.ln.get(n)||i.pn(e,n)||i.En(e,n,new zm(n,r))),t.Ze&&(o.set(e,t.en()),t.nn()))});var s=nw();this._n.forEach(function(t,e){var n=!0;e.Ae(function(t){t=i.yn(t);return!t||2===t.Ft||(n=!1)}),n&&(s=s.add(t))});var t=new aw(r,o,this.fn,this.ln,s);return this.ln=X_,this._n=ww(),this.fn=new Q_(Sg),t},dw.prototype.wn=function(t,e){var n;this.An(t)&&(n=this.pn(t,e.key)?2:0,this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t)))},dw.prototype.En=function(t,e,n){var r;this.An(t)&&(r=this.mn(t),this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n)))},dw.prototype.removeTarget=function(t){this.hn.delete(t)},dw.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},dw.prototype.on=function(t){this.mn(t).on()},dw.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new fw,this.hn.set(t,e)),e},dw.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Q_(Sg),this._n=this._n.zt(t,e)),e},dw.prototype.An=function(t){var e=null!==this.yn(t);return e||gg("WatchChangeAggregator","Detected inactive target",t),e},dw.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},dw.prototype.Rn=function(e){var n=this;this.hn.set(e,new fw),this.un.vn(e).forEach(function(t){n.En(e,t,null)})},dw.prototype.pn=function(t,e){return this.un.vn(t).has(e)},dw);function dw(t){this.un=t,this.hn=new Map,this.ln=X_,this._n=ww(),this.fn=new Q_(Sg)}function vw(){this.Ge=0,this.ze=Iw(),this.He=Ag.T,this.Je=!1,this.Ye=!0}function yw(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}function gw(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}function mw(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}function bw(){this.be=new q_(nm.H)}function _w(n){this.H=n?function(t,e){return n(t,e)||nm.H(t.key,e.key)}:function(t,e){return nm.H(t.key,e.key)},this.ge=Z_,this.Ve=new q_(this.H)}function ww(){return new q_(nm.H)}function Iw(){return new q_(nm.H)}var Ew={asc:"ASCENDING",desc:"DESCENDING"},Tw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sw=function(t,e){this.t=t,this.Bt=e};function Cw(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nw(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function Aw(t){return Ig(!!t),$g.K((t=vm(t),new Jg(t.seconds,t.nanos)))}function kw(t,e){return new Zg(["projects",t.projectId,"databases",t.database]).child("documents").child(e).rt()}function Pw(t){t=Zg.ot(t);return Ig(Xw(t)),t}function Ow(t,e){return kw(t.t,e.path)}function Rw(t,e){e=Pw(e);if(e.get(1)!==t.t.projectId)throw new Rg(Og.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.t.projectId);if(e.get(3)!==t.t.database)throw new Rg(Og.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.t.database);return new nm(Mw(e))}function xw(t,e){return kw(t.t,e)}function Dw(t){t=Pw(t);return 4===t.length?Zg.ct():Mw(t)}function Lw(t){return new Zg(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Mw(t){return Ig(4<t.length&&"documents"===t.get(4)),t.Y(5)}function jw(t,e,n){return{name:Ow(t,e),fields:n.proto.mapValue.fields}}function Fw(t,e,n){var r=Rw(t,e.name),t=Aw(e.updateTime),e=new Lm({mapValue:{fields:e.fields}});return new Bm(r,t,e,{hasCommittedMutations:!!n})}function Uw(t,e){var n,r,i;if(e instanceof E_)n={update:jw(t,e.key,e.value)};else if(e instanceof L_)n={delete:Ow(t,e.key)};else if(e instanceof T_)n={update:jw(t,e.key,e.data),updateMask:(i=e.Gt,r=[],i.fields.forEach(function(t){return r.push(t.rt())}),{fieldPaths:r})};else{if(!(e instanceof M_))return wg();n={verify:Ow(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Zb)return{fieldPath:t.field.rt(),setToServerValue:"REQUEST_TIME"};if(e instanceof t_)return{fieldPath:t.field.rt(),appendMissingElements:{values:e.elements}};if(e instanceof o_)return{fieldPath:t.field.rt(),removeAllFromArray:{values:e.elements}};if(e instanceof c_)return{fieldPath:t.field.rt(),increment:e.Ut};throw wg()})),e.jt.Wt||(n.currentDocument=void 0!==(i=e.jt).updateTime?{updateTime:(e=t,t=i.updateTime,Cw(e,t.j()))}:void 0!==i.exists?{exists:i.exists}:wg()),n}function Vw(e,t){var n=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?v_.updateTime(Aw(s.updateTime)):void 0!==s.exists?v_.exists(s.exists):v_.Kt():v_.Kt(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(t,e){var n,r=null;"setToServerValue"in e?(Ig("REQUEST_TIME"===e.setToServerValue),r=new Zb):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new t_(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new o_(n)):"increment"in e?r=new c_(t,e.increment):wg();e=em.lt(e.fieldPath);return new d_(e,r)}(e,t)}):[];if(t.update){t.update.name;var i=Rw(e,t.update.name),o=new Lm({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=(s=t.updateMask.fieldPaths||[],new fm(s.map(function(t){return em.lt(t)})));return new T_(i,o,s,n,r)}return new E_(i,o,n,r)}if(t.delete){r=Rw(e,t.delete);return new L_(r,n)}if(t.verify){t=Rw(e,t.verify);return new M_(t,n)}return wg()}function qw(t,e){return{documents:[xw(t,e.path)]}}function Bw(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=xw(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=xw(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(xm(t.value))return{unaryFilter:{field:Ww(t.field),op:"IS_NAN"}};if(Rm(t.value))return{unaryFilter:{field:Ww(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(xm(t.value))return{unaryFilter:{field:Ww(t.field),op:"IS_NOT_NAN"}};if(Rm(t.value))return{unaryFilter:{field:Ww(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ww(t.field),op:(e=t.op,Tw[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:Ww((t=t).field),direction:(t=t.dir,Ew[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.Bt||_m(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=Hw(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Hw(e.endAt)),n}function zw(t){var e=Dw(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(Ig(1===r),(a=n.from[0]).allDescendants?i=a.collectionId:e=e.child(a.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[Yw(t)]:void 0!==t.fieldFilter?[Qw(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):wg():[]}(n.where));var s=[],t=null,r=null,a=null;return Pb(e,i,s=n.orderBy?n.orderBy.map(function(t){return new Cb(Kw((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}):s,o,t=n.limit?_m(o="object"==typeof(o=n.limit)?o.value:o)?null:o:t,"F",r=n.startAt?Gw(n.startAt):r,a=n.endAt?Gw(n.endAt):a)}function Hw(t){return{before:t.before,values:t.position}}function Gw(t){var e=!!t.before,t=t.values||[];return new _b(t,e)}function Ww(t){return{fieldPath:t.rt()}}function Kw(t){return em.lt(t.fieldPath)}function Qw(t){return tb.create(Kw(t.fieldFilter.field),function(){switch(t.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return wg()}}(),t.fieldFilter.value)}function Yw(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Kw(t.unaryFilter.field);return tb.create(e,"==",{doubleValue:NaN});case"IS_NULL":e=Kw(t.unaryFilter.field);return tb.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=Kw(t.unaryFilter.field);return tb.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":n=Kw(t.unaryFilter.field);return tb.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return wg()}}function Xw(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}var Jw,$w=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},Zw=(uI.prototype.catch=function(t){return this.next(void 0,t)},uI.prototype.next=function(r,i){var o=this;return this.Nn&&wg(),this.Nn=!0,this.xn?this.error?this.$n(i,this.error):this.Fn(r,this.result):new uI(function(e,n){o.Dn=function(t){o.Fn(r,t).next(e,n)},o.Cn=function(t){o.$n(i,t).next(e,n)}})},uI.prototype.On=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},uI.prototype.kn=function(t){try{var e=t();return e instanceof uI?e:uI.resolve(e)}catch(t){return uI.reject(t)}},uI.prototype.Fn=function(t,e){return t?this.kn(function(){return t(e)}):uI.resolve(e)},uI.prototype.$n=function(t,e){return t?this.kn(function(){return t(e)}):uI.reject(e)},uI.resolve=function(n){return new uI(function(t,e){t(n)})},uI.reject=function(n){return new uI(function(t,e){e(n)})},uI.Mn=function(t){return new uI(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},uI.Ln=function(t){for(var n=uI.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?uI.resolve(t):e()})}(r[e]);return n},uI.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.Mn(i)},uI),tI=(aI.open=function(t,e,n,r){try{return new aI(e,t.transaction(r,n))}catch(t){throw new rI(e,t)}},Object.defineProperty(aI.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),aI.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(gg("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},aI.prototype.store=function(t){t=this.transaction.objectStore(t);return new hI(t)},aI),eI=(sI.delete=function(t){return gg("SimpleDb","Removing database:",t),fI(window.indexedDB.deleteDatabase(t)).On()},sI.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(sI.Wn())return!0;var t=po(),e=sI.Qn(t),n=0<e&&e<10,e=sI.jn(t),e=0<e&&e<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||e)},sI.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},sI.zn=function(t,e){return t.store(e)},sI.Qn=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},sI.jn=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},sI.prototype.Hn=function(o){return $i(this,void 0,void 0,function(){var e,i=this;return Zi(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(gg("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result;e(t)},r.onblocked=function(){n(new rI(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new Rg(Og.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new rI(o,t))},r.onupgradeneeded=function(t){gg("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.Un.Jn(e,r.transaction,t.oldVersion,i.version).next(function(){gg("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return i.Yn(t)}),this.db)]}})})},sI.prototype.Xn=function(e){this.Yn=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},sI.prototype.runTransaction=function(a,n,u,c){return $i(this,void 0,void 0,function(){var i,o,s,e;return Zi(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.Hn(a)];case 2:return s.db=t.sent(),e=tI.open(s.db,a,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),Zw.reject(t)}).On(),r={},n.catch(function(){}),[4,e.qn];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,gg("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},sI.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},sI),nI=(Object.defineProperty(oI.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(oI.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(oI.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),oI.prototype.done=function(){this.ts=!0},oI.prototype.ss=function(t){this.es=t},oI.prototype.delete=function(){return fI(this.Zn.delete())},oI),rI=(Xi(iI,Jw=Rg),iI);function iI(t,e){var n=this;return(n=Jw.call(this,Og.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function oI(t){this.Zn=t,this.ts=!1,this.es=null}function sI(t,e,n){this.name=t,this.version=e,this.Un=n,12.2===sI.Qn(po())&&mg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function aI(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.Bn=new $w,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){t.error?n.Bn.reject(new rI(e,t.error)):n.Bn.resolve()},this.transaction.onerror=function(t){t=dI(t.target.error);n.Bn.reject(new rI(e,t))}}function uI(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)},function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)})}function cI(t){return"IndexedDbTransactionError"===t.name}var hI=(lI.prototype.put=function(t,e){t=void 0!==e?(gg("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(gg("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return fI(t)},lI.prototype.add=function(t){return gg("SimpleDb","ADD",this.store.name,t,t),fI(this.store.add(t))},lI.prototype.get=function(e){var n=this;return fI(this.store.get(e)).next(function(t){return void 0===t&&(t=null),gg("SimpleDb","GET",n.store.name,e,t),t})},lI.prototype.delete=function(t){return gg("SimpleDb","DELETE",this.store.name,t),fI(this.store.delete(t))},lI.prototype.count=function(){return gg("SimpleDb","COUNT",this.store.name),fI(this.store.count())},lI.prototype.rs=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.os(e,function(t,e){n.push(e)}).next(function(){return n})},lI.prototype.cs=function(t,e){gg("SimpleDb","DELETE ALL",this.store.name);e=this.options(t,e);e.us=!1;e=this.cursor(e);return this.os(e,function(t,e,n){return n.delete()})},lI.prototype.hs=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.os(n,e)},lI.prototype.ls=function(r){var t=this.cursor({});return new Zw(function(n,e){t.onerror=function(t){t=dI(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},lI.prototype.os=function(t,i){var o=[];return new Zw(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new nI(n),(t=i(n.primaryKey,n.value,e))instanceof Zw&&(t=t.catch(function(t){return e.done(),Zw.reject(t)}),o.push(t)),e.xn?r():null===e.ns?n.continue():n.continue(e.ns)):r()}}).next(function(){return Zw.Mn(o)})},lI.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},lI.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},lI);function lI(t){this.store=t}function fI(t){return new Zw(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=dI(t.target.error);n(t)}})}var pI=!1;function dI(t){var e=eI.Qn(po());if(12.2<=e&&e<13){e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e)){var n=new Rg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return pI||(pI=!0,setTimeout(function(){throw n},0)),n}}return t}var vI=(yI.Ts=function(t,e,n,r,i){i=new yI(t,e,Date.now()+n,r,i);return i.start(n),i},yI.prototype.start=function(t){var e=this;this.Is=setTimeout(function(){return e.As()},t)},yI.prototype.Rs=function(){return this.As()},yI.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new Rg(Og.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},yI.prototype.As=function(){var e=this;this._s.Ps(function(){return null!==e.Is?(e.clearTimeout(),e.op().then(function(t){return e.Es.resolve(t)})):Promise.resolve()})},yI.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},yI);function yI(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new $w,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(t){})}function gI(t,e){if(mg("AsyncQueue",e+": "+t),cI(t))return new Rg(Og.UNAVAILABLE,e+": "+t);throw t}var mI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sn=(bI.prototype.gs=function(t){this.ys.push(t)},bI.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},bI);function bI(){this.ys=[]}function _I(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=wI(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return wI(e)}function wI(t){return t+""}function II(t){var e=t.length;if(Ig(2<=e),2===e)return Ig(""===t.charAt(0)&&""===t.charAt(1)),Zg.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&wg(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:wg()}o=s+2}return new Zg(r)}function EI(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var TI=function(t,e){this.seconds=t,this.nanoseconds=e};EI.store="owner",EI.key="owner";function SI(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}SI.store="mutationQueues",SI.keyPath="userId";function CI(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}CI.store="mutations",CI.keyPath="batchId",CI.userMutationsIndex="userMutationsIndex",CI.userMutationsKeyPath=["userId","batchId"];var NI=(AI.prefixForUser=function(t){return[t]},AI.prefixForPath=function(t,e){return[t,_I(e)]},AI.key=function(t,e,n){return[t,_I(e),n]},AI);function AI(){}NI.store="documentMutations",NI.PLACEHOLDER=new NI;function kI(t,e){this.path=t,this.readTime=e}function PI(t,e){this.path=t,this.version=e}var OI=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};OI.store="remoteDocuments",OI.readTimeIndex="readTimeIndex",OI.readTimeIndexPath="readTime",OI.collectionReadTimeIndex="collectionReadTimeIndex",OI.collectionReadTimeIndexPath=["parentPath","readTime"];function RI(t){this.byteSize=t}RI.store="remoteDocumentGlobal",RI.key="remoteDocumentGlobalKey";function xI(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}xI.store="targets",xI.keyPath="targetId",xI.queryTargetsIndexName="queryTargetsIndex",xI.queryTargetsKeyPath=["canonicalId","targetId"];var DI=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};DI.store="targetDocuments",DI.keyPath=["targetId","path"],DI.documentTargetsIndex="documentTargetsIndex",DI.documentTargetsKeyPath=["path","targetId"];function LI(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}LI.key="targetGlobalKey",LI.store="targetGlobal";function MI(t,e){this.collectionId=t,this.parent=e}MI.store="collectionParents",MI.keyPath=["collectionId","parent"];function jI(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}jI.store="clientMetadata",jI.keyPath="clientId";function FI(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}FI.store="bundles",FI.keyPath="bundleId";function UI(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}UI.store="namedQueries",UI.keyPath="name";var VI,qI=no(no([],no(no([],no(no([],no(no([],[SI.store,CI.store,NI.store,OI.store,xI.store,EI.store,LI.store,DI.store]),[jI.store])),[RI.store])),[MI.store])),[FI.store,UI.store]),BI=(Xi(zI,VI=Sn),zI);function zI(t,e){var n=this;return(n=VI.call(this)||this).ps=t,n.bs=e,n}function HI(t,e){return eI.zn(t.ps,e)}var GI=(YI.prototype.Ss=function(t,e,n){for(var r,i,o,s,a,u,c=n.Ds,h=0;h<this.mutations.length;h++){var l=this.mutations[h];l.key.isEqual(t)&&(r=l,i=e,o=c[h],l=u=a=s=void 0,e=r instanceof E_?(a=o,u=(s=r).value,l=A_(s.fieldTransforms,i,a.transformResults),u=P_(s.fieldTransforms,u,l),new Bm(s.key,a.version,u,{hasCommittedMutations:!0})):r instanceof T_?function(t,e,n){if(!g_(t.jt,e))return new Hm(t.key,n.version);e=N_(t,e,A_(t.fieldTransforms,e,n.transformResults));return new Bm(t.key,n.version,e,{hasCommittedMutations:!0})}(r,i,o):new zm(r.key,o.version,{hasCommittedMutations:!0}))}return e},YI.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(i=r[n]).key.isEqual(t)&&(e=m_(i,e,this.vs));for(var i,o=0,s=this.mutations;o<s.length;o++)(i=s[o]).key.isEqual(t)&&(e=m_(i,e,this.vs));return e},YI.prototype.xs=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.Cs(t.key,n.get(t.key));e&&(i=i.zt(t.key,e))}),i},YI.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},nw())},YI.prototype.isEqual=function(t){return this.batchId===t.batchId&&Cg(this.mutations,t.mutations,b_)&&Cg(this.baseMutations,t.baseMutations,b_)},YI),WI=(QI.from=function(t,e,n){Ig(t.mutations.length===n.length);for(var r=tw,i=t.mutations,o=0;o<i.length;o++)r=r.zt(i[o].key,n[o].version);return new QI(t,e,n,r)},QI),KI=function(t){this.Fs=t};function QI(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}function YI(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}function XI(t,e){if(e.document)return Fw(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=nm.Et(e.noDocument.path),r=eE(e.noDocument.readTime);return new zm(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){n=nm.Et(e.unknownDocument.path),r=eE(e.unknownDocument.version);return new Hm(n,r)}return wg()}function JI(t,e,n){var r=$I(n),n=e.key.path.X().it();if(e instanceof Bm){var i={name:Ow(o=t.Fs,(s=e).key),fields:s.bt().mapValue.fields,updateTime:Cw(o,s.version.j())},o=e.hasCommittedMutations;return new OI(null,null,i,o,r,n)}if(e instanceof zm){var s=e.key.path.it(),i=tE(e.version),o=e.hasCommittedMutations;return new OI(null,new kI(s,i),null,o,r,n)}if(e instanceof Hm){o=e.key.path.it(),e=tE(e.version);return new OI(new PI(o,e),null,null,!0,r,n)}return wg()}function $I(t){t=t.j();return[t.seconds,t.nanoseconds]}function ZI(t){t=new Jg(t[0],t[1]);return $g.K(t)}function tE(t){t=t.j();return new TI(t.seconds,t.nanoseconds)}function eE(t){t=new Jg(t.seconds,t.nanoseconds);return $g.K(t)}function nE(e,t){for(var n=(t.baseMutations||[]).map(function(t){return Vw(e.Fs,t)}),r=0;r<t.mutations.length-1;++r){var i,o=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i=t.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var s=t.mutations.map(function(t){return Vw(e.Fs,t)}),a=Jg.fromMillis(t.localWriteTimeMs);return new GI(t.batchId,a,n,s)}function rE(t){var e=eE(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?eE(t.lastLimboFreeSnapshotVersion):$g.min(),r=void 0!==t.query.documents?(Ig(1===(r=t.query).documents.length),Fb(Ob(Dw(r.documents[0])))):Fb(zw(t.query));return new Gb(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Ag.fromBase64String(t.resumeToken))}function iE(t,e){var n=tE(e.Ot),r=tE(e.lastLimboFreeSnapshotVersion),i=($m(e.target)?qw:Bw)(t.Fs,e.target),t=e.resumeToken.toBase64();return new xI(e.targetId,Xm(e.target),n,t,e.sequenceNumber,r,i)}function oE(t){var e=zw({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ub(e,e.limit,"L"):e}var sE=(aE.prototype.Os=function(t,e){return uE(t).get(e).next(function(t){if(t)return{id:(t=t).bundleId,createTime:eE(t.createTime),version:t.version}})},aE.prototype.ks=function(t,e){return uE(t).put({bundleId:(e=e).id,createTime:tE(Aw(e.createTime)),version:e.version})},aE.prototype.Ms=function(t,e){return cE(t).get(e).next(function(t){if(t)return{name:(t=t).name,query:oE(t.bundledQuery),readTime:eE(t.readTime)}})},aE.prototype.Ls=function(t,e){return cE(t).put({name:(e=e).name,readTime:tE(Aw(e.readTime)),bundledQuery:e.bundledQuery})},aE);function aE(){}function uE(t){return HI(t,FI.store)}function cE(t){return HI(t,UI.store)}var hE=(vE.prototype.qs=function(t,e){return this.Bs.add(e),Zw.resolve()},vE.prototype.Us=function(t,e){return Zw.resolve(this.Bs.getEntries(e))},vE),lE=(dE.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Q_(Zg.H),t=!r.has(n);return this.index[e]=r.add(n),t},dE.prototype.has=function(t){var e=t.tt(),t=t.X(),e=this.index[e];return e&&e.has(t)},dE.prototype.getEntries=function(t){return(this.index[t]||new Q_(Zg.H)).it()},dE),fE=(pE.prototype.qs=function(t,e){var n=this;if(this.Qs.has(e))return Zw.resolve();var r=e.tt(),i=e.X();t.gs(function(){n.Qs.add(e)});i={collectionId:r,parent:_I(i)};return yE(t).put(i)},pE.prototype.Us=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[Ng(i),""],!1,!0);return yE(t).rs(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(II(r.parent))}return o})},pE);function pE(){this.Qs=new lE}function dE(){this.index={}}function vE(){this.Bs=new lE}function yE(t){return HI(t,MI.store)}var gE={Ks:!1,Ws:0,js:0,Gs:0},mE=(bE.Ys=function(t){return new bE(t,bE.Xs,bE.Zs)},bE);function bE(t,e,n){this.zs=t,this.Hs=e,this.Js=n}function _E(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){if(e.code!==Og.FAILED_PRECONDITION||e.message!==mI)throw e;return gg("LocalStore","Unexpectedly lost primary lease"),[2]})})}mE.Xs=10,mE.Zs=1e3,mE.ti=new mE(41943040,mE.Xs,mE.Zs),mE.ei=new mE(-1,0,0);var wE=(EE.prototype.get=function(t){var e=this.ni(t),e=this.ii[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.si(o,t))return i}},EE.prototype.has=function(t){return void 0!==this.get(t)},EE.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},EE.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},EE.prototype.forEach=function(s){hm(this.ii,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},EE.prototype.et=function(){return lm(this.ii)},EE),W=(IE.prototype.ci=function(t){t=this.ri.get(t);return t?t.readTime:$g.min()},IE.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},IE.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},IE.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Zw.resolve(n.hi):this.fi(t,e)},IE.prototype.getEntries=function(t,e){return this.di(t,e)},IE.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},IE.prototype.ui=function(){},IE);function IE(){this.ri=new wE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.oi=!1}function EE(t,e){this.ni=t,this.si=e,this.ii={}}function TE(t,e,n){var r=t.store(CI.store),i=t.store(NI.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r.hs({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){Ig(1===s)}));for(var a=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=NI.key(e,h.key.path,n.batchId);o.push(i.delete(l)),a.push(h.key)}return Zw.Mn(o).next(function(){return a})}function SE(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw wg();e=t.noDocument}return JSON.stringify(e).length}var CE=(NE.mi=function(t,e,n,r){return Ig(""!==t.uid),new NE(t.m()?t.uid:"",e,n,r)},NE.prototype.Ai=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kE(t).hs({index:CI.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},NE.prototype.Ri=function(d,v,y,g){var m=this,b=PE(d),_=kE(d);return _.add({}).next(function(t){Ig("number"==typeof t);for(var e,n,r,i,o,s=new GI(t,v,y,g),a=(e=m.Qt,n=m.userId,i=(r=s).baseMutations.map(function(t){return Uw(e.Fs,t)}),o=r.mutations.map(function(t){return Uw(e.Fs,t)}),new CI(n,r.batchId,r.vs.toMillis(),i,o)),u=[],c=new Q_(function(t,e){return Sg(t.rt(),e.rt())}),h=0,l=g;h<l.length;h++){var f=l[h],p=NI.key(m.userId,f.key.path,t),c=c.add(f.key.path.X());u.push(_.put(a)),u.push(b.put(p,NI.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Ei.qs(d,t))}),d.gs(function(){m.Ii[t]=s.keys()}),Zw.Mn(u).next(function(){return s})})},NE.prototype.Pi=function(t,e){var n=this;return kE(t).get(e).next(function(t){return t?(Ig(t.userId===n.userId),nE(n.Qt,t)):null})},NE.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Zw.resolve(this.Ii[e]):this.Pi(t,e).next(function(t){if(t){t=t.keys();return n.Ii[e]=t}return null})},NE.prototype.gi=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return kE(t).hs({index:CI.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(Ig(e.batchId>=i),o=nE(r.Qt,e)),n.done()}).next(function(){return o})},NE.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return kE(t).hs({index:CI.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},NE.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kE(t).rs(CI.userMutationsIndex,n).next(function(t){return t.map(function(t){return nE(e.Qt,t)})})},NE.prototype.bi=function(o,s){var a=this,t=NI.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),u=[];return PE(o).hs({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=II(i);if(r===a.userId&&s.path.isEqual(i))return kE(o).get(t).next(function(t){if(!t)throw wg();Ig(t.userId===a.userId),u.push(nE(a.Qt,t))});n.done()}).next(function(){return u})},NE.prototype.vi=function(e,t){var s=this,a=new Q_(Sg),n=[];return t.forEach(function(o){var t=NI.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=PE(e).hs({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=II(i);r===s.userId&&o.path.isEqual(i)?a=a.add(t):n.done()});n.push(t)}),Zw.Mn(n).next(function(){return s.Si(e,a)})},NE.prototype.Di=function(t,e){var o=this,s=e.path,a=s.length+1,e=NI.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),u=new Q_(Sg);return PE(t).hs({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=II(i);r===o.userId&&s.nt(i)?i.length===a&&(u=u.add(t)):n.done()}).next(function(){return o.Si(t,u)})},NE.prototype.Si=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(kE(e).get(t).next(function(t){if(null===t)throw wg();Ig(t.userId===n.userId),r.push(nE(n.Qt,t))}))}),Zw.Mn(i).next(function(){return r})},NE.prototype.Ci=function(e,n){var r=this;return TE(e.ps,this.userId,n).next(function(t){return e.gs(function(){r.xi(n.batchId)}),Zw.forEach(t,function(t){return r.Ti.Ni(e,t)})})},NE.prototype.xi=function(t){delete this.Ii[t]},NE.prototype.$i=function(e){var i=this;return this.Ai(e).next(function(t){if(!t)return Zw.resolve();var t=IDBKeyRange.lowerBound(NI.prefixForUser(i.userId)),r=[];return PE(e).hs({range:t},function(t,e,n){t[0]===i.userId?(t=II(t[1]),r.push(t)):n.done()}).next(function(){Ig(0===r.length)})})},NE.prototype.Fi=function(t,e){return AE(t,this.userId,e)},NE.prototype.Oi=function(t){var e=this;return OE(t).get(this.userId).next(function(t){return t||new SI(e.userId,-1,"")})},NE);function NE(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}function AE(t,o,e){var e=NI.prefixForPath(o,e.path),s=e[1],e=IDBKeyRange.lowerBound(e),a=!1;return PE(t).hs({range:e,us:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function kE(t){return HI(t,CI.store)}function PE(t){return HI(t,NI.store)}function OE(t){return HI(t,SI.store)}var RE=(LE.prototype.next=function(){return this.ki+=2,this.ki},LE.Mi=function(){return new LE(0)},LE.Li=function(){return new LE(-1)},LE),xE=(DE.prototype.Bi=function(n){var r=this;return this.qi(n).next(function(t){var e=new RE(t.highestTargetId);return t.highestTargetId=e.next(),r.Ui(n,t).next(function(){return t.highestTargetId})})},DE.prototype.Qi=function(t){return this.qi(t).next(function(t){return $g.K(new Jg(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},DE.prototype.Ki=function(t){return this.qi(t).next(function(t){return t.highestListenSequenceNumber})},DE.prototype.Wi=function(e,n,r){var i=this;return this.qi(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.j()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Ui(e,t)})},DE.prototype.ji=function(e,n){var r=this;return this.Gi(e,n).next(function(){return r.qi(e).next(function(t){return t.targetCount+=1,r.zi(n,t),r.Ui(e,t)})})},DE.prototype.Hi=function(t,e){return this.Gi(t,e)},DE.prototype.Ji=function(e,t){var n=this;return this.Yi(e,t.targetId).next(function(){return ME(e).delete(t.targetId)}).next(function(){return n.qi(e)}).next(function(t){return Ig(0<t.targetCount),--t.targetCount,n.Ui(e,t)})},DE.prototype.Xi=function(n,r,i){var o=this,s=0,a=[];return ME(n).hs(function(t,e){e=rE(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,a.push(o.Ji(n,e)))}).next(function(){return Zw.Mn(a)}).next(function(){return s})},DE.prototype.In=function(t,n){return ME(t).hs(function(t,e){e=rE(e);n(e)})},DE.prototype.qi=function(t){return jE(t).get(LI.key).next(function(t){return Ig(null!==t),t})},DE.prototype.Ui=function(t,e){return jE(t).put(LI.key,e)},DE.prototype.Gi=function(t,e){return ME(t).put(iE(this.Qt,e))},DE.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},DE.prototype.Zi=function(t){return this.qi(t).next(function(t){return t.targetCount})},DE.prototype.tr=function(t,r){var e=Xm(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return ME(t).hs({range:e,index:xI.queryTargetsIndexName},function(t,e,n){e=rE(e);Jm(r,e.target)&&(i=e,n.done())}).next(function(){return i})},DE.prototype.er=function(n,t,r){var i=this,o=[],s=FE(n);return t.forEach(function(t){var e=_I(t.path);o.push(s.put(new DI(r,e))),o.push(i.Ti.nr(n,r,t))}),Zw.Mn(o)},DE.prototype.sr=function(n,t,r){var i=this,o=FE(n);return Zw.forEach(t,function(t){var e=_I(t.path);return Zw.Mn([o.delete([r,e]),i.Ti.ir(n,r,t)])})},DE.prototype.Yi=function(t,e){t=FE(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},DE.prototype.rr=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=FE(t),r=nw();return t.hs({range:e,us:!0},function(t,e,n){t=II(t[1]),t=new nm(t);r=r.add(t)}).next(function(){return r})},DE.prototype.Fi=function(t,e){var e=_I(e.path),e=IDBKeyRange.bound([e],[Ng(e)],!1,!0),i=0;return FE(t).hs({index:DI.documentTargetsIndex,us:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},DE.prototype.Sn=function(t,e){return ME(t).get(e).next(function(t){return t?rE(t):null})},DE);function DE(t,e){this.Ti=t,this.Qt=e}function LE(t){this.ki=t}function ME(t){return HI(t,xI.store)}function jE(t){return HI(t,LI.store)}function FE(t){return HI(t,DI.store)}function UE(t,e){var n=t[0],r=t[1],t=e[0],e=e[1],t=Sg(n,t);return 0===t?Sg(r,e):t}var VE=(KE.prototype.ur=function(){return++this.ar},KE.prototype.hr=function(t){var e=[t,this.ur()];this.buffer.size<this.cr?this.buffer=this.buffer.add(e):UE(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(KE.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),KE),qE=(WE.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},WE.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(WE.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),WE.prototype.wr=function(n){var t=this,e=this._r?3e5:6e4;gg("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.dr=this._s.Tr("lru_garbage_collection",e,function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:this.dr=null,this._r=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.Ir(this.lr)];case 2:return t.sent(),[3,7];case 3:return cI(e=t.sent())?(gg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,_E(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.wr(n)];case 8:return t.sent(),[2]}})})})},WE),BE=(GE.prototype.Ar=function(t,e){return this.mr.Rr(t).next(function(t){return Math.floor(e/100*t)})},GE.prototype.Pr=function(t,e){var n=this;if(0===e)return Zw.resolve(zg.q);var r=new VE(e);return this.mr.In(t,function(t){return r.hr(t.sequenceNumber)}).next(function(){return n.mr.yr(t,function(t){return r.hr(t)})}).next(function(){return r.maxValue})},GE.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},GE.prototype.gr=function(t,e){return this.mr.gr(t,e)},GE.prototype.Vr=function(e,n){var r=this;return-1===this.params.zs?(gg("LruGarbageCollector","Garbage collection skipped; disabled"),Zw.resolve(gE)):this.pr(e).next(function(t){return t<r.params.zs?(gg("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.zs),gE):r.br(e,n)})},GE.prototype.pr=function(t){return this.mr.pr(t)},GE.prototype.br=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Ar(e,this.params.Hs).next(function(t){return i=t>h.params.Js?(gg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.Js+" from "+t),h.params.Js):t,s=Date.now(),h.Pr(e,i)}).next(function(t){return r=t,a=Date.now(),h.Xi(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.gr(e,r)}).next(function(t){return c=Date.now(),yg()<=ss.DEBUG&&gg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),Zw.resolve({Ks:!0,Ws:i,js:o,Gs:t})})},GE),zE=(HE.prototype.Rr=function(t){var n=this.vr(t);return this.db.Sr().Zi(t).next(function(e){return n.next(function(t){return e+t})})},HE.prototype.vr=function(t){var e=0;return this.yr(t,function(t){e++}).next(function(){return e})},HE.prototype.In=function(t,e){return this.db.Sr().In(t,e)},HE.prototype.yr=function(t,n){return this.Dr(t,function(t,e){return n(e)})},HE.prototype.nr=function(t,e,n){return QE(t,n)},HE.prototype.ir=function(t,e,n){return QE(t,n)},HE.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},HE.prototype.Ni=QE,HE.prototype.Cr=function(t,e){return r=e,i=!1,OE(n=t).ls(function(t){return AE(n,t,r).next(function(t){return t&&(i=!0),Zw.resolve(!t)})}).next(function(){return i});var n,r,i},HE.prototype.gr=function(n,r){var i=this,o=this.db.$r().Nr(),s=[],a=0;return this.Dr(n,function(e,t){t<=r&&(t=i.Cr(n,e).next(function(t){if(!t)return a++,o._i(n,e).next(function(){return o.li(e),FE(n).delete([0,_I(e.path)])})}),s.push(t))}).next(function(){return Zw.Mn(s)}).next(function(){return o.apply(n)}).next(function(){return a})},HE.prototype.removeTarget=function(t,e){e=e.kt(t.bs);return this.db.Sr().Hi(t,e)},HE.prototype.Fr=QE,HE.prototype.Dr=function(t,r){var i,t=FE(t),o=zg.q;return t.hs({index:DI.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==zg.q&&r(new nm(II(i)),o),o=e,i=t):o=zg.q}).next(function(){o!==zg.q&&r(new nm(II(i)),o)})},HE.prototype.pr=function(t){return this.db.$r().Or(t)},HE);function HE(t,e){this.db=t,this.lr=new BE(this,e)}function GE(t,e){this.mr=t,this.params=e}function WE(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}function KE(t){this.cr=t,this.buffer=new Q_(UE),this.ar=0}function QE(t,e){return FE(t).put((t=t.bs,new DI(0,_I(e.path),t)))}var YE,XE=(ZE.prototype.ai=function(t,e,n){return eT(t).put(nT(e),n)},ZE.prototype.li=function(t,e){t=eT(t),e=nT(e);return t.delete(e)},ZE.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.kr(e,t)})},ZE.prototype._i=function(t,e){var n=this;return eT(t).get(nT(e)).next(function(t){return n.Mr(t)})},ZE.prototype.Lr=function(t,e){var n=this;return eT(t).get(nT(e)).next(function(t){var e=n.Mr(t);return e?{hi:e,size:SE(t)}:null})},ZE.prototype.getEntries=function(t,e){var n=this,r=X_;return this.Br(t,e,function(t,e){e=n.Mr(e);r=r.zt(t,e)}).next(function(){return r})},ZE.prototype.qr=function(t,e){var r=this,i=X_,o=new q_(nm.H);return this.Br(t,e,function(t,e){var n=r.Mr(e);o=n?(i=i.zt(t,n),o.zt(t,SE(e))):(i=i.zt(t,null),o.zt(t,0))}).next(function(){return{Ur:i,Qr:o}})},ZE.prototype.Br=function(t,e,i){if(e.et())return Zw.resolve();var n=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),o=e.te(),s=o.oe();return eT(t).hs({range:n},function(t,e,n){for(var r=nm.Et(t);s&&nm.H(s,r)<0;)i(s,null),s=o.oe();s&&s.isEqual(r)&&(i(s,e),s=o.ce()?o.oe():null),s?n.ss(s.path.it()):n.done()}).next(function(){for(;s;)i(s,null),s=o.ce()?o.oe():null})},ZE.prototype.Kr=function(t,r,e){var n,i=this,o=Z_,s=r.path.length+1,a={};return e.isEqual($g.min())?(n=r.path.it(),a.range=IDBKeyRange.lowerBound(n)):(n=r.path.it(),e=$I(e),a.range=IDBKeyRange.lowerBound([n,e],!0),a.index=OI.collectionReadTimeIndex),eT(t).hs(a,function(t,e,n){t.length===s&&(e=XI(i.Qt,e),r.path.nt(e.key.path)?e instanceof Bm&&zb(r,e)&&(o=o.zt(e.key,e)):n.done())}).next(function(){return o})},ZE.prototype.Nr=function(t){return new JE(this,!!t&&t.Wr)},ZE.prototype.Or=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},ZE.prototype.getMetadata=function(t){return tT(t).get(RI.key).next(function(t){return Ig(!!t),t})},ZE.prototype.kr=function(t,e){return tT(t).put(RI.key,e)},ZE.prototype.Mr=function(t){if(t){t=XI(this.Qt,t);return t instanceof zm&&t.version.isEqual($g.min())?null:t}return null},ZE),JE=(Xi($E,YE=W),$E.prototype.wi=function(i){var o=this,s=[],a=0,u=new Q_(function(t,e){return Sg(t.rt(),e.rt())});return this.ri.forEach(function(t,e){var n,r=o.Gr.get(t);e.hi?(n=JI(o.jr.Qt,e.hi,o.ci(t)),u=u.add(t.path.X()),e=SE(n),a+=e-r,s.push(o.jr.ai(i,t,n))):(a-=r,o.Wr?(r=JI(o.jr.Qt,new zm(t,$g.min()),o.ci(t)),s.push(o.jr.ai(i,t,r))):s.push(o.jr.li(i,t)))}),u.forEach(function(t){s.push(o.jr.Ei.qs(i,t))}),s.push(this.jr.updateMetadata(i,a)),Zw.Mn(s)},$E.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next(function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)})},$E.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next(function(t){var e=t.Ur;return t.Qr.forEach(function(t,e){n.Gr.set(t,e)}),e})},$E);function $E(t,e){var n=this;return(n=YE.call(this)||this).jr=t,n.Wr=e,n.Gr=new wE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function ZE(t,e){this.Qt=t,this.Ei=e}function tT(t){return HI(t,RI.store)}function eT(t){return HI(t,OI.store)}function nT(t){return t.path.it()}var rT=(iT.prototype.Jn=function(e,n,t,r){var i=this;Ig(t<r&&0<=t&&r<=11);var o=new tI("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(EI.store),(s=e).createObjectStore(SI.store,{keyPath:SI.keyPath}),s.createObjectStore(CI.store,{keyPath:CI.keyPath,autoIncrement:!0}).createIndex(CI.userMutationsIndex,CI.userMutationsKeyPath,{unique:!0}),s.createObjectStore(NI.store),oT(e),e.createObjectStore(OI.store));var s,a=Zw.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(DI.store),s.deleteObjectStore(xI.store),s.deleteObjectStore(LI.store),oT(e)),a=a.next(function(){return t=o.store(LI.store),e=new LI(0,0,$g.min().j(),0),t.put(LI.key,e);var t,e})),t<4&&4<=r&&(a=(a=0!==t?a.next(function(){return n=e,(r=o).store(CI.store).rs().next(function(t){n.deleteObjectStore(CI.store),n.createObjectStore(CI.store,{keyPath:CI.keyPath,autoIncrement:!0}).createIndex(CI.userMutationsIndex,CI.userMutationsKeyPath,{unique:!0});var e=r.store(CI.store),t=t.map(function(t){return e.put(t)});return Zw.Mn(t)});var n,r}):a).next(function(){e.createObjectStore(jI.store,{keyPath:jI.keyPath})})),t<5&&5<=r&&(a=a.next(function(){return i.zr(o)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(RI.store),i.Hr(o)})),t<7&&7<=r&&(a=a.next(function(){return i.Jr(o)})),t<8&&8<=r&&(a=a.next(function(){return i.Yr(e,o)})),t<9&&9<=r&&(a=a.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(OI.store)).createIndex(OI.readTimeIndex,OI.readTimeIndexPath,{unique:!1}),t.createIndex(OI.collectionReadTimeIndex,OI.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(a=a.next(function(){return i.Xr(o)})),a=t<11&&11<=r?a.next(function(){e.createObjectStore(FI.store,{keyPath:FI.keyPath}),e.createObjectStore(UI.store,{keyPath:UI.keyPath})}):a},iT.prototype.Hr=function(e){var n=0;return e.store(OI.store).hs(function(t,e){n+=SE(e)}).next(function(){var t=new RI(n);return e.store(RI.store).put(RI.key,t)})},iT.prototype.zr=function(n){var r=this,t=n.store(SI.store),i=n.store(CI.store);return t.rs().next(function(t){return Zw.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.rs(CI.userMutationsIndex,t).next(function(t){return Zw.forEach(t,function(t){Ig(t.userId===e.userId);t=nE(r.Qt,t);return TE(n,e.userId,t).next(function(){})})})})})},iT.prototype.Jr=function(t){var o=t.store(DI.store),e=t.store(OI.store);return t.store(LI.store).get(LI.key).next(function(r){var i=[];return e.hs(function(t,e){var n=new Zg(t),t=[0,_I(n)];i.push(o.get(t).next(function(t){return t?Zw.resolve():o.put(new DI(0,_I(n),r.highestListenSequenceNumber))}))}).next(function(){return Zw.Mn(i)})})},iT.prototype.Yr=function(t,e){t.createObjectStore(MI.store,{keyPath:MI.keyPath});function r(t){if(i.add(t)){var e=t.tt(),t=t.X();return n.put({collectionId:e,parent:_I(t)})}}var n=e.store(MI.store),i=new lE;return e.store(OI.store).hs({us:!0},function(t,e){t=new Zg(t);return r(t.X())}).next(function(){return e.store(NI.store).hs({us:!0},function(t,e){t[0];var n=t[1],n=(t[2],II(n));return r(n.X())})})},iT.prototype.Xr=function(t){var n=this,r=t.store(xI.store);return r.hs(function(t,e){e=rE(e),e=iE(n.Qt,e);return r.put(e)})},iT);function iT(t){this.Qt=t}function oT(t){t.createObjectStore(DI.store,{keyPath:DI.keyPath}).createIndex(DI.documentTargetsIndex,DI.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(xI.store,{keyPath:xI.keyPath}).createIndex(xI.queryTargetsIndexName,xI.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(LI.store)}var sT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",aT=(uT.prototype.start=function(){var e=this;return this.To().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Rg(Og.FAILED_PRECONDITION,sT);return e.Io(),e.mo(),e.Ao(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e._o.Ki(t)})}).then(function(t){e.so=new zg(t,e.eo)}).then(function(){e.io=!0}).catch(function(t){return e.lo&&e.lo.close(),Promise.reject(t)})},uT.prototype.Ro=function(n){var t=this;return this.uo=function(e){return $i(t,void 0,void 0,function(){return Zi(this,function(t){return this.Er?[2,n(e)]:[2]})})},n(this.isPrimary)},uT.prototype.Po=function(n){var t=this;this.lo.Xn(function(e){return $i(t,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},uT.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return $i(e,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},uT.prototype.To=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return hT(e).put(new jI(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.Vo(e).next(function(t){t||(n.isPrimary=!1,n.Zr.po(function(){return n.uo(!1)}))})}).next(function(){return n.bo(e)}).next(function(t){return n.isPrimary&&!t?n.vo(e).next(function(){return!1}):!!t&&n.So(e).next(function(){return!0})})}).catch(function(t){if(cI(t))return gg("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return gg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Zr.po(function(){return n.uo(t)}),n.isPrimary=t})},uT.prototype.Vo=function(t){var e=this;return cT(t).get(EI.key).next(function(t){return Zw.resolve(e.Do(t))})},uT.prototype.Co=function(t){return hT(t).delete(this.clientId)},uT.prototype.xo=function(){return $i(this,void 0,void 0,function(){var e,n,r,i,o=this;return Zi(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=HI(t,jI.store);return r.rs().next(function(t){var e=o.$o(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return Zw.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Eo)for(n=0,r=e;n<r.length;n++)i=r[n],this.Eo.removeItem(this.Fo(i.clientId));t.label=2;case 2:return[2]}})})},uT.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},uT.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},uT.prototype.bo=function(e){var r=this;return this.no?Zw.resolve(!0):cT(e).get(EI.key).next(function(t){if(null!==t&&r.No(t.leaseTimestampMs,5e3)&&!r.Oo(t.ownerId)){if(r.Do(t)&&r.networkEnabled)return!0;if(!r.Do(t)){if(!t.allowTabSynchronization)throw new Rg(Og.FAILED_PRECONDITION,sT);return!1}}return!(!r.networkEnabled||!r.inForeground)||hT(e).rs().next(function(t){return void 0===r.$o(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&gg("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},uT.prototype.ko=function(){return $i(this,void 0,void 0,function(){var n=this;return Zi(this,function(t){switch(t.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[EI.store,jI.store],function(t){var e=new BI(t,zg.q);return n.vo(e).next(function(){return n.Co(e)})})];case 1:return t.sent(),this.lo.close(),this.qo(),[2]}})})},uT.prototype.$o=function(t,e){var n=this;return t.filter(function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)})},uT.prototype.Uo=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return hT(t).rs().next(function(t){return e.$o(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(uT.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),uT.prototype.Qo=function(t){return CE.mi(t,this.Qt,this.Ei,this.Ti)},uT.prototype.Sr=function(){return this._o},uT.prototype.$r=function(){return this.fo},uT.prototype.Ko=function(){return this.Ei},uT.prototype.Wo=function(){return this.wo},uT.prototype.runTransaction=function(e,n,r){var i=this;gg("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.lo.runTransaction(e,t,qI,function(t){return o=new BI(t,i.so?i.so.next():zg.q),"readwrite-primary"===n?i.Vo(o).next(function(t){return!!t||i.bo(o)}).next(function(t){if(!t)throw mg("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new Rg(Og.FAILED_PRECONDITION,mI);return r(o)}).next(function(t){return i.So(o).next(function(){return t})}):i.jo(o).next(function(){return r(o)})}).then(function(t){return o.Vs(),t})},uT.prototype.jo=function(t){var e=this;return cT(t).get(EI.key).next(function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Rg(Og.FAILED_PRECONDITION,sT)})},uT.prototype.So=function(t){var e=new EI(this.clientId,this.allowTabSynchronization,Date.now());return cT(t).put(EI.key,e)},uT.Kn=function(){return eI.Kn()},uT.prototype.vo=function(t){var e=this,n=cT(t);return n.get(EI.key).next(function(t){return e.Do(t)?(gg("IndexedDbPersistence","Releasing primary lease."),n.delete(EI.key)):Zw.resolve()})},uT.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(mg("Detected an update time that is in the future: "+t+" > "+n),1))},uT.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground="visible"===t.document.visibilityState,t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},uT.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},uT.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps(function(){return e.ko()})},this.window.addEventListener("unload",this.ro))},uT.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},uT.prototype.Oo=function(t){try{var e=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return gg("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return mg("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},uT.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){mg("Failed to set zombie client id.",t)}},uT.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},uT.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},uT);function uT(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Zr=i,this.window=o,this.document=s,this.eo=u,this.no=c,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!uT.Kn())throw new Rg(Og.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new zE(this,r),this.ho=e+"main",this.Qt=new KI(a),this.lo=new eI(this.ho,11,new rT(this.Qt)),this._o=new xE(this.Ti,this.Qt),this.Ei=new fE,this.fo=(e=this.Qt,a=this.Ei,new XE(e,a)),this.wo=new sE,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===c&&mg("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function cT(t){return HI(t,EI.store)}function hT(t){return HI(t,jI.store)}function lT(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function fT(t,e){this.progress=t,this.Go=e}var pT=(_T.prototype.Ho=function(e,n){var r=this;return this.zo.bi(e,n).next(function(t){return r.Jo(e,n,t)})},_T.prototype.Jo=function(t,r,i){return this.fo._i(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].Cs(r,t);return t})},_T.prototype.Yo=function(t,e,i){var o=X_;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].Cs(t,e);o=o.zt(t,e)}),o},_T.prototype.Xo=function(e,t){var n=this;return this.fo.getEntries(e,t).next(function(t){return n.Zo(e,t)})},_T.prototype.Zo=function(e,r){var i=this;return this.zo.vi(e,r).next(function(t){var t=i.Yo(e,r,t),n=X_;return t.forEach(function(t,e){e=e||new zm(t,$g.min()),n=n.zt(t,e)}),n})},_T.prototype.Kr=function(t,e,n){return r=e,nm.wt(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.tc(t,e.path):Mb(e)?this.ec(t,e,n):this.nc(t,e,n);var r},_T.prototype.tc=function(t,e){return this.Ho(t,new nm(e)).next(function(t){var e=Z_;return e=t instanceof Bm?e.zt(t.key,t):e})},_T.prototype.ec=function(n,r,i){var o=this,s=r.collectionGroup,a=Z_;return this.Ei.Us(n,s).next(function(t){return Zw.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new kb(t,null,e.xt.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.nc(n,e,i).next(function(t){t.forEach(function(t,e){a=a.zt(t,e)})})}).next(function(){return a})})},_T.prototype.nc=function(e,n,t){var u,c,r=this;return this.fo.Kr(e,n,t).next(function(t){return u=t,r.zo.Di(e,n)}).next(function(t){return c=t,r.sc(e,c,u).next(function(t){u=t;for(var e=0,n=c;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,s=m_(s,u.get(a),r.vs);u=s instanceof Bm?u.zt(a,s):u.remove(a)}})}).next(function(){return u.forEach(function(t,e){zb(n,e)||(u=u.remove(t))}),u})},_T.prototype.sc=function(t,e,n){for(var r=nw(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof T_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Bm&&(c=c.zt(t,e))}),c})},_T),dT=(bT.oc=function(t,e){for(var n=nw(),r=nw(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new bT(t,e.fromCache,n,r)},bT),vT=(mT.prototype.cc=function(t){this.ac=t},mT.prototype.Kr=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.xt.length||1===r.xt.length&&r.xt[0].field.ut())||i.isEqual($g.min())?this.uc(e,r):this.ac.Xo(e,o).next(function(t){var n=s.hc(r,t);return(Rb(r)||xb(r))&&s.lc(r.limitType,n,o,i)?s.uc(e,r):(yg()<=ss.DEBUG&&gg("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bb(r)),s.ac.Kr(e,r,i).next(function(e){return n.forEach(function(t){e=e.zt(t.key,t)}),e}))})},mT.prototype.hc=function(n,t){var r=new Q_(Hb(n));return t.forEach(function(t,e){e instanceof Bm&&zb(n,e)&&(r=r.add(e))}),r},mT.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version._(r))},mT.prototype.uc=function(t,e){return yg()<=ss.DEBUG&&gg("QueryEngine","Using full collection scan to execute query:",Bb(e)),this.ac.Kr(t,e,$g.min())},mT),yT=(gT.prototype.Ir=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Vr(t,n.fc)})},gT);function gT(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new q_(Sg),this.dc=new wE(Xm,Jm),this.wc=$g.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new pT(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}function mT(){}function bT(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}function _T(t,e,n){this.fo=t,this.zo=e,this.Ei=n}function wT(t,e,n,r){return new yT(t,e,n,r)}function IT(i,o){return $i(this,void 0,void 0,function(){var e,n,m,r;return Zi(this,function(t){switch(t.label){case 0:return n=(e=i).zo,m=e.Tc,[4,e.persistence.runTransaction("Handle user change","readonly",function(y){var g;return e.zo.pi(y).next(function(t){return g=t,n=e.persistence.Qo(o),m=new pT(e.Ec,n,e.persistence.Ko()),n.pi(y)}).next(function(t){for(var e=[],n=[],r=nw(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Xo(y,r).next(function(t){return{Ic:t,mc:e,Ac:n}})})})];case 1:return r=t.sent(),[2,(e.zo=n,e.Tc=m,e._c.cc(e.Tc),r)]}})})}function ET(t,h){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,a,u=h.batch.keys(),c=l.Ec.Nr({Wr:!0});return e=l,r=t,o=c,s=(i=h).batch,n=s.keys(),a=Zw.resolve(),n.forEach(function(n){a=a.next(function(){return o._i(r,n)}).next(function(t){var e=t,t=i.$s.get(n);Ig(null!==t),(!e||e.version._(t)<0)&&(e=s.Ss(n,e,i))&&o.ai(e,i.Ns)})}),a.next(function(){return e.zo.Ci(r,s)}).next(function(){return c.apply(t)}).next(function(){return l.zo.$i(t)}).next(function(){return l.Tc.Xo(t,u)})})}function TT(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e._o.Qi(t)})}function ST(t,r){var u=t,c=r.Ot,h=u.fc;return u.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=u.Ec.Nr({Wr:!0});h=u.fc;var a=[];r.$e.forEach(function(t,e){var n,r,i,o=h.get(e);o&&(a.push(u._o.sr(s,t.Qe,e).next(function(){return u._o.er(s,t.qe,e)})),0<(i=t.resumeToken).l()&&(n=o.Mt(i,c).kt(s.bs),h=h.zt(e,n),r=o,i=t,Ig(0<(o=n).resumeToken.l()),(0===r.resumeToken.l()||3e8<=o.Ot.W()-r.Ot.W()||0<i.qe.size+i.Ue.size+i.Qe.size)&&a.push(u._o.Hi(s,n))))});var e,n=X_;return r.Oe.forEach(function(t,e){r.ke.has(t)&&a.push(u.persistence.Ti.Fr(s,t))}),a.push(CT(s,t,r.Oe,c,void 0).next(function(t){n=t})),c.isEqual($g.min())||(e=u._o.Qi(s).next(function(t){return u._o.Wi(s,s.bs,c)}),a.push(e)),Zw.Mn(a).next(function(){return t.apply(s)}).next(function(){return u.Tc.Zo(s,n)})}).then(function(t){return u.fc=h,t})}function CT(t,s,e,a,u){var n=nw();return e.forEach(function(t){return n=n.add(t)}),s.getEntries(t,n).next(function(i){var o=X_;return e.forEach(function(t,e){var n=i.get(t),r=(null==u?void 0:u.get(t))||a;e instanceof zm&&e.version.isEqual($g.min())?(s.li(t,r),o=o.zt(t,e)):null==n||0<e.version._(n.version)||0===e.version._(n.version)&&n.hasPendingWrites?(s.ai(e,r),o=o.zt(t,e)):gg("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o})}function NT(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i._o.tr(e,r).next(function(t){return t?(n=t,Zw.resolve(n)):i._o.Bi(e).next(function(t){return n=new Gb(r,t,0,e.bs),i._o.ji(e,n).next(function(){return n})})})}).then(function(t){var e=i.fc.get(t.targetId);return(null===e||0<t.Ot._(e.Ot))&&(i.fc=i.fc.zt(t.targetId,t),i.dc.set(r,t.targetId)),t})}function AT(i,o,s){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:n=(e=i).fc.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Ti.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!cI(r=t.sent()))throw r;return gg("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.fc=e.fc.remove(o),e.dc.delete(n.target),[2]}})})}function kT(t,o,s){var a=t,u=$g.min(),c=nw();return a.persistence.runTransaction("Execute query","readonly",function(e){return t=a,n=e,r=Fb(o),(void 0!==(t=(i=t).dc.get(r))?Zw.resolve(i.fc.get(t)):i._o.tr(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,a._o.rr(e,t.targetId).next(function(t){c=t})}).next(function(){return a._c.Kr(e,o,s?u:$g.min(),s?c:nw())}).next(function(t){return{documents:t,Rc:c}});var t,n,r,i})}function PT(t,e){var n=t,r=n._o,t=n.fc.get(e);return t?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Sn(t,e).next(function(t){return t?t.target:null})})}function OT(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.Ec,n=t,t=s.wc,r=e,i=X_,o=$I(t),t=eT(n),n=IDBKeyRange.lowerBound(o,!0),t.hs({index:OI.readTimeIndex,range:n},function(t,e){var n=XI(r.Qt,e);i=i.zt(n.key,n),o=e.readTime}).next(function(){return{Go:i,readTime:ZI(o)}});var e,n,r,i,o}).then(function(t){var e=t.Go,t=t.readTime;return s.wc=t,e})}function RT(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=eT(t),r=$g.min(),t.hs({index:OI.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=ZI(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.wc=t})]})})}var xT,DT,LT=(tS.prototype.Os=function(t,e){return Zw.resolve(this.Vc.get(e))},tS.prototype.ks=function(t,e){return this.Vc.set(e.id,{id:e.id,version:e.version,createTime:Aw(e.createTime)}),Zw.resolve()},tS.prototype.Ms=function(t,e){return Zw.resolve(this.bc.get(e))},tS.prototype.Ls=function(t,e){return this.bc.set(e.name,{name:(e=e).name,query:oE(e.bundledQuery),readTime:Aw(e.readTime)}),Zw.resolve()},tS),MT=(ZT.prototype.et=function(){return this.vc.et()},ZT.prototype.nr=function(t,e){e=new jT(t,e);this.vc=this.vc.add(e),this.Dc=this.Dc.add(e)},ZT.prototype.xc=function(t,e){var n=this;t.forEach(function(t){return n.nr(t,e)})},ZT.prototype.ir=function(t,e){this.Nc(new jT(t,e))},ZT.prototype.$c=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},ZT.prototype.Fc=function(t){var e=this,n=new nm(new Zg([])),r=new jT(n,t),t=new jT(n,t+1),i=[];return this.Dc.me([r,t],function(t){e.Nc(t),i.push(t.key)}),i},ZT.prototype.Oc=function(){var e=this;this.vc.forEach(function(t){return e.Nc(t)})},ZT.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},ZT.prototype.kc=function(t){var e=new nm(new Zg([])),n=new jT(e,t),t=new jT(e,t+1),r=nw();return this.Dc.me([n,t],function(t){r=r.add(t.key)}),r},ZT.prototype.Fi=function(t){var e=new jT(t,0),e=this.vc.Re(e);return null!==e&&t.isEqual(e.key)},ZT),jT=($T.Sc=function(t,e){return nm.H(t.key,e.key)||Sg(t.Mc,e.Mc)},$T.Cc=function(t,e){return Sg(t.Mc,e.Mc)||nm.H(t.key,e.key)},$T),FT=(JT.prototype.Ai=function(t){return Zw.resolve(0===this.zo.length)},JT.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++,0<this.zo.length&&this.zo[this.zo.length-1];n=new GI(i,e,n,r);this.zo.push(n);for(var o=0,s=r;o<s.length;o++){var a=s[o];this.Bc=this.Bc.add(new jT(a.key,i)),this.Ei.qs(t,a.key.path.X())}return Zw.resolve(n)},JT.prototype.Pi=function(t,e){return Zw.resolve(this.qc(e))},JT.prototype.gi=function(t,e){e+=1,e=this.Uc(e),e=e<0?0:e;return Zw.resolve(this.zo.length>e?this.zo[e]:null)},JT.prototype.Vi=function(){return Zw.resolve(0===this.zo.length?-1:this.Lc-1)},JT.prototype.pi=function(t){return Zw.resolve(this.zo.slice())},JT.prototype.bi=function(t,e){var n=this,r=new jT(e,0),e=new jT(e,Number.POSITIVE_INFINITY),i=[];return this.Bc.me([r,e],function(t){t=n.qc(t.Mc);i.push(t)}),Zw.resolve(i)},JT.prototype.vi=function(t,e){var n=this,r=new Q_(Sg);return e.forEach(function(t){var e=new jT(t,0),t=new jT(t,Number.POSITIVE_INFINITY);n.Bc.me([e,t],function(t){r=r.add(t.Mc)})}),Zw.resolve(this.Qc(r))},JT.prototype.Di=function(t,e){var n=e.path,r=n.length+1,e=n;nm.wt(e)||(e=e.child(""));var e=new jT(new nm(e),0),i=new Q_(Sg);return this.Bc.Ae(function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(i=i.add(t.Mc)),!0)},e),Zw.resolve(this.Qc(i))},JT.prototype.Qc=function(t){var e=this,n=[];return t.forEach(function(t){t=e.qc(t);null!==t&&n.push(t)}),n},JT.prototype.Ci=function(n,r){var i=this;Ig(0===this.Kc(r.batchId,"removed")),this.zo.shift();var o=this.Bc;return Zw.forEach(r.mutations,function(t){var e=new jT(t.key,r.batchId);return o=o.delete(e),i.Ti.Ni(n,t.key)}).next(function(){i.Bc=o})},JT.prototype.xi=function(t){},JT.prototype.Fi=function(t,e){var n=new jT(e,0),n=this.Bc.Re(n);return Zw.resolve(e.isEqual(n&&n.key))},JT.prototype.$i=function(t){return this.zo.length,Zw.resolve()},JT.prototype.Kc=function(t,e){return this.Uc(t)},JT.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},JT.prototype.qc=function(t){t=this.Uc(t);return t<0||t>=this.zo.length?null:this.zo[t]},JT),UT=(XT.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:i,readTime:n}),this.size+=i-o,this.Ei.qs(t,r.path.X())},XT.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},XT.prototype._i=function(t,e){e=this.docs.get(e);return Zw.resolve(e?e.hi:null)},XT.prototype.getEntries=function(t,e){var n=this,r=X_;return e.forEach(function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)}),Zw.resolve(r)},XT.prototype.Kr=function(t,e,n){for(var r=Z_,i=new nm(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.key,u=s.value,s=u.hi,u=u.readTime;if(!e.path.nt(a.path))break;u._(n)<=0||s instanceof Bm&&zb(e,s)&&(r=r.zt(s.key,s))}return Zw.resolve(r)},XT.prototype.jc=function(t,e){return Zw.forEach(this.docs,function(t){return e(t)})},XT.prototype.Nr=function(t){return new VT(this)},XT.prototype.Or=function(t){return Zw.resolve(this.size)},XT),VT=(Xi(YT,DT=W),YT.prototype.wi=function(n){var r=this,i=[];return this.ri.forEach(function(t,e){e&&e.hi?i.push(r.jr.ai(n,e.hi,r.ci(t))):r.jr.li(t)}),Zw.Mn(i)},YT.prototype.fi=function(t,e){return this.jr._i(t,e)},YT.prototype.di=function(t,e){return this.jr.getEntries(t,e)},YT),qT=(QT.prototype.In=function(t,n){return this.Gc.forEach(function(t,e){return n(e)}),Zw.resolve()},QT.prototype.Qi=function(t){return Zw.resolve(this.lastRemoteSnapshotVersion)},QT.prototype.Ki=function(t){return Zw.resolve(this.zc)},QT.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Zw.resolve(this.highestTargetId)},QT.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Zw.resolve()},QT.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new RE(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},QT.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Zw.resolve()},QT.prototype.Hi=function(t,e){return this.Gi(e),Zw.resolve()},QT.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),--this.targetCount,Zw.resolve()},QT.prototype.Xi=function(n,r,i){var o=this,s=0,a=[];return this.Gc.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.Gc.delete(t),a.push(o.Yi(n,e.targetId)),s++)}),Zw.Mn(a).next(function(){return s})},QT.prototype.Zi=function(t){return Zw.resolve(this.targetCount)},QT.prototype.tr=function(t,e){e=this.Gc.get(e)||null;return Zw.resolve(e)},QT.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Zw.resolve()},QT.prototype.sr=function(e,t,n){this.Hc.$c(t,n);var r=this.persistence.Ti,i=[];return r&&t.forEach(function(t){i.push(r.Ni(e,t))}),Zw.Mn(i)},QT.prototype.Yi=function(t,e){return this.Hc.Fc(e),Zw.resolve()},QT.prototype.rr=function(t,e){e=this.Hc.kc(e);return Zw.resolve(e)},QT.prototype.Fi=function(t,e){return Zw.resolve(this.Hc.Fi(e))},QT),BT=(KT.prototype.start=function(){return Promise.resolve()},KT.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(KT.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),KT.prototype.Po=function(){},KT.prototype.yo=function(){},KT.prototype.Ko=function(){return this.Ei},KT.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new FT(this.Ei,this.Ti),this.Yc[t.A()]=e),e},KT.prototype.Sr=function(){return this._o},KT.prototype.$r=function(){return this.fo},KT.prototype.Wo=function(){return this.wo},KT.prototype.runTransaction=function(t,e,n){var r=this;gg("MemoryPersistence","Starting transaction:",t);var i=new zT(this.so.next());return this.Ti.Zc(),n(i).next(function(t){return r.Ti.ta(i).next(function(){return t})}).On().then(function(t){return i.Vs(),t})},KT.prototype.ea=function(e,n){return Zw.Ln(Object.values(this.Yc).map(function(t){return function(){return t.Fi(e,n)}}))},KT),zT=(Xi(WT,xT=Sn),WT),HT=(GT.ia=function(t){return new GT(t)},Object.defineProperty(GT.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw wg()},enumerable:!1,configurable:!0}),GT.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Zw.resolve()},GT.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Zw.resolve()},GT.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Zw.resolve()},GT.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach(function(t){return n.ra.add(t.toString())});var r=this.persistence.Sr();return r.rr(t,e.targetId).next(function(t){t.forEach(function(t){return n.ra.add(t.toString())})}).next(function(){return r.Ji(t,e)})},GT.prototype.Zc=function(){this.sa=new Set},GT.prototype.ta=function(n){var r=this,i=this.persistence.$r().Nr();return Zw.forEach(this.ra,function(t){var e=nm._t(t);return r.oa(n,e).next(function(t){t||i.li(e)})}).next(function(){return r.sa=null,i.apply(n)})},GT.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next(function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())})},GT.prototype.Xc=function(t){return 0},GT.prototype.oa=function(t,e){var n=this;return Zw.Ln([function(){return Zw.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},GT);function GT(t){this.persistence=t,this.na=new MT,this.sa=null}function WT(t){var e=this;return(e=xT.call(this)||this).bs=t,e}function KT(t,e){var n=this;this.Yc={},this.so=new zg(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new qT(this),this.Ei=new hE,this.fo=(t=this.Ei,new UT(t,function(t){return n.Ti.Xc(t)})),this.Qt=new KI(e),this.wo=new LT(this.Qt)}function QT(t){this.persistence=t,this.Gc=new wE(Xm,Jm),this.lastRemoteSnapshotVersion=$g.min(),this.highestTargetId=0,this.zc=0,this.Hc=new MT,this.targetCount=0,this.Jc=RE.Mi()}function YT(t){var e=this;return(e=DT.call(this)||this).jr=t,e}function XT(t,e){this.Ei=t,this.Wc=e,this.docs=new q_(nm.H),this.size=0}function JT(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Q_(jT.Sc)}function $T(t,e){this.key=t,this.Mc=e}function ZT(){this.vc=new Q_(jT.Sc),this.Dc=new Q_(jT.Cc)}function tS(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}function eS(t,e){return"firestore_clients_"+t+"_"+e}function nS(t,e,n){n="firestore_mutations_"+t+"_"+n;return e.m()&&(n+="_"+e.uid),n}function rS(t,e){return"firestore_targets_"+t+"_"+e}var iS,oS=(AS.ca=function(t,e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Rg(i.error.code,i.error.message)),o?new AS(t,e,i.state,r):(mg("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},AS.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},AS),sS=(NS.ca=function(t,e){var n,r=JSON.parse(e),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new Rg(r.error.code,r.error.message)),i?new NS(t,r.state,n):(mg("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},NS.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},NS),aS=(CS.ca=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=rw,o=0;r&&o<n.activeTargetIds.length;++o)r=Im(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new CS(t,i):(mg("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},CS),uS=(SS.ca=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new SS(e.clientId,e.onlineState):(mg("SharedClientState","Failed to parse online state: "+t),null)},SS),cS=(TS.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},TS.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},TS.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},TS),hS=(ES.Kn=function(t){return!(!t||!t.localStorage)},ES.prototype.start=function(){return $i(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this._a.Uo()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(eS(this.persistenceKey,r)))&&(o=aS.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)h=c[u],this.wa(h);return this.Ta=[],this.window.addEventListener("unload",function(){return l.ko()}),this.Er=!0,[2]}})})},ES.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},ES.prototype.va=function(){return this.Sa(this.Ea)},ES.prototype.Da=function(n){var r=!1;return this.Ea.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},ES.prototype.Ca=function(t){this.xa(t,"pending")},ES.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},ES.prototype.Fa=function(t){var e,n="not-current";return this.Da(t)&&(!(e=this.storage.getItem(rS(this.persistenceKey,t)))||(e=sS.ca(t,e))&&(n=e.state)),this.Oa.ua(t),this.Va(),n},ES.prototype.ka=function(t){this.Oa.ha(t),this.Va()},ES.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},ES.prototype.La=function(t){this.removeItem(rS(this.persistenceKey,t))},ES.prototype.Ba=function(t,e,n){this.qa(t,e,n)},ES.prototype.Ua=function(t,e,n){var r=this;e.forEach(function(t){r.$a(t)}),this.currentUser=t,n.forEach(function(t){r.Ca(t)})},ES.prototype.Qa=function(t){this.Ka(t)},ES.prototype.Wa=function(){this.ja()},ES.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},ES.prototype.getItem=function(t){var e=this.storage.getItem(t);return gg("SharedClientState","READ",t,e),e},ES.prototype.setItem=function(t,e){gg("SharedClientState","SET",t,e),this.storage.setItem(t,e)},ES.prototype.removeItem=function(t){gg("SharedClientState","REMOVE",t),this.storage.removeItem(t)},ES.prototype.wa=function(t){var e=this,o=t;o.storageArea===this.storage&&(gg("SharedClientState","EVENT",o.key,o.newValue),o.key!==this.Ia?this.Zr.po(function(){return $i(e,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){if(this.Er){if(null!==o.key)if(this.Aa.test(o.key)){if(null==o.newValue)return e=this.Ga(o.key),[2,this.za(e,null)];if(e=this.Ha(o.key,o.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(o.key)){if(null!==o.newValue&&(n=this.Ja(o.key,o.newValue)))return[2,this.Ya(n)]}else if(this.Pa.test(o.key)){if(null!==o.newValue&&(r=this.Xa(o.key,o.newValue)))return[2,this.Za(r)]}else if(o.key===this.ya){if(null!==o.newValue&&(i=this.pa(o.newValue)))return[2,this.ba(i)]}else if(o.key===this.ma)(i=function(t){var e=zg.q;if(null!=t)try{var n=JSON.parse(t);Ig("number"==typeof n),e=n}catch(t){mg("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==zg.q&&this.k(i);else if(o.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(o);return[2]})})}):mg("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(ES.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),ES.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},ES.prototype.xa=function(t,e,n){n=new oS(this.currentUser,t,e,n),t=nS(this.persistenceKey,this.currentUser,t);this.setItem(t,n.aa())},ES.prototype.$a=function(t){t=nS(this.persistenceKey,this.currentUser,t);this.removeItem(t)},ES.prototype.Ka=function(t){t={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(t))},ES.prototype.qa=function(t,e,n){var r=rS(this.persistenceKey,t),n=new sS(t,e,n);this.setItem(r,n.aa())},ES.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},ES.prototype.Ga=function(t){t=this.Aa.exec(t);return t?t[1]:null},ES.prototype.Ha=function(t,e){t=this.Ga(t);return aS.ca(t,e)},ES.prototype.Ja=function(t,e){var n=this.Ra.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return oS.ca(new Dg(n),t,e)},ES.prototype.Xa=function(t,e){t=this.Pa.exec(t),t=Number(t[1]);return sS.ca(t,e)},ES.prototype.pa=function(t){return uS.ca(t)},ES.prototype.Ya=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return e.user.uid===this.currentUser.uid?[2,this._a.eu(e.batchId,e.state,e.error)]:(gg("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},ES.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},ES.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._a.su(s,a).then(function(){n.Ea=r})},ES.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},ES.prototype.Sa=function(t){var n=rw;return t.forEach(function(t,e){n=n.Pe(e.activeTargetIds)}),n},ES),lS=(IS.prototype.Ca=function(t){},IS.prototype.Na=function(t,e,n){},IS.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},IS.prototype.Ba=function(t,e,n){this.ru[t]=e},IS.prototype.ka=function(t){this.iu.ha(t)},IS.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},IS.prototype.La=function(t){delete this.ru[t]},IS.prototype.va=function(){return this.iu.activeTargetIds},IS.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},IS.prototype.start=function(){return this.iu=new cS,Promise.resolve()},IS.prototype.Ua=function(t,e,n){},IS.prototype.Qa=function(t){},IS.prototype.ko=function(){},IS.prototype.B=function(t){},IS.prototype.Wa=function(){},IS),fS=(wS.prototype.ou=function(t){},wS.prototype.ko=function(){},wS),pS=(_S.prototype.ou=function(t){this.lu.push(t)},_S.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},_S.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},_S.prototype.au=function(){gg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},_S.prototype.hu=function(){gg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},_S.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},_S),dS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},vS=(bS.prototype.wu=function(t){this.Eu=t},bS.prototype.Tu=function(t){this.Iu=t},bS.prototype.onMessage=function(t){this.mu=t},bS.prototype.close=function(){this.du()},bS.prototype.send=function(t){this.fu(t)},bS.prototype.Au=function(){this.Eu()},bS.prototype.Ru=function(t){this.Iu(t)},bS.prototype.Pu=function(t){this.mu(t)},bS),yS=(mS.prototype.pu=function(e,t,n,r){var i=this.bu(e,t);gg("RestConnection","Sending: ",i,n);t={};return this.vu(t,r),this.Su(e,i,t,n).then(function(t){return gg("RestConnection","Received: ",t),t},function(t){throw bg("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},mS.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},mS.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.0",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},mS.prototype.bu=function(t,e){t=dS[t];return this.gu+"/v1/"+e+":"+t},Xi(gS,iS=mS),gS.prototype.Su=function(o,e,s,a){return new Promise(function(n,r){var i=new lg;i.listenOnce(sg.COMPLETE,function(){try{switch(i.getLastErrorCode()){case og.NO_ERROR:var t=i.getResponseJson();gg("Connection","XHR received:",JSON.stringify(t)),n(t);break;case og.TIMEOUT:gg("Connection",'RPC "'+o+'" timed out'),r(new Rg(Og.DEADLINE_EXCEEDED,"Request time out"));break;case og.HTTP_ERROR:var e=i.getStatus();gg("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace(/_/g,"-"),e=0<=Object.values(Og).indexOf(e)?e:Og.UNKNOWN,r(new Rg(e,t.message))):r(new Rg(Og.UNKNOWN,"Server responded with status "+i.getStatus())):r(new Rg(Og.UNAVAILABLE,"Connection failed."));break;default:wg()}}finally{gg("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(a);i.send(e,"POST",t,s,15)})},gS.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Zy,i=ig(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(t.initMessageHeaders,e),vo()||go()||0<=po().indexOf("Electron/")||(0<=(e=po()).indexOf("MSIE ")||0<=e.indexOf("Trident/"))||0<=po().indexOf("MSAppHost/")||yo()||(t.httpHeadersOverwriteParam="$httpHeaders");n=n.join("");gg("Connection","Creating WebChannel: "+n,t);var o=r.createWebChannel(n,t),s=!1,a=!1,u=new vS({fu:function(t){a?gg("Connection","Not sending because WebChannel is closed:",t):(s||(gg("Connection","Opening WebChannel transport."),o.open(),s=!0),gg("Connection","WebChannel sending:",t),o.send(t))},du:function(){return o.close()}}),t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(o,hg.EventType.OPEN,function(){a||gg("Connection","WebChannel transport opened.")}),t(o,hg.EventType.CLOSE,function(){a||(a=!0,gg("Connection","WebChannel transport closed"),u.Ru())}),t(o,hg.EventType.ERROR,function(t){a||(a=!0,bg("Connection","WebChannel transport errored:",t),u.Ru(new Rg(Og.UNAVAILABLE,"The operation could not be completed")))}),t(o,hg.EventType.MESSAGE,function(t){var e,n,r,i;a||(Ig(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(gg("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=R_[r];if(void 0!==t)return V_(t)}(),i=n.message,void 0===t&&(t=Og.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),a=!0,u.Ru(new Rg(t,i)),o.close()):(gg("Connection","WebChannel received:",e),u.Pu(e)))}),t(i,ag.STAT_EVENT,function(t){t.stat===ug?gg("Connection","Detected buffering proxy"):t.stat===cg&&gg("Connection","Detected no buffering proxy")}),setTimeout(function(){u.Au()},0),u},gS);function gS(t){var e=this;return(e=iS.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.i=t.i,e}function mS(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}function bS(t){this.fu=t.fu,this.du=t.du}function _S(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}function wS(){}function IS(){this.iu=new cS,this.ru={},this.fa=null,this.k=null}function ES(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new q_(Sg),this.Er=!1,this.Ta=[];n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=eS(this.persistenceKey,this.la),this.ma="firestore_sequence_number_"+this.persistenceKey,this.Ea=this.Ea.zt(this.la,new cS),this.Aa=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.ya="firestore_online_state_"+this.persistenceKey,this.ga="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.da)}function TS(){this.activeTargetIds=rw}function SS(t,e){this.clientId=t,this.onlineState=e}function CS(t,e){this.clientId=t,this.activeTargetIds=e}function NS(t,e,n){this.targetId=t,this.state=e,this.error=n}function AS(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function kS(){return"undefined"!=typeof window?window:null}function PS(){return"undefined"!=typeof document?document:null}function OS(t){return new Sw(t,!0)}function RS(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(t){n.Ps(function(){return $i(o,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return eC(this)?(gg("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=n).Nh.add(4),[4,QS(e)];case 1:return t.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,KS(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Oh=new VS(n,r)}var xS,DS,LS,MS=(WS.prototype.reset=function(){this.Fu=0},WS.prototype.Mu=function(){this.Fu=this.$u},WS.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);0<i&&gg("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,function(){return e.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},WS.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},WS.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},WS.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},WS),W=(GS.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},GS.prototype.Hu=function(){return 2===this.state},GS.prototype.start=function(){3!==this.state?this.auth():this.Ju()},GS.prototype.stop=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},GS.prototype.Yu=function(){this.state=0,this.Gu.reset()},GS.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},GS.prototype.th=function(t){this.eh(),this.stream.send(t)},GS.prototype.Zu=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},GS.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},GS.prototype.close=function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==e?this.Gu.reset():n&&n.code===Og.RESOURCE_EXHAUSTED?(mg(n.toString()),mg("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):n&&n.code===Og.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Tu(n)];case 1:return t.sent(),[2]}})})},GS.prototype.nh=function(){},GS.prototype.auth=function(){var n=this;this.state=1;var t=this.sh(this.Wu),e=this.Wu;this.Ku.getToken().then(function(t){n.Wu===e&&n.ih(t)},function(e){t(function(){var t=new Rg(Og.UNKNOWN,"Fetching auth token failed: "+e.message);return n.rh(t)})})},GS.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){n(function(){return e.state=2,e.listener.wu()})}),this.stream.Tu(function(t){n(function(){return e.rh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},GS.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return $i(t,void 0,void 0,function(){return Zi(this,function(t){return this.state=0,this.start(),[2]})})})},GS.prototype.rh=function(t){return gg("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},GS.prototype.sh=function(e){var n=this;return function(t){n.Zr.Ps(function(){return n.Wu===e?t():(gg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},GS),jS=(Xi(HS,LS=W),HS.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},HS.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:wg(),r=e.targetChange.targetIds||[],i=(s=e.targetChange.resumeToken,t.Bt?(Ig(void 0===s||"string"==typeof s),Ag.fromBase64String(s||"")):(Ig(void 0===s||s instanceof Uint8Array),Ag.fromUint8Array(s||new Uint8Array))),o=(a=e.targetChange.cause)&&(u=void 0===(c=a).code?Og.UNKNOWN:V_(c.code),new Rg(u,c.message||"")),s=new lw(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime,r=Rw(t,n.document.name),i=Aw(n.document.updateTime);var a=new Lm({mapValue:{fields:n.document.fields}}),u=(o=new Bm(r,i,a,{}),n.targetIds||[]),c=n.removedTargetIds||[];s=new cw(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=Rw(t,n.document),i=n.readTime?Aw(n.readTime):$g.min(),a=new zm(r,i),o=n.removedTargetIds||[],s=new cw([],o,a.key,a);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=Rw(t,n.document),i=n.removedTargetIds||[],s=new cw([],i,r,null);else{if(!("filter"in e))return wg();e.filter;e=e.filter;e.targetId,n=e.count||0,r=new O_(n),i=e.targetId,s=new hw(i,r)}return s}(this.Qt,t),t=function(t){if(!("targetChange"in t))return $g.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?Aw(t.readTime):$g.min()}(t);return this.listener.ah(e,t)},HS.prototype.uh=function(t){var e,n,r,i={};i.database=Lw(this.Qt),i.addTarget=(e=this.Qt,(r=$m(r=(n=t).target)?{documents:qw(e,r)}:{query:Bw(e,r)}).targetId=n.targetId,0<n.resumeToken.l()?r.resumeToken=Nw(e,n.resumeToken):0<n.Ot._($g.min())&&(r.readTime=Cw(e,n.Ot.j())),r);var o,t=(this.Qt,o=t,null==(t=function(){switch(o.Ft){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wg()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.th(i)},HS.prototype.hh=function(t){var e={};e.database=Lw(this.Qt),e.removeTarget=t,this.th(e)},HS),FS=(Xi(zS,DS=W),Object.defineProperty(zS.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),zS.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,DS.prototype.start.call(this)},zS.prototype.nh=function(){this.lh&&this.fh([])},zS.prototype.oh=function(t){return this.Qu.Cu("Write",t)},zS.prototype.onMessage=function(t){if(Ig(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Ig(void 0!==r),n.map(function(t){return n=r,(t=(e=t).updateTime?Aw(e.updateTime):Aw(n)).isEqual($g.min())&&(t=Aw(n)),new p_(t,e.transformResults||[]);var e,n})):[]),n=Aw(t.commitTime);return this.listener.dh(n,e)}var n,r;return Ig(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},zS.prototype.Eh=function(){var t={};t.database=Lw(this.Qt),this.th(t)},zS.prototype.fh=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return Uw(e.Qt,t)})};this.th(t)},zS),US=(Xi(BS,xS=function(){}),BS.prototype.Ih=function(){if(this.Th)throw new Rg(Og.FAILED_PRECONDITION,"The client has already been terminated.")},BS.prototype.pu=function(e,n,r){var i=this;return this.Ih(),this.credentials.getToken().then(function(t){return i.Qu.pu(e,n,r,t)}).catch(function(t){throw t.code===Og.UNAUTHENTICATED&&i.credentials.p(),t})},BS.prototype.Du=function(e,n,r){var i=this;return this.Ih(),this.credentials.getToken().then(function(t){return i.Qu.Du(e,n,r,t)}).catch(function(t){throw t.code===Og.UNAUTHENTICATED&&i.credentials.p(),t})},BS.prototype.terminate=function(){this.Th=!1},BS),VS=(qS.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},qS.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,1<=this.mh&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},qS.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},qS.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},qS.prototype.gh=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(mg(t),this.Rh=!1):gg("OnlineStateTracker",t)},qS.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},qS);function qS(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}function BS(t,e,n){var r=this;return(r=xS.call(this)||this).credentials=t,r.Qu=e,r.Qt=n,r.Th=!1,r}function zS(t,e,n,r,i){var o=this;return(o=DS.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).Qt=r,o.lh=!1,o}function HS(t,e,n,r,i){var o=this;return(o=LS.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).Qt=r,o}function GS(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new MS(t,e)}function WS(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}function KS(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:if(!eC(r))return[3,4];e=0,n=r.$h,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function QS(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:e=0,n=r.$h,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function YS(t,e){t.xh.has(e.targetId)||(t.xh.set(e.targetId,e),tC(t)?ZS(t):hC(t).Hu()&&JS(t,e))}function XS(t,e){var n=t,t=hC(n);n.xh.delete(e),t.Hu()&&$S(n,e),0===n.xh.size&&(t.Hu()?t.Xu():eC(n)&&n.Oh.set("Unknown"))}function JS(t,e){t.kh.on(e.targetId),hC(t).uh(e)}function $S(t,e){t.kh.on(e),hC(t).hh(e)}function ZS(e){e.kh=new pw({vn:function(t){return e.Dh.vn(t)},Sn:function(t){return e.xh.get(t)||null}}),hC(e).start(),e.Oh.Ph()}function tC(t){return eC(t)&&!hC(t).zu()&&0<t.xh.size}function eC(t){return 0===t.Nh.size}function nC(t){t.kh=void 0}function rC(s,a,u){return $i(this,void 0,void 0,function(){var n,o;return Zi(this,function(t){switch(t.label){case 0:if(s.Oh.set("Online"),!(a instanceof lw&&2===a.state&&a.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.xh.has(i)?[4,o.Dh.Mh(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.xh.delete(i),o.kh.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,a)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),gg("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),n),[4,iC(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(a instanceof cw?s.kh.dn(a):a instanceof hw?s.kh.Pn(a):s.kh.Tn(a),u.isEqual($g.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,TT(s.bh)];case 8:return o=t.sent(),0<=u._(o)?[4,(i=u,(e=(r=s).kh.Vn(i)).$e.forEach(function(t,e){var n;0<t.resumeToken.l()&&((n=r.xh.get(e))&&r.xh.set(e,n.Mt(t.resumeToken,i)))}),e.Fe.forEach(function(t){var e=r.xh.get(t);e&&(r.xh.set(t,e.Mt(Ag.T,e.Ot)),$S(r,t),e=new Gb(e.target,t,1,e.sequenceNumber),JS(r,e))}),r.Dh.Lh(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return gg("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,iC(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function iC(n,r,i){return $i(this,void 0,void 0,function(){var e=this;return Zi(this,function(t){switch(t.label){case 0:if(!cI(r))throw r;return n.Nh.add(1),[4,QS(n)];case 1:return t.sent(),n.Oh.set("Offline"),i=i||function(){return TT(n.bh)},n._s.po(function(){return $i(e,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return gg("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Nh.delete(1),[4,KS(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function oC(e,n){return n().catch(function(t){return iC(e,t,n)})}function sC(u){return $i(this,void 0,void 0,function(){var i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:o=lC(i=u),s=0<i.Ch.length?i.Ch[i.Ch.length-1].batchId:-1,t.label=1;case 1:if(!(eC(i)&&i.Ch.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.bh,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.zo.gi(t,n)}))];case 3:return null===(a=t.sent())?(0===i.Ch.length&&o.Xu(),[3,7]):(s=a.batchId,function(t,e){t.Ch.push(e);t=lC(t);t.Hu()&&t._h&&t.fh(e.mutations)}(i,a),[3,6]);case 4:return a=t.sent(),[4,iC(i,a)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return aC(i)&&uC(i),[2]}var e,n,r})})}function aC(t){return eC(t)&&!lC(t).zu()&&0<t.Ch.length}function uC(t){lC(t).start()}function cC(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=n,r?(e.Nh.delete(2),[4,KS(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Nh.add(2),[4,QS(e)]);case 3:t.sent(),e.Oh.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function hC(n){var t,e,r,i=this;return n.Uh||(n.Uh=(t=n.Sh,e=n._s,r={wu:function(n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return n.xh.forEach(function(t,e){JS(n,t)}),[2]})})}.bind(null,n),Tu:function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return nC(e),tC(e)?(e.Oh.Vh(n),ZS(e)):e.Oh.set("Unknown"),[2]})})}.bind(null,n),ah:rC.bind(null,n)},t.Ih(),new jS(e,t.Qu,t.credentials,t.Qt,r)),n.$h.push(function(e){return $i(i,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e?(n.Uh.Yu(),tC(n)?ZS(n):n.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.Uh.stop()];case 2:t.sent(),nC(n),t.label=3;case 3:return[2]}})})})),n.Uh}function lC(n){var t,e,r,i=this;return n.Qh||(n.Qh=(t=n.Sh,e=n._s,r={wu:function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return lC(e).Eh(),[2]})})}.bind(null,n),Tu:function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return n&&lC(e)._h?[4,function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return U_(n=i.code)&&n!==Og.ABORTED?(e=r.Ch.shift(),lC(r).Yu(),[4,oC(r,function(){return r.Dh.qh(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,sC(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return aC(e)&&uC(e),[2]}})})}.bind(null,n),wh:function(o){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){for(e=lC(o),n=0,r=o.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]})})}.bind(null,n),dh:function(r,i,o){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=r.Ch.shift(),n=WI.from(e,i,o),[4,oC(r,function(){return r.Dh.Bh(n)})];case 1:return t.sent(),[4,sC(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.Ih(),new FS(e,t.Qu,t.credentials,t.Qt,r)),n.$h.push(function(e){return $i(i,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e?(n.Qh.Yu(),[4,sC(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.Qh.stop()];case 3:t.sent(),0<n.Ch.length&&(gg("RemoteStore","Stopping write stream with "+n.Ch.length+" pending writes"),n.Ch=[]),t.label=4;case 4:return[2]}})})})),n.Qh}function fC(){this.queries=new wE(qb,Vb),this.onlineState="Unknown",this.Wh=new Set}var pC=function(){this.Kh=void 0,this.listeners=[]};function dC(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:if(e=s,n=a.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new pC),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.jh(n)];case 2:return o.Kh=t.sent(),[3,4];case 3:return o=t.sent(),o=gI(o,"Initialization of query '"+Bb(a.query)+"' failed"),[2,void a.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(a),a.Gh(e.onlineState),i.Kh&&a.zh(i.Kh)&&yC(e),[2]}})})}function vC(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){return e=s,n=a.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.Hh(n))]:[2]})})}function yC(t){t.Wh.forEach(function(t){t.next()})}var gC=(TC.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new sw(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},TC.prototype.onError=function(t){this.Jh.error(t)},TC.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},TC.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},TC.prototype.Zh=function(t){if(0<t.docChanges.length)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},TC.prototype.el=function(t){t=sw.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},TC),mC=(EC.prototype.sl=function(){return"metadata"in this.payload},EC),bC=(IC.prototype.Pc=function(t){return Rw(this.Qt,t)},IC.prototype.yc=function(t){return t.metadata.exists?Fw(this.Qt,t.document,!1):new zm(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},IC.prototype.gc=Aw,IC),_C=(wC.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},wC.prototype.ol=function(t){for(var e=new Map,n=new bC(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||nw()).add(s);e.set(c,h)}}return e},wC.prototype.complete=function(){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,function(l,f,p,d){return $i(this,void 0,void 0,function(){var n,r,i,o,e,s,a,u,c,h;return Zi(this,function(t){switch(t.label){case 0:for(n=l,r=nw(),i=X_,o=tw,e=0,s=p;e<s.length;e++)a=s[e],u=f.Pc(a.metadata.name),a.document&&(r=r.add(u)),i=i.zt(u,f.yc(a)),o=o.zt(u,f.gc(a.metadata.readTime));return c=n.Ec.Nr({Wr:!0}),[4,NT(n,Fb(Ob(Zg.ot("__bundle__/docs/"+d))))];case 1:return h=t.sent(),[2,n.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return CT(e,c,i,$g.min(),o).next(function(t){return c.apply(e),t}).next(function(t){return n._o.Yi(e,h.targetId).next(function(){return n._o.er(e,r,h.targetId)}).next(function(){return n.Tc.Zo(e,t)})})})]}})})}(this.bh,new bC(this.Qt),this.documents,this.il.id)];case 1:e=t.sent(),n=this.ol(this.documents),r=0,i=this.queries,t.label=2;case 2:return r<i.length?(i=i[r],[4,function(e,i,o){return void 0===o&&(o=nw()),$i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,NT(e,Fb(oE(i.bundledQuery)))];case 1:return n=t.sent(),[2,(r=e).persistence.runTransaction("Save named query","readwrite",function(t){var e=Aw(i.readTime);if(0<=n.Ot._(e))return r.wo.Ls(t,i);e=n.Mt(Ag.T,e);return r.fc=r.fc.zt(e.targetId,e),r._o.Hi(t,e).next(function(){return r._o.Yi(t,n.targetId)}).next(function(){return r._o.er(t,o,n.targetId)}).next(function(){return r.wo.Ls(t,i)})})]}})})}(this.bh,i,n.get(i.name))]):[3,5];case 3:t.sent(),t.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new fT(Object.assign({},this.progress),e))]}})})},wC);function wC(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=SC(t)}function IC(t){this.Qt=t}function EC(t,e){this.payload=t,this.byteLength=e}function TC(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}function SC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var CC=function(t){this.key=t},NC=function(t){this.key=t},AC=(Object.defineProperty(xC.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),xC.prototype.fl=function(t,e){var s=this,a=e?e.dl:new ow,u=(e||this).ll,c=(e||this).De,h=u,l=!1,f=Rb(this.query)&&u.size===this.query.limit?u.last():null,p=xb(this.query)&&u.size===this.query.limit?u.first():null;if(t.Xt(function(t,e){var n=u.get(t),r=(r=e instanceof Bm?e:null)&&(zb(s.query,r)?r:null),i=!!n&&s.De.has(n.key),o=!!r&&(r.Vt||s.De.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(a.track({type:3,doc:r}),e=!0):s.wl(n,r)||(a.track({type:2,doc:r}),e=!0,(f&&0<s.hl(r,f)||p&&s.hl(r,p)<0)&&(l=!0)):!n&&r?(a.track({type:0,doc:r}),e=!0):n&&!r&&(a.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),Rb(this.query)||xb(this.query))for(;h.size>this.query.limit;){var n=Rb(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{ll:h,dl:a,lc:l,De:c}},xC.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},xC.prototype.wi=function(t,e,n){var o=this,r=this.ll;this.ll=t.ll,this.De=t.De;var i=t.dl.ve();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.hl(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wg()}}var r,i}),this.El(n);var s=e?this.Tl():[],n=0===this.ul.size&&this.Be?1:0,e=n!==this.al;return this.al=n,0!==i.length||e?{snapshot:new sw(this.query,t.ll,r,i,t.De,0==n,e,!1),Il:s}:{Il:s}},xC.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new ow,De:this.De,lc:!1},!1)):{Il:[]}},xC.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},xC.prototype.El=function(t){var e=this;t&&(t.qe.forEach(function(t){return e.cl=e.cl.add(t)}),t.Ue.forEach(function(t){}),t.Qe.forEach(function(t){return e.cl=e.cl.delete(t)}),this.Be=t.Be)},xC.prototype.Tl=function(){var e=this;if(!this.Be)return[];var n=this.ul;this.ul=nw(),this.ll.forEach(function(t){e.ml(t.key)&&(e.ul=e.ul.add(t.key))});var r=[];return n.forEach(function(t){e.ul.has(t)||r.push(new NC(t))}),this.ul.forEach(function(t){n.has(t)||r.push(new CC(t))}),r},xC.prototype.Al=function(t){this.cl=t.Rc,this.ul=nw();t=this.fl(t.documents);return this.wi(t,!0)},xC.prototype.Rl=function(){return sw.Ne(this.query,this.ll,this.De,0===this.al)},xC),kC=function(t,e,n){this.query=t,this.targetId=e,this.view=n},PC=function(t){this.key=t,this.Pl=!1},OC=(Object.defineProperty(RC.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),RC);function RC(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new wE(qb,Vb),this.Sl=new Map,this.Dl=new Set,this.Cl=new q_(nm.H),this.xl=new Map,this.Nl=new MT,this.$l={},this.Fl=new Map,this.Ol=RE.Li(),this.onlineState="Unknown",this.kl=void 0}function xC(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=nw(),this.De=nw(),this.hl=Hb(t),this.ll=new iw(this.hl)}function DC(i,o,s,a){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return i.Ll=function(t,e,n){return function(r,i,o,s){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return(e=i.view.fl(o)).lc?[4,kT(r.bh,i.query,!1).then(function(t){t=t.documents;return i.view.fl(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.$e.get(i.targetId),n=i.view.wi(e,r.Ml,n),[2,(HC(r,i.targetId,n.Il),n.snapshot)]}})})}(i,t,e,n)},[4,kT(i.bh,o,!0)];case 1:return n=t.sent(),r=new AC(o,n.Rc),e=r.fl(n.documents),n=uw.Le(s,a&&"Offline"!==i.onlineState),n=r.wi(e,i.Ml,n),HC(i,s,n.Il),r=new kC(o,s,r),[2,(i.vl.set(o,r),i.Sl.has(s)?i.Sl.get(s).push(o):i.Sl.set(s,[o]),n.snapshot)]}})})}function LC(f,p,d){return $i(this,void 0,void 0,function(){var s,a;return Zi(this,function(t){switch(t.label){case 0:a=ZC(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=a.bh,u=p,h=i,l=Jg.now(),o=u.reduce(function(t,e){return t.add(e.key)},nw()),h.persistence.runTransaction("Locally write mutations","readwrite",function(a){return h.Tc.Xo(a,o).next(function(t){c=t;for(var e,n=[],r=0,i=u;r<i.length;r++){var o=i[r],s=(e=o,s=c.get(o.key),function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Bm?e.field(o.field):void 0,s=Xb(o.transform,s||null);null!=s&&(n=(null==n?new Mm:n).set(o.field,s))}return n?n.Pt():null}(e.fieldTransforms,s));null!=s&&n.push(new T_(o.key,s,function s(t){var a=[];return hm(t.fields||{},function(t,e){var n=new em([t]);if(Dm(e))if(0===(e=s(e.mapValue).fields).length)a.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];a.push(n.child(o))}else a.push(n)}),new fm(a)}(s.proto.mapValue),v_.exists(!0)))}return h.zo.Ri(a,l,n,u)})}).then(function(t){var e=t.xs(c);return{batchId:t.batchId,ri:e}}))];case 2:return s=t.sent(),a.Vl.Ca(s.batchId),e=a,n=s.batchId,r=d,i=(i=(i=e.$l[e.currentUser.A()])||new q_(Sg)).zt(n,r),e.$l[e.currentUser.A()]=i,[4,WC(a,s.ri)];case 3:return t.sent(),[4,sC(a.yl)];case 4:return t.sent(),[3,6];case 5:return a=t.sent(),a=gI(a,"Failed to persist write"),d.reject(a),[3,6];case 6:return[2]}var e,n,r,i,u,c,h,l,o})})}function MC(r,i){return $i(this,void 0,void 0,function(){var n,e;return Zi(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,ST(n.bh,i)];case 2:return e=t.sent(),i.$e.forEach(function(t,e){e=n.xl.get(e);e&&(Ig(t.qe.size+t.Ue.size+t.Qe.size<=1),0<t.qe.size?e.Pl=!0:0<t.Ue.size?Ig(e.Pl):0<t.Qe.size&&(Ig(e.Pl),e.Pl=!1))}),[4,WC(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,_E(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function jC(t,n,e){var r,t=t;(t.Ml&&0===e||!t.Ml&&1===e)&&(r=[],t.vl.forEach(function(t,e){e=e.view.Gh(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Gh(i)&&(o=!0)}),o&&yC(t)}(t.gl,n),r.length&&t.bl.ah(r),t.onlineState=n,t.Ml&&t.Vl.Qa(n))}function FC(s,a,u){return $i(this,void 0,void 0,function(){var n,o;return Zi(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.bh,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.zo.Pi(e,r).next(function(t){return Ig(null!==t),n=t.keys(),i.zo.Ci(e,t)}).next(function(){return i.zo.$i(e)}).next(function(){return i.Tc.Xo(e,n)})}))];case 2:return o=t.sent(),qC(n,a,u),VC(n,a),n.Vl.Na(a,"rejected",u),[4,WC(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,_E(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function UC(o,s){return $i(this,void 0,void 0,function(){var n,r,i;return Zi(this,function(t){switch(t.label){case 0:eC((n=o).yl)||gg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.bh).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.zo.Vi(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Fl.get(r)||[]).push(s),n.Fl.set(r,i),[3,4]);case 3:return i=t.sent(),i=gI(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function VC(t,e){(t.Fl.get(e)||[]).forEach(function(t){t.resolve()}),t.Fl.delete(e)}function qC(t,e,n){var r=t,i=r.$l[r.currentUser.A()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i)}function BC(e,t,n){void 0===n&&(n=null),e.Vl.ka(t);for(var r=0,i=e.Sl.get(t);r<i.length;r++){var o=i[r];e.vl.delete(o),n&&e.bl.Bl(o,n)}e.Sl.delete(t),e.Ml&&e.Nl.Fc(t).forEach(function(t){e.Nl.Fi(t)||zC(e,t)})}function zC(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(XS(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),GC(t))}function HC(t,e,n){for(var r,i,o,s=0,a=n;s<a.length;s++){var u=a[s];u instanceof CC?(t.Nl.nr(u.key,e),r=t,o=void 0,i=(o=(i=u).key).path.rt(),r.Cl.get(o)||r.Dl.has(i)||(gg("SyncEngine","New document in limbo: "+o),r.Dl.add(i),GC(r))):u instanceof NC?(gg("SyncEngine","Document no longer in limbo: "+u.key),t.Nl.ir(u.key,e),t.Nl.Fi(u.key)||zC(t,u.key)):wg()}}function GC(t){for(;0<t.Dl.size&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new nm(Zg.ot(e)),e=t.Ol.next();t.xl.set(e,new PC(n)),t.Cl=t.Cl.zt(n,e),YS(t.yl,new Gb(Fb(Ob(n.path)),e,2,zg.q))}}function WC(e,s,a){return $i(this,void 0,void 0,function(){var n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).vl.et()?[3,3]:(n.vl.forEach(function(t,e){o.push(n.Ll(e,s,a).then(function(t){t&&(n.Ml&&n.Vl.Ba(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=dT.oc(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.bl.ah(r),[4,function(u,c){return $i(this,void 0,void 0,function(){var r,e,n,i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Zw.forEach(c,function(e){return Zw.forEach(e.ic,function(t){return r.persistence.Ti.nr(n,e.targetId,t)}).next(function(){return Zw.forEach(e.rc,function(t){return r.persistence.Ti.ir(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!cI(e=t.sent()))throw e;return gg("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)a=i[n],o=a.targetId,a.fromCache||(s=r.fc.get(o),a=s.Ot,a=s.Lt(a),r.fc=r.fc.zt(o,a));return[2]}})})}(n.bh,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function KC(i,o){return $i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(gg("SyncEngine","User change. New user:",o.A()),[4,IT(n.bh,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Fl.forEach(function(t){t.forEach(function(t){t.reject(new Rg(Og.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Fl.clear(),n.Vl.Ua(o,r.mc,r.Ac),[4,WC(n,r.Ic)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function QC(a,u,c,h){return $i(this,void 0,void 0,function(){var o,s;return Zi(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).bh,n=u,i=(r=e).zo,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.yi(e,n).next(function(t){return t?r.Tc.Xo(e,t):Zw.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,sC(o.yl)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(qC(o,u,h||null),VC(o,u),o.bh.zo.xi(u)):wg(),t.label=4;case 4:return[4,WC(o,s)];case 5:return t.sent(),[3,7];case 6:gg("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}function YC(h,l){return $i(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return Zi(this,function(t){switch(t.label){case 0:return $C(r=h),ZC(r),!0!==l||!0===r.kl?[3,3]:(e=r.Vl.va(),[4,XC(r,e.it())]);case 1:return i=t.sent(),r.kl=!0,[4,cC(r.yl,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],YS(r.yl,a);return[3,7];case 3:return!1!==l||!1===r.kl?[3,7]:(u=[],c=Promise.resolve(),r.Sl.forEach(function(t,e){r.Vl.Ma(e)?u.push(e):c=c.then(function(){return BC(r,e),AT(r.bh,e,!0)}),XS(r.yl,e)}),[4,c]);case 4:return t.sent(),[4,XC(r,u)];case 5:return t.sent(),(n=r).xl.forEach(function(t,e){XS(n.yl,e)}),n.Nl.Oc(),n.xl=new Map,n.Cl=new q_(nm.H),r.kl=!1,[4,cC(r.yl,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function XC(p,d){return $i(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f;return Zi(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.Sl.get(s))&&0!==u.length?[4,NT(e.bh,Fb(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.vl.get(l),[4,function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,kT((e=r).bh,i.query,!0)];case 1:return n=t.sent(),n=i.view.Al(n),[2,(e.Ml&&HC(e,i.targetId,n.Il),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,PT(e.bh,s)];case 8:return f=t.sent(),[4,NT(e.bh,f)];case 9:return a=t.sent(),[4,DC(e,JC(f),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.bl.ah(r),n)]}})})}function JC(t){return Pb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $C(t){return t.yl.Dh.Lh=MC.bind(null,t),t.yl.Dh.vn=function(t,e){var n=t;if((t=n.xl.get(e))&&t.Pl)return nw().add(t.key);var r=nw();if(!(e=n.Sl.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.vl.get(s),r=r.Pe(s.view._l);return r}.bind(null,t),t.yl.Dh.Mh=function(o,s,a){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return(e=o).Vl.Ba(s,"rejected",a),i=e.xl.get(s),(n=i&&i.key)?(r=(r=new q_(nm.H)).zt(n,new zm(n,$g.min())),i=nw().add(n),i=new aw($g.min(),new Map,new Q_(Sg),r,i),[4,MC(e,i)]):[3,2];case 1:return t.sent(),e.Cl=e.Cl.remove(n),e.xl.delete(s),GC(e),[3,4];case 2:return[4,AT(e.bh,s,!1).then(function(){return BC(e,s,a)}).catch(_E)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.bl.ah=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,a=n.queries.get(a);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&yC(n)}.bind(null,t.gl),t.bl.Bl=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.gl),t}function ZC(t){return t.yl.Dh.Bh=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,ET(e.bh,o)];case 2:return r=t.sent(),qC(e,n,null),VC(e,n),e.Vl.Na(n,"acknowledged"),[4,WC(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,_E(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,t),t.yl.Dh.qh=FC.bind(null,t),t}function tN(t,e,n){var r=t;(function(f,p,d){return $i(this,void 0,void 0,function(){var a,u,c,h,l;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,14,,15]),[4,p.getMetadata()];case 1:return a=t.sent(),[4,(r=f.bh,o=r,s=Aw((i=a).createTime),o.persistence.runTransaction("hasNewerBundle","readonly",function(t){return o.wo.Os(t,i.id)}).then(function(t){return!!t&&0<=t.createTime._(s)}))];case 2:return t.sent()?[4,p.close()]:[3,4];case 3:return[2,(t.sent(),void d.ql({taskState:"Success",documentsLoaded:a.totalDocuments,bytesLoaded:a.totalBytes,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}))];case 4:return d.Ul(SC(a)),u=new _C(a,f.bh,p.Qt),[4,p.Ql()];case 5:c=t.sent(),t.label=6;case 6:return c?[4,u.rl(c)]:[3,10];case 7:return(h=t.sent())&&d.Ul(h),[4,p.Ql()];case 8:c=t.sent(),t.label=9;case 9:return[3,6];case 10:return[4,u.complete()];case 11:return l=t.sent(),[4,WC(f,l.Go,void 0)];case 12:return t.sent(),[4,(r=f.bh,e=a,(n=r).persistence.runTransaction("Save bundle","readwrite",function(t){return n.wo.ks(t,e)}))];case 13:return t.sent(),d.ql(l.progress),[3,15];case 14:return bg("SyncEngine","Loading bundle failed with "+(l=t.sent())),d.Kl(l),[3,15];case 15:return[2]}var e,n,r,i,o,s})})})(r,e,n).then(function(){r.Vl.Wa()})}var eN,nN,rN=(hN.prototype.initialize=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.Qt=OS(e.yu.t),this.Vl=this.Wl(e),this.persistence=this.jl(e),[4,this.persistence.start()];case 1:return t.sent(),this.Gl=this.zl(e),this.bh=this.Hl(e),[2]}})})},hN.prototype.zl=function(t){return null},hN.prototype.Hl=function(t){return wT(this.persistence,new vT,t.Jl,this.Qt)},hN.prototype.jl=function(t){return new BT(HT.ia,this.Qt)},hN.prototype.Wl=function(t){return new lS},hN.prototype.terminate=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},hN),iN=(Xi(cN,nN=rN),cN.prototype.initialize=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,nN.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,RT(this.bh)];case 2:return t.sent(),[4,this.Yl.initialize(this,e)];case 3:return t.sent(),[4,ZC(this.Yl._a)];case 4:return t.sent(),[4,sC(this.Yl.yl)];case 5:return t.sent(),[2]}})})},cN.prototype.Hl=function(t){return wT(this.persistence,new vT,t.Jl,this.Qt)},cN.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new qE(e,t._s)},cN.prototype.jl=function(t){var e=lT(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?mE.Ys(this.cacheSizeBytes):mE.ti;return new aT(this.synchronizeTabs,e,t.clientId,n,t._s,kS(),PS(),this.Qt,this.Vl,!!this.forceOwnership)},cN.prototype.Wl=function(t){return new lS},cN),oN=(Xi(uN,eN=iN),uN.prototype.initialize=function(r){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:return[4,eN.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Yl._a,this.Vl instanceof hS?(this.Vl._a={eu:QC.bind(null,e),nu:function(i,o,s,a){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return(e=i).kl?(gg("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.Sl.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,OT(e.bh)];case 3:return n=t.sent(),r=aw.Me(o,"current"===s),[4,WC(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,AT(e.bh,o,!0)];case 6:return t.sent(),BC(e,o,a),[3,8];case 7:wg(),t.label=8;case 8:return[2]}})})}.bind(null,e),su:function(c,h,l){return $i(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u;return Zi(this,function(t){switch(t.label){case 0:if(!(n=$C(c)).kl)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.Sl.has(r)?(gg("SyncEngine","Adding an already active target "+r),[3,5]):[4,PT(n.bh,r)]):[3,6];case 2:return i=t.sent(),[4,NT(n.bh,i)];case 3:return o=t.sent(),[4,DC(n,JC(i),o.targetId,!1)];case 4:t.sent(),YS(n.yl,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return Zi(this,function(t){switch(t.label){case 0:return n.Sl.has(e)?[4,AT(n.bh,e,!1).then(function(){XS(n.yl,e),BC(n,e)}).catch(_E)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=0,u=l,t.label=7;case 7:return a<u.length?(u=u[a],[5,s(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})}.bind(null,e),Uo:function(t){return t.bh.persistence.Uo()}.bind(null,e),tu:function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return[2,OT((e=n).bh).then(function(t){return WC(e,t)})]})})}.bind(null,e)},[4,this.Vl.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.Ro(function(e){return $i(n,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,YC(this.Yl._a,e)];case 1:return t.sent(),this.Gl&&(e&&!this.Gl.Er?this.Gl.start(this.bh):e||this.Gl.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},uN.prototype.Wl=function(t){var e=kS();if(!hS.Kn(e))throw new Rg(Og.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=lT(t.yu.t,t.yu.persistenceKey);return new hS(e,t._s,n,t.clientId,t.Jl)},uN),sN=(aN.prototype.initialize=function(n,r){return $i(this,void 0,void 0,function(){var e=this;return Zi(this,function(t){switch(t.label){case 0:return this.bh?[3,2]:(this.bh=n.bh,this.Vl=n.Vl,this.Sh=this.Xl(r),this.yl=this.Zl(r),this.gl=this.t_(r),this._a=this.e_(r,!n.synchronizeTabs),this.Vl.fa=function(t){return jC(e._a,t,1)},this.yl.Dh.n_=KC.bind(null,this._a),[4,cC(this.yl,this._a.Ml)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},aN.prototype.t_=function(t){return new fC},aN.prototype.Xl=function(t){var e=OS(t.yu.t),n=(n=t.yu,new yS(n));return t=t.credentials,new US(t,n,e)},aN.prototype.Zl=function(t){var e=this,n=this.bh,r=this.Sh,i=t._s,o=function(t){return jC(e._a,t,0)},t=new(pS.Kn()?pS:fS);return new RS(n,r,i,o,t)},aN.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){o=new OC(t,e,n,r,i,o);return s&&(o.kl=!0),o}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},aN.prototype.terminate=function(){return function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=n,gg("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,QS(e)];case 1:return t.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}})})}(this.yl)},aN);function aN(){}function uN(t,e){var n=this;return(n=eN.call(this,t,e,!1)||this).Yl=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function cN(t,e,n){var r=this;return(r=nN.call(this)||this).Yl=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function hN(){this.synchronizeTabs=!1}function lN(n,r){void 0===r&&(r=10240);var i=0;return{read:function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return i<n.byteLength?(e={value:n.slice(i,i+r),done:!1},[2,(i+=r,e)]):[2,{done:!0}]})})},cancel:function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var fN=(bN.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},bN.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},bN.prototype.i_=function(){this.muted=!0},bN.prototype.s_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},bN),pN=(mN.prototype.close=function(){return this.r_.cancel()},mN.prototype.getMetadata=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return[2,this.metadata.promise]})})},mN.prototype.Ql=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},mN.prototype.c_=function(){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,this.a_()];case 1:return null===(e=t.sent())?[2,null]:(r=this.o_.decode(e),n=Number(r),isNaN(n)&&this.u_("length string ("+r+") is not valid number"),[4,this.h_(n)]);case 2:return r=t.sent(),[2,new mC(JSON.parse(r),e.length+n)]}})})},mN.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},mN.prototype.a_=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(t.sent())return[3,3];t.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},mN.prototype.h_=function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return this.buffer.length<n?[4,this.__()]:[3,3];case 1:t.sent()&&this.u_("Reached the end of bundle when more is expected."),t.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,n)),[2,(this.buffer=this.buffer.slice(n),e)]}})})},mN.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},mN.prototype.__=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,this.r_.read()];case 1:return(e=t.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},mN),dN=(gN.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},gN),vN=function(t){this._methodName=t},yN=function(t){this.d_=t};function gN(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Rg(Og.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new em(t)}function mN(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new $w,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}function bN(t){this.observer=t,this.muted=!1}function _N(t,e,n){if(!n)throw new Rg(Og.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function wN(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Rg(Og.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function IN(t,e,n,r){if(!0===e&&!0===r)throw new Rg(Og.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function EN(t){if(!nm.wt(t))throw new Rg(Og.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function TN(t){if(nm.wt(t))throw new Rg(Og.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function SN(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":wg();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function CN(t,e){if((t="_delegate"in t?t.d_:t)instanceof e)return t;if(e.name===t.constructor.name)throw new Rg(Og.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=SN(t);throw new Rg(Og.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function NN(t,e){if(e<=0)throw new Rg(Og.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var AN,kN=(UN.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},UN),PN=new Map,ON=(Object.defineProperty(FN.prototype,"app",{get:function(){if(!this.A_)throw new Rg(Og.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(FN.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(FN.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),FN.prototype.g_=function(t){if(this.T_)throw new Rg(Og.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new kN(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Ug;switch(t.type){case"gapi":var e=t.client;return Ig(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Bg(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Rg(Og.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},FN.prototype.V_=function(){return this.E_},FN.prototype.p_=function(){return this.T_=!0,this.E_},FN.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},FN.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},FN.prototype.b_=function(){return(t=PN.get(this))&&(gg("ComponentProvider","Removing Datastore"),PN.delete(this),t.terminate()),Promise.resolve();var t},FN),RN=(Object.defineProperty(jN.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(jN.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(jN.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(jN.prototype,"parent",{get:function(){return new DN(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),jN.prototype.withConverter=function(t){return new jN(this.firestore,t,this.S_)},jN),xN=(MN.prototype.withConverter=function(t){return new MN(this.firestore,t,this.C_)},MN),DN=(Xi(LN,AN=xN),Object.defineProperty(LN.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(LN.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(LN.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new RN(this.firestore,null,new nm(t))},enumerable:!1,configurable:!0}),LN.prototype.withConverter=function(t){return new LN(this.firestore,t,this.D_)},LN);function LN(t,e,n){var r=this;return(r=AN.call(this,t,e,Ob(n))||this).firestore=t,r.D_=n,r.type="collection",r}function MN(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}function jN(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}function FN(t,e){this.w_="(lite)",this.E_=new kN({}),this.T_=!1,t instanceof pg?(this.I_=t,this.m_=new Ug):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Rg(Og.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pg(t.options.projectId)}(t),this.m_=new Vg(e))}function UN(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Rg(Og.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Rg(Og.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,IN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function VN(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof yN&&(t=t.d_),_N("collection","path",e),t instanceof ON)return TN(n=Zg.ot.apply(Zg,no([e],r))),new DN(t,null,n);if(!(t instanceof RN||t instanceof DN))throw new Rg(Og.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return TN(n=Zg.ot.apply(Zg,no([t.path],r)).child(Zg.ot(e))),new DN(t.firestore,null,n)}function qN(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof yN&&(t=t.d_),_N("doc","path",e=1===arguments.length?Eg.u():e),t instanceof ON)return EN(n=Zg.ot.apply(Zg,no([e],r))),new RN(t,null,new nm(n));if(!(t instanceof RN||t instanceof DN))throw new Rg(Og.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return EN(n=t.D_.child(Zg.ot.apply(Zg,no([e],r)))),new RN(t.firestore,t instanceof DN?t.v_:null,new nm(n))}function BN(t,e){return t instanceof yN&&(t=t.d_),e instanceof yN&&(e=e.d_),(t instanceof RN||t instanceof DN)&&(e instanceof RN||e instanceof DN)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function zN(t,e){return t instanceof yN&&(t=t.d_),e instanceof yN&&(e=e.d_),t instanceof xN&&e instanceof xN&&t.firestore===e.firestore&&Vb(t.C_,e.C_)&&t.v_===e.v_}var HN=(Object.defineProperty(XN.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(XN.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),XN.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},XN.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},XN.prototype.U=function(t){return Sg(this.x_,t.x_)||Sg(this.N_,t.N_)},XN),GN=/^__.*__$/,WN=(YN.prototype.F_=function(t,e){return null!==this.Gt?new T_(t,this.data,this.Gt,e,this.fieldTransforms):new E_(t,this.data,e,this.fieldTransforms)},YN),KN=(QN.prototype.F_=function(t,e){return new T_(t,this.data,this.Gt,e,this.fieldTransforms)},QN);function QN(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}function YN(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}function XN(t,e){if(!isFinite(t)||t<-90||90<t)throw new Rg(Og.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Rg(Og.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}function JN(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw wg()}}var $N=(Object.defineProperty(eA.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(eA.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),eA.prototype.M_=function(t){return new eA(Object.assign(Object.assign({},this.settings),t),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},eA.prototype.L_=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.M_({path:e,B_:!1});return e.q_(t),e},eA.prototype.U_=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.M_({path:t,B_:!1});return t.O_(),t},eA.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},eA.prototype.K_=function(t){return PA(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},eA.prototype.contains=function(e){return void 0!==this.Gt.find(function(t){return e.nt(t)})||void 0!==this.fieldTransforms.find(function(t){return e.nt(t.field)})},eA.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},eA.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(JN(this.k_)&&GN.test(t))throw this.K_('Document fields cannot begin and end with "__"')},eA),ZN=(tA.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new $N({k_:t,methodName:e,j_:n,path:em.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},tA);function tA(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||OS(t)}function eA(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}function nA(t){var e=t.p_(),n=OS(t.I_);return new ZN(t.I_,!!e.ignoreUndefinedProperties,n)}function rA(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);CA("Data must be an object, but it was:",s,r);var a,u,r=TA(r,s);if(o.merge)a=new fm(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=NA(e,l[h],n);if(!s.contains(f))throw new Rg(Og.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");OA(c,f)||c.push(f)}a=new fm(c),u=s.fieldTransforms.filter(function(t){return a.Tt(t.field)})}else a=null,u=s.fieldTransforms;return new WN(new Lm(r),a,u)}var iA,oA=(Xi(sA,iA=vN),sA.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},sA.prototype.isEqual=function(t){return t instanceof sA},sA);function sA(){return null!==iA&&iA.apply(this,arguments)||this}function aA(t,e,n){return new $N({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var uA,cA,hA,lA,fA=(Xi(bA,lA=vN),bA.prototype.z_=function(t){return new d_(t.path,new Zb)},bA.prototype.isEqual=function(t){return t instanceof bA},bA),pA=(Xi(mA,hA=vN),mA.prototype.z_=function(t){var e=aA(this,t,!0),n=this.H_.map(function(t){return EA(t,e)}),n=new t_(n);return new d_(t.path,n)},mA.prototype.isEqual=function(t){return this===t},mA),dA=(Xi(gA,cA=vN),gA.prototype.z_=function(t){var e=aA(this,t,!0),n=this.H_.map(function(t){return EA(t,e)}),n=new o_(n);return new d_(t.path,n)},gA.prototype.isEqual=function(t){return this===t},gA),vA=(Xi(yA,uA=vN),yA.prototype.z_=function(t){var e=new c_(t.Qt,Yb(t.Qt,this.J_));return new d_(t.path,e)},yA.prototype.isEqual=function(t){return this===t},yA);function yA(t,e){var n=this;return(n=uA.call(this,t)||this).J_=e,n}function gA(t,e){var n=this;return(n=cA.call(this,t)||this).H_=e,n}function mA(t,e){var n=this;return(n=hA.call(this,t)||this).H_=e,n}function bA(){return null!==lA&&lA.apply(this,arguments)||this}function _A(t,r,i,e){var o=t.G_(1,r,i);CA("Data must be an object, but it was:",o,e);var s=[],a=new Mm;hm(e,function(t,e){var n=kA(r,t,i);e instanceof yN&&(e=e.d_);t=o.U_(n);e instanceof oA?s.push(n):null!=(t=EA(e,t))&&(s.push(n),a.set(n,t))});e=new fm(s);return new KN(a.Pt(),e,o.fieldTransforms)}function wA(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[NA(e,r,n)],u=[i];if(o.length%2!=0)throw new Rg(Og.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(NA(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=new Mm,v=a.length-1;0<=v;--v)OA(p,a[v])||(h=a[v],(l=u[v])instanceof yN&&(l=l.d_),f=s.U_(h),l instanceof oA?p.push(h):null!=(f=EA(l,f))&&(p.push(h),d.set(h,f)));i=new fm(p);return new KN(d.Pt(),i,s.fieldTransforms)}function IA(t,e,n,r){return void 0===r&&(r=!1),EA(n,t.G_(r?4:3,e))}function EA(s,t){if(SA(s=s instanceof yN?s.d_:s))return CA("Unsupported field value:",t,s),TA(s,t);if(s instanceof vN)return function(t,e){if(!JN(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");t=t.z_(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(void 0===s&&t.ignoreUndefinedProperties)return null;if(t.path&&t.Gt.push(t.path),s instanceof Array){if(t.settings.B_&&4!==t.k_)throw t.K_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=EA(i[r],t.Q_(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===(t=t instanceof yN?t.d_:t))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yb(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Jg.fromDate(t);return{timestampValue:Cw(e.Qt,n)}}if(t instanceof Jg)return n=new Jg(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Cw(e.Qt,n)};if(t instanceof HN)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xg)return{bytesValue:Nw(e.Qt,t.I)};if(t instanceof RN){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:kw(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+SN(t))}(s,t)}function TA(t,n){var r={};return lm(t)?n.path&&0<n.path.length&&n.Gt.push(n.path):hm(t,function(t,e){e=EA(e,n.L_(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function SA(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Jg||t instanceof HN||t instanceof xg||t instanceof RN||t instanceof vN)}function CA(t,e,n){if(!SA(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=SN(n);throw"an object"===n?e.K_(t+" a custom object"):e.K_(t+" "+n)}var r}function NA(t,e,n){if((e=e instanceof yN?e.d_:e)instanceof dN)return e.f_;if("string"==typeof e)return kA(t,e);throw PA("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var AA=new RegExp("[~\\*/\\[\\]]");function kA(e,n,r){if(0<=n.search(AA))throw PA("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(dN.bind.apply(dN,no([void 0],n.split("."))))).f_}catch(t){throw PA("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function PA(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new Rg(Og.INVALID_ARGUMENT,(e+=". ")+t+n)}function OA(t,e){return t.some(function(t){return t.isEqual(e)})}var RA=(jA.prototype.ef=function(r){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(this.nf(),0<this.mutations.length)throw new Rg(Og.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return $i(this,void 0,void 0,function(){var n,e,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=Lw((n=s).Qt)+"/documents",r={documents:a.map(function(t){return Ow(n.Qt,t)})},[4,n.Du("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.Qt,"found"in(t=t)?function(t,e){Ig(!!e.found),e.found.name,e.found.updateTime;var n=Rw(t,e.found.name),t=Aw(e.found.updateTime),e=new Lm({mapValue:{fields:e.found.fields}});return new Bm(n,t,e,{})}(e,t):"missing"in t?function(t,e){Ig(!!e.missing),Ig(!!e.readTime);t=Rw(t,e.missing),e=Aw(e.readTime);return new zm(t,e)}(e,t):wg());i.set(t.key.toString(),t)}),o=[],[2,(a.forEach(function(t){t=i.get(t.toString());Ig(!!t),o.push(t)}),o)]}})})}(this.Sh,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof zm||t instanceof Bm?n.sf(t):wg()}),e)]}})})},jA.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},jA.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},jA.prototype.delete=function(t){this.write(new L_(t,this.jt(t))),this.tf.add(t.toString())},jA.prototype.commit=function(){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return e=this.Y_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=nm._t(e);n.mutations.push(new M_(e,n.jt(e)))}),[4,function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return n=Lw((e=i).Qt)+"/documents",r={writes:o.map(function(t){return Uw(e.Qt,t)})},[4,e.pu("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return t.sent(),this.X_=!0,[2]}})})},jA.prototype.sf=function(t){var e;if(t instanceof Bm)e=t.version;else{if(!(t instanceof zm))throw wg();e=$g.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Rg(Og.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},jA.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?v_.updateTime(e):v_.Kt()},jA.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(this.tf.has(t.toString())||!e)return v_.exists(!0);if(e.isEqual($g.min()))throw new Rg(Og.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return v_.updateTime(e)},jA.prototype.write=function(t){this.nf(),this.mutations.push(t)},jA.prototype.nf=function(){},jA),xA=(MA.prototype.run=function(){this.af()},MA.prototype.af=function(){var t=this;this.Gu.Lu(function(){return $i(t,void 0,void 0,function(){var e,n,r=this;return Zi(this,function(t){return e=new RA(this.Sh),(n=this.uf(e))&&n.then(function(t){r._s.Ps(function(){return e.commit().then(function(){r.Es.resolve(t)}).catch(function(t){r.hf(t)})})}).catch(function(t){r.hf(t)}),[2]})})})},MA.prototype.uf=function(t){try{var e=this.updateFunction(t);return!_m(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},MA.prototype.hf=function(t){var e=this;0<this.cf&&this.lf(t)?(--this.cf,this._s.Ps(function(){return e.af(),Promise.resolve()})):this.Es.reject(t)},MA.prototype.lf=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!U_(t)},MA),DA=(LA.prototype.getConfiguration=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},LA.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then(function(){return e._f(e.user)})},LA.prototype.df=function(){if(this._s.wf)throw new Rg(Og.FAILED_PRECONDITION,"The client has already been terminated.")},LA.prototype.terminate=function(){var t=this;this._s.Ef();var n=new $w;return this._s.Tf(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.S(),n.resolve(),[3,6];case 5:return e=t.sent(),e=gI(e,"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},LA);function LA(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Dg.UNAUTHENTICATED,this.clientId=Eg.u(),this._f=function(){},this.C=new $w,this.credentials.v(function(t){gg("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()})}function MA(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new MS(this._s,"transaction_retry")}function jA(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}function FA(i,o){return $i(this,void 0,void 0,function(){var e,n,r=this;return Zi(this,function(t){switch(t.label){case 0:return i._s.Af(),gg("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return e=t.sent(),[4,o.initialize(e)];case 2:return t.sent(),n=e.Jl,i.ff(function(e){n.isEqual(e)||(n=e,i._s.po(function(){return $i(r,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,IT(o.bh,e)];case 1:return t.sent(),[2]}})})}))}),o.persistence.Po(function(){return i.terminate()}),i.mf=o,[2]}})})}function UA(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return r._s.Af(),[4,VA(r)];case 1:return e=t.sent(),gg("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.ff(function(t){return r._s.po(function(){return function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return(e=r)._s.Af(),gg("RemoteStore","RemoteStore received new credentials"),n=eC(e),e.Nh.add(3),[4,QS(e)];case 1:return t.sent(),n&&e.Oh.set("Unknown"),[4,e.Dh.n_(i)];case 2:return t.sent(),e.Nh.delete(3),[4,KS(e)];case 3:return t.sent(),[2]}})})}(i.yl,t)})}),r.If=i,[2]}})})}function VA(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e.mf?[3,2]:(gg("FirestoreClient","Using default OfflineComponentProvider"),[4,FA(e,new rN)]);case 1:t.sent(),t.label=2;case 2:return[2,e.mf]}})})}function qA(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e.If?[3,2]:(gg("FirestoreClient","Using default OnlineComponentProvider"),[4,UA(e,new sN)]);case 1:t.sent(),t.label=2;case 2:return[2,e.If]}})})}function BA(t){return VA(t).then(function(t){return t.persistence})}function zA(t){return VA(t).then(function(t){return t.bh})}function HA(t){return qA(t).then(function(t){return t.yl})}function GA(t){return qA(t).then(function(t){return t._a})}function WA(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,qA(r)];case 1:return e=t.sent(),[2,((n=e.gl).jh=function(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=$C(s),(o=e.vl.get(a))?(n=o.targetId,e.Vl.Fa(n),r=o.view.Rl(),[3,4]):[3,1];case 1:return[4,NT(e.bh,Fb(a))];case 2:return i=t.sent(),o=e.Vl.Fa(i.targetId),n=i.targetId,[4,DC(e,a,n,"current"===o)];case 3:r=t.sent(),e.Ml&&YS(e.yl,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e._a),n.Hh=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return n=(e=i).vl.get(o),1<(r=e.Sl.get(n.targetId)).length?[2,(e.Sl.set(n.targetId,r.filter(function(t){return!Vb(t,o)})),void e.vl.delete(o))]:e.Ml?(e.Vl.ka(n.targetId),e.Vl.Da(n.targetId)?[3,2]:[4,AT(e.bh,n.targetId,!1).then(function(){e.Vl.La(n.targetId),XS(e.yl,n.targetId),BC(e,n.targetId)}).catch(_E)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return BC(e,n.targetId),[4,AT(e.bh,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e._a),n)]}})})}function KA(n,r,i){var t=this;void 0===i&&(i={});var o=new $w;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(n,r,i,o,s){var t=new fN({next:function(t){r.Ps(function(){return vC(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new Rg(Og.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new Rg(Og.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new gC(Ob(i.path),t,{includeMetadataChanges:!0,nl:!0});return dC(n,a)},[4,WA(n)];case 1:return[2,e.apply(void 0,[t.sent(),n._s,r,i,o])]}})})}),o.promise}function QA(n,r,i){var t=this;void 0===i&&(i={});var o=new $w;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new fN({next:function(t){n.Ps(function(){return vC(e,s)}),t.fromCache&&"server"===r.source?i.reject(new Rg(Og.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new gC(t,o,{includeMetadataChanges:!0,nl:!0});return dC(e,s)},[4,WA(n)];case 1:return[2,e.apply(void 0,[t.sent(),n._s,r,i,o])]}})})}),o.promise}var YA=(Object.defineProperty(XA.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),XA.prototype.Ps=function(t){this.enqueue(t)},XA.prototype.Tf=function(t){this.Sf(),this.Df(t)},XA.prototype.Ef=function(){var t;this.yf||(this.yf=!0,(t=PS())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf))},XA.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},XA.prototype.po=function(t){var e=this;this.Ps(function(){return e.Pf.push(t),e.Cf()})},XA.prototype.Cf=function(){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(0===this.Pf.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return t.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!cI(e=t.sent()))throw e;return gg("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Pf.length&&this.Gu.Lu(function(){return n.Cf()}),t.label=5;case 5:return[2]}})})},XA.prototype.Df=function(t){var r=this,e=this.Rf.then(function(){return r.pf=!0,t().catch(function(t){throw r.Vf=t,r.pf=!1,mg("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",n=e.stack?e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack:n)),t;var e,n}).then(function(t){return r.pf=!1,t})});return this.Rf=e},XA.prototype.Tr=function(t,e,n){var r=this;this.Sf(),-1<this.bf.indexOf(t)&&(e=0);n=vI.Ts(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(n),n},XA.prototype.Sf=function(){this.Vf&&wg()},XA.prototype.Af=function(){},XA.prototype.Nf=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,e=this.Rf];case 1:t.sent(),t.label=2;case 2:if(e!==this.Rf)return[3,0];t.label=3;case 3:return[2]}})})},XA.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},XA.prototype.Ff=function(r){var i=this;return this.Nf().then(function(){i.gf.sort(function(t,e){return t.ds-e.ds});for(var t=0,e=i.gf;t<e.length;t++){var n=e[t];if(n.Rs(),"all"!==r&&n.fs===r)break}return i.Nf()})},XA.prototype.Of=function(t){this.bf.push(t)},XA.prototype.xf=function(t){t=this.gf.indexOf(t);this.gf.splice(t,1)},XA);function XA(){var e=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new MS(this,"async_queue_retry"),this.vf=function(){var t=PS();t&&gg("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Gu.qu()};var t=PS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.vf)}function JA(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var $A,ZA=(nk.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},nk.prototype.catch=function(t){return this.Mf.promise.catch(t)},nk.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},nk.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},nk.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},nk.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)},nk),tk=(Xi(ek,$A=ON),ek.prototype.b_=function(){return this.qf||ik(this),this.qf.terminate()},ek);function ek(t,e){var n=this;return(n=$A.call(this,t,e)||this).Bf=new YA,n.w_="name"in t?t.name:"[DEFAULT]",n}function nk(){this.kf={},this.Mf=new $w,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function rk(t){return t.qf||ik(t),t.qf.df(),t.qf}function ik(t){var e,n,r=t.p_(),r=(e=t.I_,n=t.w_,new fg(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.qf=new DA(t.m_,t.Bf,r)}function ok(r,i,o){var t=this,s=new $w;return r._s.enqueue(function(){return $i(t,void 0,void 0,function(){var n;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,FA(r,o)];case 1:return t.sent(),[4,UA(r,i)];case 2:return t.sent(),s.resolve(),[3,4];case 3:if(!("FirebaseError"===(e=n=t.sent()).name?e.code===Og.FAILED_PRECONDITION||e.code===Og.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code))throw n;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+n),s.reject(n),[3,4];case 4:return[2]}var e})})}).then(function(){return s.promise})}function sk(t){if(t.R_||t.P_)throw new Rg(Og.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ak,Sn=(fk.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Em(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ym(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(gm(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw wg()}},fk.prototype.Hf=function(t,n){var r=this,i={};return hm(t.fields||{},function(t,e){i[t]=r.Uf(e,n)}),i},fk.prototype.Gf=function(t){return new HN(ym(t.latitude),ym(t.longitude))},fk.prototype.zf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Uf(t,e)})},fk.prototype.Kf=function(t,e){switch(e){case"previous":var n=function t(e){e=e.mapValue.fields.__previous_value__;return mm(e)?t(e):e}(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(bm(t));default:return null}},fk.prototype.Qf=function(t){t=vm(t);return new Jg(t.seconds,t.nanos)},fk.prototype.Jf=function(t,e){var n=Zg.ot(t);Ig(Xw(n));t=new pg(n.get(1),n.get(3)),n=new nm(n.Y(5));return t.isEqual(e)||mg("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},fk),uk=(Object.defineProperty(lk.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(lk.prototype,"ref",{get:function(){return new RN(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),lk.prototype.exists=function(){return null!==this.Zf},lk.prototype.data=function(){if(this.Zf){if(this.v_){var t=new ck(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},lk.prototype.get=function(t){if(this.Zf){t=this.Zf.data().field(pk("DocumentSnapshot.get",t));if(null!==t)return this.Xf.Uf(t)}},lk),ck=(Xi(hk,ak=uk),hk.prototype.data=function(){return ak.prototype.data.call(this)},hk);function hk(){return null!==ak&&ak.apply(this,arguments)||this}function lk(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}function fk(){}function pk(t,e){return"string"==typeof e?kA(t,e):(e instanceof yN?e.d_:e).f_}function dk(t){if(xb(t)&&0===t.xt.length)throw new Rg(Og.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}W=function(){};function vk(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r].td(t);return t}var yk,gk,mk,bk,_k,wk=(Xi(Pk,_k=W),Pk.prototype.td=function(t){var e=nA(t.firestore),e=function(t,e,n,r,i,o){if(r.ut()){if("array-contains"===i||"array-contains-any"===i)throw new Rg(Og.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){xk(o,i);for(var s=[],a=0,u=o;a<u.length;a++){var c=u[a];s.push(Rk(n,t,c))}h={arrayValue:{values:s}}}else h=Rk(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||xk(o,i),h=IA(e,"where",o,"in"===i||"not-in"===i);var h=tb.create(r,i,h);return function(t,e){if(e.Ct()){var n=Lb(t);if(null!==n&&!n.isEqual(e.field))throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=Db(t);null!==n&&Dk(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new Rg(Og.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Rg(Og.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t.C_,e,t.firestore.I_,this.ed,this.nd,this.sd);return new xN(t.firestore,t.v_,(t=t.C_,e=t.filters.concat([e]),new kb(t.path,t.collectionGroup,t.xt.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},Pk),Ik=(Xi(kk,bk=W),kk.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Cb(e,n);return e=r,null!==Db(n=t)||null!==(t=Lb(n))&&Dk(0,t,e.field),r}(t.C_,this.ed,this.rd);return new xN(t.firestore,t.v_,(t=t.C_,e=t.xt.concat([e]),new kb(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},kk),Ek=(Xi(Ak,mk=W),Ak.prototype.td=function(t){return new xN(t.firestore,t.v_,Ub(t.C_,this.od,this.ad))},Ak),Tk=(Xi(Nk,gk=W),Nk.prototype.td=function(t){var e=Ok(t,this.type,this.ud,this.hd);return new xN(t.firestore,t.v_,(t=t.C_,e=e,new kb(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},Nk),Sk=(Xi(Ck,yk=W),Ck.prototype.td=function(t){var e=Ok(t,this.type,this.ud,this.hd);return new xN(t.firestore,t.v_,(t=t.C_,e=e,new kb(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},Ck);function Ck(t,e,n){var r=this;return(r=yk.call(this)||this).type=t,r.ud=e,r.hd=n,r}function Nk(t,e,n){var r=this;return(r=gk.call(this)||this).type=t,r.ud=e,r.hd=n,r}function Ak(t,e,n){var r=this;return(r=mk.call(this)||this).type=t,r.od=e,r.ad=n,r}function kk(t,e){var n=this;return(n=bk.call(this)||this).ed=t,n.rd=e,n.type="orderBy",n}function Pk(t,e,n){var r=this;return(r=_k.call(this)||this).ed=t,r.nd=e,r.sd=n,r.type="where",r}function Ok(t,c,e,n){if(e[0]instanceof yN&&(e[0]=e[0].d_),e[0]instanceof uk)return function(t,e,n,r){if(!n)throw new Rg(Og.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=jb(t);o<s.length;o++){var a=s[o];if(a.field.ut())i.push(km(e,n.key));else{var u=n.field(a.field);if(mm(u))throw new Rg(Og.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){a=a.field.rt();throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}i.push(u)}}return new _b(i,r)}(t.C_,t.firestore.I_,e[0].Zf,n);var r=nA(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new Rg(Og.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Mb(t)&&-1!==c.indexOf("/"))throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Zg.ot(c));if(!nm.wt(h))throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new nm(h);a.push(km(e,h))}else{c=IA(n,r,c);a.push(c)}}return new _b(a,o)}(t.C_,t.firestore.I_,r,c,e,n)}function Rk(t,e,n){if("string"==typeof(n=n instanceof yN?n.d_:n)){if(""===n)throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mb(e)&&-1!==n.indexOf("/"))throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(Zg.ot(n));if(!nm.wt(e))throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return km(t,new nm(e))}if(n instanceof RN)return km(t,n.S_);throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+SN(n)+".")}function xk(t,e){if(!Array.isArray(t)||0===t.length)throw new Rg(Og.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Rg(Og.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Dk(t,e,n){if(!n.isEqual(e))throw new Rg(Og.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Lk(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Mk,jk,Fk,Uk=(Xi(Qk,Fk=Sn),Qk.prototype.Wf=function(t){return new xg(t)},Qk.prototype.jf=function(t){t=this.Jf(t,this.firestore.I_);return new RN(this.firestore,null,t)},Qk),Vk=(Kk.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},Kk),qk=(Xi(Wk,jk=uk),Wk.prototype.exists=function(){return jk.prototype.exists.call(this)},Wk.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new Bk(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},Wk.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){t=this.Zf.data().field(pk("DocumentSnapshot.get",t));if(null!==t)return this.Xf.Uf(t,e.serverTimestamps)}},Wk),Bk=(Xi(Gk,Mk=qk),Gk.prototype.data=function(t){return void 0===t&&(t={}),Mk.prototype.data.call(this,t)},Gk),zk=(Object.defineProperty(Hk.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(Hk.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(Hk.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),Hk.prototype.forEach=function(e,n){var r=this;this._d.docs.forEach(function(t){e.call(n,new Bk(r.Yf,r.Xf,t.key,t,new Vk(r._d.De.has(t.key),r._d.fromCache),r.query.v_))})},Hk.prototype.docChanges=function(t){t=!!(t=void 0===t?{}:t).includeMetadataChanges;if(t&&this._d.xe)throw new Rg(Og.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===t||(this.fd=function(i,e){if(i._d.Se.et()){var n=0;return i._d.docChanges.map(function(t){var e=new Bk(i.Yf,i.Xf,t.doc.key,t.doc,new Vk(i._d.De.has(t.doc.key),i._d.fromCache),i.query.v_);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i._d.Se;return i._d.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new Bk(i.Yf,i.Xf,t.doc.key,t.doc,new Vk(i._d.De.has(t.doc.key),i._d.fromCache),i.query.v_),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wg()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this,t),this.dd=t),this.fd},Hk);function Hk(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new Vk(r.hasPendingWrites,r.fromCache),this.query=n}function Gk(){return null!==Mk&&Mk.apply(this,arguments)||this}function Wk(t,e,n,r,i,o){var s=this;return(s=jk.call(this,t,e,n,r,o)||this).Yf=t,s.ld=t,s.metadata=i,s}function Kk(t,e){this.hasPendingWrites=t,this.fromCache=e}function Qk(t){var e=this;return(e=Fk.call(this)||this).firestore=t,e}function Yk(t,e){return t instanceof qk&&e instanceof qk?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof zk&&e instanceof zk&&t.Yf===e.Yf&&zN(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var Xk,Jk=(Xi($k,Xk=Sn),$k.prototype.Wf=function(t){return new xg(t)},$k.prototype.jf=function(t){t=this.Jf(t,this.firestore.I_);return new RN(this.firestore,null,t)},$k);function $k(t){var e=this;return(e=Xk.call(this)||this).firestore=t,e}function Zk(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=CN(t,RN);var o=CN(t.firestore,tk),s=nA(o);return eP(o,[("string"==typeof(e=e instanceof yN?e.d_:e)||e instanceof dN?wA(s,"updateDoc",t.S_,e,n,r):_A(s,"updateDoc",t.S_,e)).F_(t.S_,v_.exists(!0))])}function tP(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e instanceof yN&&(e=e.d_);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||JA(n[i])||(r=n[i],i++);var o,s,a,u,c,h,l={includeMetadataChanges:r.includeMetadataChanges};return JA(n[i])&&(o=n[i],n[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),n[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),n[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof RN?(a=CN(e.firestore,tk),u=Ob(e.S_.path),h={next:function(t){n[i]&&n[i](nP(a,e,t))},error:n[i+1],complete:n[i+2]}):(s=CN(e,xN),a=CN(s.firestore,tk),u=s.C_,c=new Jk(a),h={next:function(t){n[i]&&n[i](new zk(a,c,s,t))},error:n[i+1],complete:n[i+2]},dk(e.C_)),function(n,t,e){var r=this,i=new fN(h),o=new gC(t,i,e);return n._s.Ps(function(){return $i(r,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=dC,[4,WA(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.i_(),n._s.Ps(function(){return $i(r,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=vC,[4,WA(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(rk(a),u,l)}function eP(t,e){return function(n,r){var t=this,i=new $w;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=LC,[4,GA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(rk(t),e)}function nP(t,e,n){var r=n.docs.get(e.S_),i=new Jk(t);return new qk(t,i,e.S_,r,new Vk(n.hasPendingWrites,n.fromCache),e.v_)}var rP=(iP.prototype.set=function(t,e,n){this.md();t=oP(t,this.Yf),e=Lk(t.v_,e,n),n=rA(this.Id,"WriteBatch.set",t.S_,e,null!==t.v_,n);return this.Ed.push(n.F_(t.S_,v_.Kt())),this},iP.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();t=oP(t,this.Yf),e="string"==typeof(e=e instanceof yN?e.d_:e)||e instanceof dN?wA(this.Id,"WriteBatch.update",t.S_,e,n,r):_A(this.Id,"WriteBatch.update",t.S_,e);return this.Ed.push(e.F_(t.S_,v_.exists(!0))),this},iP.prototype.delete=function(t){this.md();t=oP(t,this.Yf);return this.Ed=this.Ed.concat(new L_(t.S_,v_.Kt())),this},iP.prototype.commit=function(){return this.md(),this.Td=!0,0<this.Ed.length?this.wd(this.Ed):Promise.resolve()},iP.prototype.md=function(){if(this.Td)throw new Rg(Og.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},iP);function iP(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=nA(t)}function oP(t,e){if((t=t instanceof yN?t.d_:t).firestore!==e)throw new Rg(Og.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var sP,aP=(cP.prototype.get=function(t){var e=this,n=oP(t,this.Yf),r=new Uk(this.Yf);return this.Ad.ef([n.S_]).then(function(t){if(!t||1!==t.length)return wg();t=t[0];if(t instanceof zm)return new uk(e.Yf,r,n.S_,null,n.v_);if(t instanceof Bm)return new uk(e.Yf,r,t.key,t,n.v_);throw wg()})},cP.prototype.set=function(t,e,n){t=oP(t,this.Yf),e=Lk(t.v_,e,n),n=rA(this.Id,"Transaction.set",t.S_,e,null!==t.v_,n);return this.Ad.set(t.S_,n),this},cP.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=oP(t,this.Yf),e="string"==typeof(e=e instanceof yN?e.d_:e)||e instanceof dN?wA(this.Id,"Transaction.update",t.S_,e,n,r):_A(this.Id,"Transaction.update",t.S_,e);return this.Ad.update(t.S_,e),this},cP.prototype.delete=function(t){t=oP(t,this.Yf);return this.Ad.delete(t.S_),this},Xi(uP,sP=cP),uP.prototype.get=function(t){var e=this,n=oP(t,this.Yf),r=new Jk(this.Yf);return sP.prototype.get.call(this,t).then(function(t){return new qk(e.Yf,r,n.S_,t.Zf,new Vk(!1,!1),n.v_)})},uP);function uP(t,e){var n=this;return(n=sP.call(this,t,e)||this).Yf=t,n}function cP(t,e){this.Yf=t,this.Ad=e,this.Id=nA(t)}function hP(){if("undefined"==typeof Uint8Array)throw new Rg(Og.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function lP(){if("undefined"==typeof atob)throw new Rg(Og.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var fP,pP,dP,vP=(Xi(IP,dP=yN),IP.fromBase64String=function(t){return lP(),new IP(xg.fromBase64String(t))},IP.fromUint8Array=function(t){return hP(),new IP(xg.fromUint8Array(t))},IP.prototype.toBase64=function(){return lP(),this.d_.toBase64()},IP.prototype.toUint8Array=function(){return hP(),this.d_.toUint8Array()},IP.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},IP.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},IP),yP=(wP.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){sk(t=CN(t,tk));var n=rk(t),r=t.p_(),t=new sN;return ok(n,t,new iN(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},wP.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){sk(t=CN(t,tk));var e=rk(t),n=t.p_(),t=new sN;return ok(e,t,new oN(t,n.cacheSizeBytes))}(t.d_)},wP.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n.R_&&!n.P_)throw new Rg(Og.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new $w;return n.Bf.Tf(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return eI.Kn()?(e=n+"main",[4,eI.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(lT(n.I_,n.w_))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t.d_)},wP),gP=(Xi(_P,pP=yN),Object.defineProperty(_P.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),_P.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},_P.prototype.useEmulator=function(t,e){var n,r;n=this.d_,r=t,t=e,"firestore.googleapis.com"!==(e=(n=CN(n,ON)).V_()).host&&e.host!==r&&bg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n.g_(Object.assign(Object.assign({},e),{host:r+":"+t,ssl:!1}))},_P.prototype.enableNetwork=function(){return function(i){var t=this;return i._s.enqueue(function(){return $i(t,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,BA(i)];case 1:return n=t.sent(),[4,HA(i)];case 2:return r=t.sent(),[2,(n.yo(!0),(e=r).Nh.delete(0),KS(e))]}var e})})})}(rk(CN(this.d_,tk)))},_P.prototype.disableNetwork=function(){return function(r){var t=this;return r._s.enqueue(function(){return $i(t,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,BA(r)];case 1:return e=t.sent(),[4,HA(r)];case 2:return n=t.sent(),[2,(e.yo(!1),function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=n).Nh.add(0),[4,QS(e)];case 1:return t.sent(),e.Oh.set("Offline"),[2]}})})}(n))]}})})})}(rk(CN(this.d_,tk)))},_P.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&IN("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},_P.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},_P.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},_P.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new $w;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=UC,[4,GA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(rk(CN(this.d_,tk)))},_P.prototype.onSnapshotsInSync=function(t){return e=this.d_,t=t,function(n,t){var e=this,r=new fN(t);return n._s.Ps(function(){return $i(e,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Wh.add(e),e.next()},[4,WA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),function(){r.i_(),n._s.Ps(function(){return $i(e,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Wh.delete(e)},[4,WA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}}(rk(CN(e,tk)),JA(t)?t:{next:t});var e},Object.defineProperty(_P.prototype,"app",{get:function(){if(!this.Pd)throw new Rg(Og.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),_P.prototype.collection=function(t){try{return new YP(this,VN(this.d_,t))}catch(t){throw LP(t,"collection()","Firestore.collection()")}},_P.prototype.doc=function(t){try{return new xP(this,qN(this.d_,t))}catch(t){throw LP(t,"doc()","Firestore.doc()")}},_P.prototype.collectionGroup=function(t){try{return new WP(this,function(t,e){if(t=CN(t,ON),_N("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new Rg(Og.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new xN(t,null,(e=e,new kb(Zg.ct(),e)))}(this.d_,t))}catch(t){throw LP(t,"collectionGroup()","Firestore.collectionGroup()")}},_P.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new $w;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,qA(n).then(function(t){return t.Sh})];case 1:return e=t.sent(),new xA(n._s,e,r,i).run(),[2]}})})}),i.promise}(rk(n=this.d_),function(t){return t=new aP(n,t),e(new CP(r,t))})},_P.prototype.batch=function(){var e=this;return rk(this.d_),new NP(new rP(this.d_,function(t){return eP(e.d_,t)}))},_P.prototype.loadBundle=function(t){throw new Rg(Og.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},_P.prototype.namedQuery=function(t){throw new Rg(Og.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},_P),mP=(Xi(bP,fP=Sn),bP.prototype.Wf=function(t){return new vP(new xg(t))},bP.prototype.jf=function(t){t=this.Jf(t,this.firestore.I_);return xP.yd(t,this.firestore,null)},bP);function bP(t){var e=this;return(e=fP.call(this)||this).firestore=t,e}function _P(t,e,n){var r=this;return(r=pP.call(this,e)||this).Rd=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof pg||(r.Pd=t),r}function wP(){}function IP(){return null!==dP&&dP.apply(this,arguments)||this}var EP,TP,SP,CP=(Xi(OP,SP=yN),OP.prototype.get=function(t){var e=this,n=nO(t);return this.d_.get(n).then(function(t){return new HP(e.Yf,new qk(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))})},OP.prototype.set=function(t,e,n){t=nO(t);return n?(wN("Transaction.set",n),this.d_.set(t,e,n)):this.d_.set(t,e),this},OP.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=nO(t);return 2===arguments.length?this.d_.update(o,e):(t=this.d_).update.apply(t,no([o,e,n],r)),this},OP.prototype.delete=function(t){t=nO(t);return this.d_.delete(t),this},OP),NP=(Xi(PP,TP=yN),PP.prototype.set=function(t,e,n){t=nO(t);return n?(wN("WriteBatch.set",n),this.d_.set(t,e,n)):this.d_.set(t,e),this},PP.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=nO(t);return 2===arguments.length?this.d_.update(o,e):(t=this.d_).update.apply(t,no([o,e,n],r)),this},PP.prototype.delete=function(t){t=nO(t);return this.d_.delete(t),this},PP.prototype.commit=function(){return this.d_.commit()},PP),AP=(Xi(kP,EP=yN),kP.prototype.fromFirestore=function(t,e){t=new Bk(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new GP(this.Yf,t),null!=e?e:{})},kP.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},kP.gd=function(t,e){var n=kP.Vd,r=n.get(t);r||(r=new WeakMap,n.set(t,r));n=r.get(e);return n||(n=new kP(t,new mP(t),e),r.set(e,n)),n},kP);function kP(t,e,n){var r=this;return(r=EP.call(this,n)||this).Yf=t,r.Xf=e,r}function PP(){return null!==TP&&TP.apply(this,arguments)||this}function OP(t,e){var n=this;return(n=SP.call(this,e)||this).Yf=t,n.Xf=new mP(t),n}AP.Vd=new WeakMap;var RP,xP=(Xi(DP,RP=yN),DP.pd=function(t,e,n){if(t.length%2!=0)throw new Rg(Og.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new DP(e,new RN(e.d_,n,new nm(t)))},DP.yd=function(t,e,n){return new DP(e,new RN(e.d_,n,t))},Object.defineProperty(DP.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(DP.prototype,"parent",{get:function(){return new YP(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(DP.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),DP.prototype.collection=function(t){try{return new YP(this.firestore,VN(this.d_,t))}catch(t){throw LP(t,"collection()","DocumentReference.collection()")}},DP.prototype.isEqual=function(t){return(t=t instanceof yN?t.d_:t)instanceof RN&&BN(this.d_,t)},DP.prototype.set=function(t,e){e=wN("DocumentReference.set",e);try{return function(t,e,n){t=CN(t,RN);var r=CN(t.firestore,tk),e=Lk(t.v_,e,n);return eP(r,[rA(nA(r),"setDoc",t.S_,e,null!==t.v_,n).F_(t.S_,v_.Kt())])}(this.d_,t,e)}catch(t){throw LP(t,"setDoc()","DocumentReference.set()")}},DP.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Zk(this.d_,t):Zk.apply(void 0,no([this.d_,t,e],n))}catch(t){throw LP(t,"updateDoc()","DocumentReference.update()")}},DP.prototype.delete=function(){return eP(CN((t=this.d_).firestore,tk),[new L_(t.S_,v_.Kt())]);var t},DP.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=MP(t),i=jP(t,function(t){return new HP(e.firestore,new qk(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))});return tP(this.d_,r,i)},DP.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=CN(e,RN);var n=CN(e.firestore,tk),t=rk(n),r=new Jk(n);return function(n,r){var t=this,i=new $w;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(o,s,a){return $i(this,void 0,void 0,function(){var r,i;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=s,(n=o).persistence.runTransaction("read document","readonly",function(t){return n.Tc.Ho(t,e)}))];case 1:return(i=t.sent())instanceof Bm?a.resolve(i):i instanceof zm?a.resolve(null):a.reject(new Rg(Og.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),i=gI(r,"Failed to get document '"+s+" from cache"),a.reject(i),[3,3];case 3:return[2]}var e,n})})},[4,zA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.S_).then(function(t){return new qk(n,r,e.S_,t,new Vk(t instanceof Bm&&t.Vt,!0),e.v_)})}:"server"===(null==t?void 0:t.source)?function(e){e=CN(e,RN);var n=CN(e.firestore,tk);return KA(rk(n),e.S_,{source:"server"}).then(function(t){return nP(n,e,t)})}:function(e){e=CN(e,RN);var n=CN(e.firestore,tk);return KA(rk(n),e.S_).then(function(t){return nP(n,e,t)})})(this.d_).then(function(t){return new HP(e.firestore,new qk(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))})},DP.prototype.withConverter=function(t){return new DP(this.firestore,t?this.d_.withConverter(AP.gd(this.firestore,t)):this.d_.withConverter(null))},DP);function DP(t,e){var n=this;return(n=RP.call(this,e)||this).firestore=t,n.Xf=new mP(t),n}function LP(t,e,n){return t.message=t.message.replace(e,n),t}function MP(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!JA(r))return r}return{}}function jP(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=JA(t[0])?t[0]:JA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var FP,UP,VP,qP,BP,zP,HP=(Xi(eO,zP=yN),Object.defineProperty(eO.prototype,"ref",{get:function(){return new xP(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(eO.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(eO.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(eO.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),eO.prototype.data=function(t){return this.d_.data(t)},eO.prototype.get=function(t,e){return this.d_.get(t,e)},eO.prototype.isEqual=function(t){return Yk(this.d_,t.d_)},eO),GP=(Xi(tO,BP=HP),tO.prototype.data=function(t){return this.d_.data(t)},tO),WP=(Xi(ZP,qP=yN),ZP.prototype.where=function(t,e,n){try{return new ZP(this.firestore,vk(this.d_,(r=n,i=e,o=pk("where",t),new wk(o,i,r))))}catch(t){throw LP(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},ZP.prototype.orderBy=function(t,e){try{return new ZP(this.firestore,vk(this.d_,(n=void 0===e?"asc":e,r=pk("orderBy",t),new Ik(r,n))))}catch(t){throw LP(t,/(orderBy|where)\(\)/,"Query.$1()")}var n,r},ZP.prototype.limit=function(t){try{return new ZP(this.firestore,vk(this.d_,(NN("limit",e=t),new Ek("limit",e,"F"))))}catch(t){throw LP(t,"limit()","Query.limit()")}var e},ZP.prototype.limitToLast=function(t){try{return new ZP(this.firestore,vk(this.d_,(NN("limitToLast",e=t),new Ek("limitToLast",e,"L"))))}catch(t){throw LP(t,"limitToLast()","Query.limitToLast()")}var e},ZP.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new ZP(this.firestore,vk(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Tk("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw LP(t,"startAt()","Query.startAt()")}},ZP.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new ZP(this.firestore,vk(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Tk("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw LP(t,"startAfter()","Query.startAfter()")}},ZP.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new ZP(this.firestore,vk(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sk("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw LP(t,"endBefore()","Query.endBefore()")}},ZP.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new ZP(this.firestore,vk(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sk("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw LP(t,"endAt()","Query.endAt()")}},ZP.prototype.isEqual=function(t){return zN(this.d_,t.d_)},ZP.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=CN(e,xN);var n=CN(e.firestore,tk),t=rk(n),r=new Jk(n);return function(n,r){var t=this,i=new $w;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(i,o,s){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,kT(i,o,!0)];case 1:return r=t.sent(),e=new AC(o,r.Rc),n=e.fl(r.documents),n=e.wi(n,!1),s.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),r=gI(n,"Failed to execute query '"+o+" against cache"),s.reject(r),[3,3];case 3:return[2]}})})},[4,zA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.C_).then(function(t){return new zk(n,r,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){e=CN(e,xN);var n=CN(e.firestore,tk),t=rk(n),r=new Jk(n);return QA(t,e.C_,{source:"server"}).then(function(t){return new zk(n,r,e,t)})}:function(e){e=CN(e,xN);var n=CN(e.firestore,tk),t=rk(n),r=new Jk(n);return dk(e.C_),QA(t,e.C_).then(function(t){return new zk(n,r,e,t)})})(this.d_).then(function(t){return new QP(e.firestore,new zk(e.firestore.d_,e.Xf,e.d_,t._d))})},ZP.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=MP(t),i=jP(t,function(t){return new QP(e.firestore,new zk(e.firestore.d_,e.Xf,e.d_,t._d))});return tP(this.d_,r,i)},ZP.prototype.withConverter=function(t){return new ZP(this.firestore,t?this.d_.withConverter(AP.gd(this.firestore,t)):this.d_.withConverter(null))},ZP),KP=(Xi($P,VP=yN),Object.defineProperty($P.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty($P.prototype,"doc",{get:function(){return new GP(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty($P.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty($P.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),$P),QP=(Xi(JP,UP=yN),Object.defineProperty(JP.prototype,"query",{get:function(){return new WP(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(JP.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(JP.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(JP.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(JP.prototype,"docs",{get:function(){var e=this;return this.d_.docs.map(function(t){return new GP(e.Yf,t)})},enumerable:!1,configurable:!0}),JP.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map(function(t){return new KP(e.Yf,t)})},JP.prototype.forEach=function(e,n){var r=this;this.d_.forEach(function(t){e.call(n,new GP(r.Yf,t))})},JP.prototype.isEqual=function(t){return Yk(this.d_,t.d_)},JP),YP=(Xi(XP,FP=WP),Object.defineProperty(XP.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(XP.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(XP.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new xP(this.firestore,t):null},enumerable:!1,configurable:!0}),XP.prototype.doc=function(t){try{return new xP(this.firestore,void 0===t?qN(this.d_):qN(this.d_,t))}catch(t){throw LP(t,"doc()","CollectionReference.doc()")}},XP.prototype.add=function(t){var e,n,r,i=this;return e=this.d_,n=t,t=CN(e.firestore,tk),r=qN(e),n=Lk(e.v_,n),eP(t,[rA(nA(e.firestore),"addDoc",r.S_,n,null!==e.v_,{}).F_(r.S_,v_.exists(!1))]).then(function(){return r}).then(function(t){return new xP(i.firestore,t)})},XP.prototype.isEqual=function(t){return BN(this.d_,t.d_)},XP.prototype.withConverter=function(t){return new XP(this.firestore,t?this.d_.withConverter(AP.gd(this.firestore,t)):this.d_.withConverter(null))},XP);function XP(t,e){var n=this;return(n=FP.call(this,t,e)||this).firestore=t,n.d_=e,n}function JP(t,e){var n=this;return(n=UP.call(this,e)||this).Yf=t,n}function $P(t,e){var n=this;return(n=VP.call(this,e)||this).Yf=t,n}function ZP(t,e){var n=this;return(n=qP.call(this,e)||this).firestore=t,n.Xf=new mP(t),n}function tO(){return null!==BP&&BP.apply(this,arguments)||this}function eO(t,e){var n=this;return(n=zP.call(this,e)||this).Yf=t,n}function nO(t){return CN(t=t instanceof yN?t.d_:t,RN)}var rO,iO,W=(Xi(sO,iO=yN),sO.documentId=function(){return new sO(em.ht().rt())},sO.prototype.isEqual=function(t){return(t=t instanceof yN?t.d_:t)instanceof dN&&this.d_.f_.isEqual(t.f_)},sO),Sn=(Xi(oO,rO=yN),oO.serverTimestamp=function(){var t=new fA("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new oO(t)},oO.delete=function(){var t=new oA("deleteField");return t._methodName="FieldValue.delete",new oO(t)},oO.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pA("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new oO(n)},oO.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dA("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new oO(n)},oO.increment=function(t){t=new vA("increment",t);return t._methodName="FieldValue.increment",new oO(t)},oO.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},oO);function oO(){return null!==rO&&rO.apply(this,arguments)||this}function sO(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return iO.call(this,new(dN.bind.apply(dN,no([void 0],t))))||this}function aO(t){return e=this.d_,s=t,n=rk(e=CN(e,tk)),t=new ZA,function(n,t,r){var e,i=this,o=(e=s,t=OS(t),e=function(t){if(t instanceof Uint8Array)return lN(t,void 0);if(t instanceof ArrayBuffer)return lN(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),new pN(e,t));n._s.Ps(function(){return $i(i,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=tN,[4,GA(n)];case 1:return e.apply(void 0,[t.sent(),o,r]),[2]}})})})}(n,e.I_,t),t;var e,s,n}function uO(t){var e=this,n=this.d_,t=t;return function(n,r){var t=this;return n._s.enqueue(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",function(t){return n.wo.Ms(t,e)})},[4,zA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}(rk(n=CN(n,tk)),t).then(function(t){return t?new xN(n,null,t.query):null}).then(function(t){return t?new WP(e,t):null})}var cO,hO,lO={Firestore:gP,GeoPoint:HN,Timestamp:Jg,Blob:vP,Transaction:CP,WriteBatch:NP,DocumentReference:xP,DocumentSnapshot:HP,Query:WP,QueryDocumentSnapshot:GP,QuerySnapshot:QP,CollectionReference:YP,FieldPath:W,FieldValue:Sn,setLogLevel:function(t){dg.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(cO=Jl).INTERNAL.registerComponent(new Zo("firestore",function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new gP(e,new tk(e,t),new yP)},"PUBLIC").setServiceProps(Object.assign({},lO))),cO.registerVersion("@firebase/firestore","2.2.0"),(hO=gP).prototype.loadBundle=aO,hO.prototype.namedQuery=uO;var fO,pO={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},dO=(Xi(vO,fO=Error),vO);function vO(t,e,n){e=fO.call(this,e)||this;return Object.setPrototypeOf(e,vO.prototype),e.code=t,e.details=n,e}function yO(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!pO[a])return new dO("internal","internal");r=pO[a],i=a}a=s.message;"string"==typeof a&&(i=a),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new dO(r,i,o)}var gO=(mO.prototype.getAuthToken=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},mO.prototype.getInstanceIdToken=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},mO.prototype.getContext=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},mO);function mO(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function bO(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var _O=(wO.prototype.encode=function(t){var e=this;if(null==t)return null;if("number"==typeof(t=t instanceof Number?t.valueOf():t)&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return bO(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},wO.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?bO(t,function(t){return e.decode(t)}):t},wO);function wO(){}var IO=(Object.defineProperty(EO.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),EO.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},EO.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},EO.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},EO.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},EO.prototype.postJSON=function(r,i,o){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},EO.prototype.call=function(c,h,l){return $i(this,void 0,void 0,function(){var i,o,s,a,u;return Zi(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new dO("deadline-exceeded","deadline-exceeded"))},n)}),u=(a={timer:r,promise:e}).timer,a=a.promise,[4,Promise.race([TO(u,this.postJSON(i,o,s)),a,TO(u,this.cancelAllRequests)])];case 2:if(!(a=t.sent()))throw new dO("cancelled","Firebase Functions instance was deleted.");if(u=yO(a.status,a.json,this.serializer))throw u;if(!a.json)throw new dO("internal","Response is not valid JSON object.");if(void 0===(u=void 0===(u=a.json.data)?a.json.result:u))throw new dO("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},EO);function EO(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new _O,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new gO(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function TO(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}var SO,CO,NO;function AO(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function kO(n,r,i){var o,t=new Promise(function(t,e){AO(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function PO(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function OO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return kO(this[n],t,arguments)})})}function RO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function xO(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=kO(t,n,arguments)).then(function(t){if(t)return new LO(t,e.request)});var t,e})})}function DO(t){this._index=t}function LO(t,e){this._cursor=t,this._request=e}function MO(t){this._store=t}function jO(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function FO(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new jO(n)}function UO(t){this._db=t}function VO(t,e,n){var e=kO(indexedDB,"open",[t,e]),r=e.request;return r&&(r.onupgradeneeded=function(t){n&&n(new FO(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new UO(t)})}function qO(t){return kO(indexedDB,"deleteDatabase",[t])}SO=Jl,CO=fetch.bind(self),NO={Functions:IO},SO.INTERNAL.registerComponent(new Zo("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),t=t.getProvider("messaging");return new IO(n,r,t,e,CO)},"PUBLIC").setServiceProps(NO).setMultipleInstances(!0)),Jl.registerVersion("@firebase/functions","0.6.3"),PO(DO,"_index",["name","keyPath","multiEntry","unique"]),OO(DO,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),xO(DO,"_index",IDBIndex,["openCursor","openKeyCursor"]),PO(LO,"_cursor",["direction","key","primaryKey","value"]),OO(LO,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(LO.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),AO(e._request).then(function(t){if(t)return new LO(t,e._request)})})})}),MO.prototype.createIndex=function(){return new DO(this._store.createIndex.apply(this._store,arguments))},MO.prototype.index=function(){return new DO(this._store.index.apply(this._store,arguments))},PO(MO,"_store",["name","keyPath","indexNames","autoIncrement"]),OO(MO,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),xO(MO,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),RO(MO,"_store",IDBObjectStore,["deleteIndex"]),jO.prototype.objectStore=function(){return new MO(this._tx.objectStore.apply(this._tx,arguments))},PO(jO,"_tx",["objectStoreNames","mode"]),RO(jO,"_tx",IDBTransaction,["abort"]),FO.prototype.createObjectStore=function(){return new MO(this._db.createObjectStore.apply(this._db,arguments))},PO(FO,"_db",["name","version","objectStoreNames"]),RO(FO,"_db",IDBDatabase,["deleteObjectStore","close"]),UO.prototype.transaction=function(){return new jO(this._db.transaction.apply(this._db,arguments))},PO(UO,"_db",["name","version","objectStoreNames"]),RO(UO,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[MO,DO].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[DO,MO].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var BO=1e4,zO="w:0.4.21",HO="FIS_v2",GO="https://firebaseinstallations.googleapis.com/v1",WO=36e5,Sn=((W={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',W["not-registered"]="Firebase Installation is not registered.",W["installation-not-found"]="Firebase Installation not found.",W["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',W["app-offline"]="Could not process request. Application offline.",W["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",W),KO=new Co("installations","Installations",Sn);function QO(t){return t instanceof To&&t.code.includes("request-failed")}function YO(t){t=t.projectId;return GO+"/projects/"+t+"/installations"}function XO(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function JO(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent(),e=e.error,[2,KO.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function $O(t){t=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ZO(t,e){e=e.refreshToken,t=$O(t);return t.append("Authorization",HO+" "+e),t}function tR(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function eR(e){return new Promise(function(t){setTimeout(t,e)})}var nR=/^[cdef][\w-]{21}$/,rR="";function iR(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;t=function(t){return btoa(String.fromCharCode.apply(String,no([],eo(t)))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return nR.test(t)?t:rR}catch(t){return rR}}function oR(t){return t.appName+"!"+t.appId}var sR=new Map;function aR(t,e){var n=oR(t);uR(n,e),t=n,n=e,(e=hR())&&e.postMessage({key:t,fid:n}),lR()}function uR(t,e){var n,r,i=sR.get(t);if(i)try{for(var o=to(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var cR=null;function hR(){return!cR&&"BroadcastChannel"in self&&((cR=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){uR(t.data.key,t.data.fid)}),cR}function lR(){0===sR.size&&cR&&(cR.close(),cR=null)}var fR,pR="firebase-installations-database",dR=1,vR="firebase-installations-store",yR=null;function gR(){return yR=yR||VO(pR,dR,function(t){0===t.oldVersion&&t.createObjectStore(vR)})}function mR(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return e=oR(o),[4,gR()];case 1:return r=t.sent(),n=r.transaction(vR,"readwrite"),[4,(r=n.objectStore(vR)).get(e)];case 2:return i=t.sent(),[4,r.put(s,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===s.fid||aR(o,s.fid),[2,s]}})})}function bR(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=oR(r),[4,gR()];case 1:return n=t.sent(),[4,(n=n.transaction(vR,"readwrite")).objectStore(vR).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function _R(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=oR(s),[4,gR()];case 1:return r=t.sent(),n=r.transaction(vR,"readwrite"),[4,(r=n.objectStore(vR)).get(e)];case 2:return i=t.sent(),void 0!==(o=a(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||aR(s,o.fid),[2,o]}})})}function wR(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,_R(i,function(t){t=ER(t||{fid:iR(),registrationStatus:0}),t=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,IR(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,eR(100)];case 3:return t.sent(),[4,IR(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,wR(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(KO.create("app-offline"));return{installationEntry:e,registrationPromise:n}}e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},t=function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(s,t){var a=t.fid;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=YO(s),n=$O(s),o={fid:a,authVersion:HO,appId:s.appId,sdkVersion:zO},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,tR(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,{fid:o.fid||a,registrationStatus:2,refreshToken:o.refreshToken,authToken:XO(o.authToken)}];case 3:return[4,JO("Create Installation",i)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,mR(r,e)];case 2:return QO(n=t.sent())&&409===n.customData.serverCode?[4,bR(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,mR(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,e);return{installationEntry:e,registrationPromise:t}}}(i,t);return e=t.registrationPromise,t.installationEntry})];case 1:return(n=t.sent()).fid!==rR?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=t.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function IR(t){return _R(t,function(t){if(!t)throw KO.create("installation-not-found");return ER(t)})}function ER(t){return 1===(e=t).registrationStatus&&e.registrationTime+BO<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function TR(t,s){var a=t.appConfig,u=t.platformLoggerProvider;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return YO(t)+"/"+e+"/authTokens:generate"}(a,s),n=ZO(a,s),(o=u.getImmediate({optional:!0}))&&n.append("x-firebase-client",o.getPlatformInfoString()),o={installation:{sdkVersion:zO}},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,tR(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,XO(o)];case 3:return[4,JO("Generate Auth Token",i)];case 4:throw t.sent()}})})}function SR(i,o){return void 0===o&&(o=!1),$i(this,void 0,void 0,function(){var r,e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,_R(i.appConfig,function(t){if(!NR(t))throw KO.create("not-registered");var e,n=t.authToken;if(o||2!==(e=n).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+WO}(e)){if(1===n.requestStatus)return r=function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,CR(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,eR(100)];case 3:return t.sent(),[4,CR(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,SR(n,r)]:[2,e]}})})}(i,o),t;if(!navigator.onLine)throw KO.create("app-offline");n=(e=t,n={requestStatus:1,requestTime:Date.now()},Ji(Ji({},e),{authToken:n}));return r=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,TR(i,o)];case 1:return e=t.sent(),r=Ji(Ji({},o),{authToken:e}),[4,mR(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!QO(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,bR(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Ji(Ji({},o),{authToken:{requestStatus:0}}),[4,mR(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return t})];case 1:return e=t.sent(),r?[4,r]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function CR(t){return _R(t,function(t){if(!NR(t))throw KO.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+BO<Date.now()?Ji(Ji({},t),{authToken:{requestStatus:0}}):t})}function NR(t){return void 0!==t&&2===t.registrationStatus}function AR(e,n){return void 0===n&&(n=!1),$i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,wR(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,SR(e,n)];case 2:return[2,t.sent().token]}})})}function kR(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return YO(t)+"/"+e}(i,o),r=ZO(i,o),n={method:"DELETE",headers:r},[4,tR(function(){return fetch(e,n)})];case 1:return(r=t.sent()).ok?[3,3]:[4,JO("Delete Installation",r)];case 2:throw t.sent();case 3:return[2]}})})}function PR(t,r){var i=t.appConfig;return function(t,e){hR();var n=oR(t);(t=sR.get(n))||(t=new Set,sR.set(n,t)),t.add(e)}(i,r),function(){var t,e,n;e=r,n=oR(t=i),(t=sR.get(n))&&(t.delete(e),0===t.size&&sR.delete(n),lR())}}function OR(t){return KO.create("missing-app-config-values",{valueName:t})}(fR=Jl).INTERNAL.registerComponent(new Zo("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw OR("App Configuration");if(!t.name)throw OR("App Name");try{for(var r=to(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw OR(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,wR(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||SR(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return AR(n,t)},delete:function(){return function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,_R(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw KO.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw KO.create("app-offline");case 3:return[4,kR(e,n)];case 4:return t.sent(),[4,bR(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return PR(n,t)}}},"PUBLIC")),fR.registerVersion("@firebase/installations","0.4.21");var RR,Sn=((W={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',W["only-available-in-window"]="This method is available in a Window context.",W["only-available-in-sw"]="This method is available in a service worker context.",W["permission-default"]="The notification permission was not granted and dismissed instead.",W["permission-blocked"]="The notification permission was not granted and blocked instead.",W["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",W["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",W["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",W["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",W["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",W["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",W["token-update-no-token"]="FCM returned no token when updating the user to push.",W["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",W["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",W["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",W["invalid-vapid-key"]="The public VAPID key must be a string.",W["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",W),xR=new Co("messaging","Messaging",Sn),DR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",LR="https://fcmregistrations.googleapis.com/v1",MR="FCM_MSG",jR="google.c.a.c_id";function FR(t){t=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,no([],eo(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(W=RR=RR||{}).PUSH_RECEIVED="push-received",W.NOTIFICATION_CLICKED="notification-clicked";var UR="fcm_token_details_db",VR=5,qR="fcm_token_object_Store";function BR(s){return $i(this,void 0,void 0,function(){var e,o,n=this;return Zi(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(UR))return[2,null];t.label=2;case 2:return o=null,[4,VO(UR,VR,function(i){return $i(n,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return i.oldVersion<2?[2]:i.objectStoreNames.contains(qR)?[4,(r=i.transaction.objectStore(qR)).index("fcmSenderId").get(s)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:FR(n.vapidKey)}}}else(3===i.oldVersion||4===i.oldVersion)&&(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:FR(n.auth),p256dh:FR(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:FR(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,qO(UR)];case 4:return t.sent(),[4,qO("fcm_vapid_details_db")];case 5:return t.sent(),[4,qO("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(o)?o:null]}})})}var zR="firebase-messaging-database",HR=1,GR="firebase-messaging-store",WR=null;function KR(){return WR=WR||VO(zR,HR,function(t){0===t.oldVersion&&t.createObjectStore(GR)})}function QR(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=XR(r),[4,KR()];case 1:return[4,t.sent().transaction(GR).objectStore(GR).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,BR(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,YR(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function YR(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=XR(r),[4,KR()];case 1:return n=t.sent(),[4,(n=n.transaction(GR,"readwrite")).objectStore(GR).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function XR(t){return t.appConfig.appId}function JR(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,ZR(r)];case 1:e=t.sent(),e={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch($R(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,xR.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),xR.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function $R(t){t=t.projectId;return LR+"/projects/"+t+"/registrations"}function ZR(t){var n=t.appConfig,r=t.installations;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function tx(t){var e=t.p256dh,n=t.auth,r=t.endpoint,t=t.vapidKey,e={web:{endpoint:r,auth:n,p256dh:e}};return t!==DR&&(e.web.applicationPubKey=t),e}function ex(c,h,l){return $i(this,void 0,void 0,function(){var s,a,u;return Zi(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw xR.create("permission-blocked");return[4,function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(h,l)];case 1:return u=t.sent(),[4,QR(c)];case 2:return s=t.sent(),a={vapidKey:l,swScope:h.scope,endpoint:u.endpoint,auth:FR(u.getKey("auth")),p256dh:FR(u.getKey("p256dh"))},s?[3,3]:[2,rx(c,a)];case 3:if(e=s.subscriptionOptions,r=(n=a).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,e=n.p256dh===e.p256dh,r&&i&&o&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,JR(c,s.token)];case 5:return t.sent(),[3,7];case 6:return u=t.sent(),console.warn(u),[3,7];case 7:return[2,rx(c,a)];case 8:return Date.now()>=s.createTime+6048e5?[2,function(i,o,s){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,ZR(o)];case 1:e=t.sent(),n=tx(s.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch($R(o.appConfig)+"/"+s.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),xR.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,xR.create("token-update-failed",{errorInfo:i});if(!r.token)throw xR.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=Ji(Ji({},i),{token:e,createTime:Date.now()}),[4,YR(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,nx(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:s.token,createTime:Date.now(),subscriptionOptions:a},c,h)]:[2,s.token];case 9:return[2]}var e,n,r,i,o})})}function nx(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,QR(n)];case 1:return(e=t.sent())?[4,JR(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=XR(r),[4,KR()];case 1:return n=t.sent(),[4,(n=n.transaction(GR,"readwrite")).objectStore(GR).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function rx(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,function(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,ZR(o)];case 1:e=t.sent(),n=tx(s),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch($R(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),xR.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,xR.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw xR.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e=t.sent(),e={token:e,createTime:Date.now(),subscriptionOptions:r},[4,YR(n,e)];case 2:return t.sent(),[2,e.token]}})})}function ix(t){return"object"==typeof t&&t&&jR in t}function ox(e){return new Promise(function(t){setTimeout(t,e)})}var sx=(Object.defineProperty(ax.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),ax.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw xR.create("invalid-bg-handler");this.bgMessageHandler=t},ax.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},ax.prototype.getToken=function(){var n;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,QR(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:DR,t.label=2;case 2:return[2,ex(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},ax.prototype.deleteToken=function(){return nx(this.firebaseDependencies,self.registration)},ax.prototype.requestPermission=function(){throw xR.create("only-available-in-window")},ax.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw xR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw xR.create("invalid-vapid-key");this.vapidKey=t},ax.prototype.useServiceWorker=function(){throw xR.create("only-available-in-window")},ax.prototype.onMessage=function(){throw xR.create("only-available-in-window")},ax.prototype.onTokenRefresh=function(){throw xR.create("only-available-in-window")},ax.prototype.onPush=function(c){return $i(this,void 0,void 0,function(){var s,a,u;return Zi(this,function(t){switch(t.label){case 0:return(u=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(c))?[4,ux()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(s=t.sent(),s.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=RR.PUSH_RECEIVED;try{for(var i=to(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(s,u)]:(a=!1,u.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed.");return self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((o=Ji({},(r=u).notification)).data=((i={})[MR]=r,i),o))]:[3,3]);case 2:t.sent(),a=!0,t.label=3;case 3:return!0===a&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(n={from:(e=u).from,collapseKey:e.collapse_key},r=n,(i=e).notification&&(r.notification={},(o=i.notification.title)&&(r.notification.title=o),(o=i.notification.body)&&(r.notification.body=o),(i=i.notification.image)&&(r.notification.image=i)),r=n,(i=e).data&&(r.data=i.data),r=n,(i=e).fcmOptions&&(r.fcmOptions={},(e=i.fcmOptions.link)&&(r.fcmOptions.link=e),(i=i.fcmOptions.analytics_label)&&(r.fcmOptions.analyticsLabel=i)),u=n,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(u):this.bgMessageHandler.next(u)),[4,ox(1e3)]);case 4:return t.sent(),[2]}var e,n,r,i,o})})},ax.prototype.onSubChange=function(n){var r;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,nx(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,QR(this.firebaseDependencies)];case 3:return e=t.sent(),[4,nx(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,ex(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:DR)];case 5:return t.sent(),[2]}})})},ax.prototype.onNotificationClick=function(s){var a;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return(e=null===(a=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===a?void 0:a[MR])?s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(n=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;if(n)return n;return ix(t.data)?self.location.origin:null}(e))?(r=new URL(n,self.location.href),i=new URL(self.location.origin),r.host!==i.host?[2]:[4,function(u){return $i(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:return[4,ux()];case 1:e=t.sent();try{for(n=to(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]):[2]):[2];case 1:return(o=t.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return o=t.sent(),[4,ox(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=t.sent(),t.label=6;case 6:return o?(e.messageType=RR.NOTIFICATION_CLICKED,e.isFirebaseMessaging=!0,[2,o.postMessage(e)]):[2]}})})},ax);function ax(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function ux(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var cx=(Object.defineProperty(hx.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),hx.prototype.messageEventListener=function(i){return $i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===RR.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),ix(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},hx.prototype.getVapidKey=function(){return this.vapidKey},hx.prototype.getSwReg=function(){return this.swRegistration},hx.prototype.getToken=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw xR.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,ex(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},hx.prototype.updateVapidKey=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=DR),[2]})})},hx.prototype.updateSwReg=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw xR.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},hx.prototype.registerDefaultSw=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),xR.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},hx.prototype.deleteToken=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,nx(this.firebaseDependencies,this.swRegistration)]}})})},hx.prototype.requestPermission=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?xR.create("permission-blocked"):xR.create("permission-default")}})})},hx.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw xR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw xR.create("invalid-vapid-key");this.vapidKey=t},hx.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw xR.create("invalid-sw-registration");if(this.swRegistration)throw xR.create("use-sw-after-get-token");this.swRegistration=t},hx.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},hx.prototype.setBackgroundMessageHandler=function(){throw xR.create("only-available-in-sw")},hx.prototype.onBackgroundMessage=function(){throw xR.create("only-available-in-sw")},hx.prototype.onTokenRefresh=function(){return function(){}},hx.prototype.logEvent=function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case RR.NOTIFICATION_CLICKED:return"notification_open";case RR.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[jR],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},hx);function hx(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function lx(t){return xR.create("missing-app-config-values",{valueName:t})}Sn={isSupported:fx};function fx(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Jl.INTERNAL.registerComponent(new Zo("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw lx("App Configuration Object");if(!t.name)throw lx("App Name");var r=t.options;try{for(var i=to(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw lx(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!fx())throw xR.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?sx:cx)(t)},"PUBLIC").setServiceProps(Sn));var px,dx="firebasestorage.googleapis.com",vx="storageBucket",yx=(Xi(gx,px=To),gx.prototype._codeEquals=function(t){return mx(t)===this.code},Object.defineProperty(gx.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(gx.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),gx);function gx(t,e){t=px.call(this,mx(t),"Firebase Storage: "+e+" ("+mx(t)+")")||this;return t.customData={serverResponse:null},Object.setPrototypeOf(t,gx.prototype),t}function mx(t){return"storage/"+t}function bx(){return new yx("unknown","An unknown error occurred, please check the error payload for server response.")}function _x(){return new yx("canceled","User canceled the upload/download.")}function wx(){return new yx("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ix(t){return new yx("invalid-argument",t)}function Ex(){return new yx("app-deleted","The Firebase app was deleted.")}function Tx(t){return new yx("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sx(t,e){return new yx("invalid-format","String does not match format '"+t+"': "+e)}function Cx(t){throw new yx("internal-error","Internal error: "+t)}var Nx={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ax=function(t,e){this.data=t,this.contentType=e||null};function kx(t,e){switch(t){case Nx.RAW:return new Ax(Px(e));case Nx.BASE64:case Nx.BASE64URL:return new Ax(Ox(t,e));case Nx.DATA_URL:return new Ax(function(t){t=new Rx(t);return t.base64?Ox(Nx.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Sx(Nx.DATA_URL,"Malformed data URL.")}return Px(e)}(t.rest)}(e),new Rx(e).contentType)}throw bx()}function Px(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Ox(e,t){switch(e){case Nx.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Sx(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Nx.BASE64URL:r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw Sx(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(t){throw Sx(e,"Invalid character found")}for(var o=new Uint8Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}var Rx=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw Sx(Nx.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)};var xx,Dx={STATE_CHANGED:"state_changed"},Lx={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Mx(t){switch(t){case"running":case"pausing":case"canceling":return Lx.RUNNING;case"paused":return Lx.PAUSED;case"success":return Lx.SUCCESS;case"canceled":return Lx.CANCELED;case"error":default:return Lx.ERROR}}(W=xx=xx||{})[W.NO_ERROR=0]="NO_ERROR",W[W.NETWORK_ERROR=1]="NETWORK_ERROR",W[W.ABORT=2]="ABORT";var jx=(Fx.prototype.send=function(t,e,n,r){if(this.sent_)throw Cx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},Fx.prototype.getErrorCode=function(){if(!this.sent_)throw Cx("cannot .getErrorCode() before sending");return this.errorCode_},Fx.prototype.getStatus=function(){if(!this.sent_)throw Cx("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},Fx.prototype.getResponseText=function(){if(!this.sent_)throw Cx("cannot .getResponseText() before sending");return this.xhr_.responseText},Fx.prototype.abort=function(){this.xhr_.abort()},Fx.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},Fx.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},Fx.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},Fx);function Fx(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=xx.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=xx.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=xx.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var Ux=(Vx.prototype.createXhrIo=function(){return new jx},Vx);function Vx(){}function qx(t){return"string"==typeof t||t instanceof String}function Bx(t){return zx()&&t instanceof Blob}function zx(){return"undefined"!=typeof Blob}function Hx(t,e,n,r){if(r<e)throw Ix("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw Ix("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Gx(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(zx())return new Blob(t);throw new yx("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Wx=(Kx.prototype.size=function(){return this.size_},Kx.prototype.type=function(){return this.type_},Kx.prototype.slice=function(t,e){if(Bx(this.data_)){var n=this.data_,r=(i=t,r=e,(n=n).webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===r?null:new Kx(r)}var i,r;return new Kx(new Uint8Array(this.data_.buffer,t,e-t),!0)},Kx.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(zx()){var n=t.map(function(t){return t instanceof Kx?t.data_:t});return new Kx(Gx.apply(null,n))}var n=t.map(function(t){return qx(t)?kx(Nx.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new Kx(i,!0)},Kx.prototype.uploadData=function(){return this.data_},Kx);function Kx(t,e){var n=0,r="";Bx(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var Qx=(Object.defineProperty(Yx.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(Yx.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),Yx.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},Yx.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},Yx.makeFromBucketSpec=function(e){var t;try{t=Yx.makeFromUrl(e)}catch(t){return new Yx(e,"")}if(""===t.path)return t;throw new yx("invalid-default-bucket","Invalid default bucket '"+e+"'.")},Yx.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)";var r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=dx.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){e=new Yx(c[u.indices.bucket],c[u.indices.path]||"");u.postModify(e);break}}if(null==e)throw new yx("invalid-url","Invalid URL '"+t+"'.");return e},Yx);function Yx(t,e){this.bucket=t,this.path_=e}function Xx(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Jx(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function $x(t){return"https://"+dx+"/v0"+t}function Zx(t){var e,n=encodeURIComponent,r="?";for(e in t)t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&");return r=r.slice(0,-1)}function tD(t,e){return e}var eD=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||tD},nD=null;function rD(){if(nD)return nD;var t=[];t.push(new eD("bucket")),t.push(new eD("generation")),t.push(new eD("metageneration")),t.push(new eD("name","fullPath",!0));var e=new eD("name");e.xform=function(t,e){return!qx(e=e)||e.length<2?e:Jx(e)},t.push(e);e=new eD("size");return e.xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new eD("timeCreated")),t.push(new eD("updated")),t.push(new eD("md5Hash",null,!0)),t.push(new eD("cacheControl",null,!0)),t.push(new eD("contentDisposition",null,!0)),t.push(new eD("contentEncoding",null,!0)),t.push(new eD("contentLanguage",null,!0)),t.push(new eD("contentType",null,!0)),t.push(new eD("metadata","customMetadata",!0)),nD=t}function iD(n,r){Object.defineProperty(n,"ref",{get:function(){var t=n.bucket,e=n.fullPath,e=new Qx(t,e);return r._makeStorageReference(e)}})}function oD(t,e,n){e=Xx(e);if(null===e)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return iD(r,t),r}(t,e,n)}function sD(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var aD="prefixes",uD="items";function cD(t,e,n){n=Xx(n);if(null===n)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[aD])for(var i=0,o=n[aD];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Qx(e,s));r.prefixes.push(a)}if(n[uD])for(var u=0,c=n[uD];u<c.length;u++){var h=c[u],a=t._makeStorageReference(new Qx(e,h.name));r.items.push(a)}return r}(t,e,n)}var hD=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function lD(t){if(!t)throw bx()}function fD(n,r){return function(t,e){return lD(null!==(e=oD(n,e,r))),e}}function pD(n,r){return function(t,e){return lD(null!==(e=cD(n,r,e))),e}}function dD(r,i){return function(t,e){var n=oD(r,e,i);return lD(null!==n),function(r,t){if(null===(t=Xx(t)))return null;if(!qx(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var i=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return $x("/b/"+i(e)+"/o/"+i(n))+Zx({alt:"media",token:t})})[0]}(n,e)}}function vD(i){return function(t,e){var n,r=401===t.getStatus()?new yx("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new yx("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new yx("unauthorized","User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function yD(r){var i=vD(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new yx("object-not-found","Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function gD(t,e,n){var r=$x(e.fullServerUrl()),i=t.maxOperationRetryTime,i=new hD(r,"GET",fD(t,n),i);return i.errorHandler=yD(e),i}function mD(t,e,n){n=Object.assign({},n);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function bD(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=mD(e,r,i),i="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+sD(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",a="\r\n--"+a+"--",r=Wx.getBlob(i,r,a);if(null===r)throw wx();a={name:u.fullPath},u=$x(o),o=t.maxUploadRetryTime,o=new hD(u,"POST",fD(t,n),o);return o.urlParams=a,o.headers=s,o.body=r.uploadData(),o.errorHandler=vD(e),o}var _D=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function wD(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){lD(!1)}return lD(!!n&&-1!==(e||["active"]).indexOf(n)),n}function ID(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=mD(e,r,i),i={name:s.fullPath},o=$x(o),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},n=sD(s,n),t=t.maxUploadRetryTime;t=new hD(o,"POST",function(t){var e;wD(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){lD(!1)}return lD(qx(e)),e},t);return t.urlParams=i,t.headers=r,t.body=n,t.errorHandler=vD(e),t}function ED(t,e,n,i){t=t.maxUploadRetryTime,t=new hD(n,"POST",function(t){var e=wD(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){lD(!1)}n||lD(!1);var r=Number(n);return lD(!isNaN(r)),new _D(r,i.size(),"final"===e)},t);return t.headers={"X-Goog-Upload-Command":"query"},t.errorHandler=vD(e),t}function TD(t,o,e,s,n,a,r,i){var u=new _D(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw new yx("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;0<n&&(h=Math.min(h,n));r=u.current,n=r+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},r=s.slice(r,n);if(null===r)throw wx();n=o.maxUploadRetryTime,n=new hD(e,"POST",function(t,e){var n=wD(t,["active","final"]),r=u.current+h,i=s.size(),e="final"===n?fD(o,a)(t,e):null;return new _D(r,i,"final"===n,e)},n);return n.headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=vD(t),n}var SD=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(t=t,this.next=t.next,this.error=t.error,this.complete=t.complete)};function CD(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var ND=(AD.prototype._makeProgressCallback=function(){var e=this,n=this._transferred;return function(t){return e._updateProgress(n+t)}},AD.prototype._shouldDoResumable=function(t){return 262144<t.size()},AD.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},AD.prototype._resolveToken=function(e){var n=this;this._ref.storage._getAuthToken().then(function(t){switch(n._state){case"running":e(t);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused")}})},AD.prototype._createResumable=function(){var n=this;this._resolveToken(function(t){var e=ID(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._uploadUrl=t,n._needToFetchStatus=!1,n.completeTransitions_()},n._errorHandler)})},AD.prototype._fetchStatus=function(){var n=this,r=this._uploadUrl;this._resolveToken(function(t){var e=ED(n._ref.storage,n._ref._location,r,n._blob),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._updateProgress(t.current),n._needToFetchStatus=!1,t.finalized&&(n._needToFetchMetadata=!0),n.completeTransitions_()},n._errorHandler)})},AD.prototype._continueUpload=function(){var n=this,r=262144*this._chunkMultiplier,i=new _D(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken(function(t){var e;try{e=TD(n._ref._location,n._ref.storage,o,n._blob,r,n._mappings,i,n._makeProgressCallback())}catch(t){return n._error=t,void n._transition("error")}t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._increaseMultiplier(),n._request=void 0,n._updateProgress(t.current),t.finalized?(n._metadata=t.metadata,n._transition("success")):n.completeTransitions_()},n._errorHandler)})},AD.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},AD.prototype._fetchMetadata=function(){var n=this;this._resolveToken(function(t){var e=gD(n._ref.storage,n._ref._location,n._mappings),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._transition("success")},n._metadataErrorHandler)})},AD.prototype._oneShotUpload=function(){var n=this;this._resolveToken(function(t){var e=bD(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._updateProgress(n._blob.size()),n._transition("success")},n._errorHandler)})},AD.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},AD.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=_x(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},AD.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(AD.prototype,"snapshot",{get:function(){var t=Mx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),AD.prototype.on=function(t,e,n,r){var i=this,o=new SD(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},AD.prototype.then=function(t,e){return this._promise.then(t,e)},AD.prototype.catch=function(t){return this.then(null,t)},AD.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},AD.prototype._removeObserver=function(t){t=this._observers.indexOf(t);-1!==t&&this._observers.splice(t,1)},AD.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},AD.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Mx(this._state)){case Lx.SUCCESS:CD(this._resolve.bind(null,this.snapshot))();break;case Lx.CANCELED:case Lx.ERROR:CD(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},AD.prototype._notifyObserver=function(t){switch(Mx(this._state)){case Lx.RUNNING:case Lx.PAUSED:t.next&&CD(t.next.bind(t,this.snapshot))();break;case Lx.SUCCESS:t.complete&&CD(t.complete.bind(t))();break;case Lx.CANCELED:case Lx.ERROR:t.error&&CD(t.error.bind(t,this._error))();break;default:t.error&&CD(t.error.bind(t,this._error))()}},AD.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},AD.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},AD.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},AD);function AD(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=rD(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}var kD=(PD.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},PD.prototype._newRef=function(t,e){return new PD(t,e)},Object.defineProperty(PD.prototype,"root",{get:function(){var t=new Qx(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(PD.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(PD.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(PD.prototype,"name",{get:function(){return Jx(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(PD.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(PD.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;t=new Qx(this._location.bucket,t);return new PD(this._service,t)},enumerable:!1,configurable:!0}),PD.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Tx(t)},PD);function PD(t,e){this._service=t,this._location=e instanceof Qx?e:Qx.makeFromUrl(e)}function OD(t){var e={prefixes:[],items:[]};return function r(i,o,s){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,RD(i,{pageToken:s})];case 1:return e=t.sent(),(n=o.prefixes).push.apply(n,e.prefixes),(n=o.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,r(i,o,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(t,e).then(function(){return e})}function RD(c,h){return $i(this,void 0,void 0,function(){var a,u;return Zi(this,function(t){switch(t.label){case 0:return null!=h&&"number"==typeof h.maxResults&&Hx("options.maxResults",1,1e3,h.maxResults),[4,c.storage._getAuthToken()];case 1:return a=t.sent(),u=h||{},e=c.storage,n=c._location,r="/",i=u.pageToken,o=u.maxResults,s={},n.isRoot?s.prefix="":s.prefix=n.path+"/",r&&0<r.length&&(s.delimiter=r),i&&(s.pageToken=i),o&&(s.maxResults=o),i=$x(n.bucketOnlyServerUrl()),o=e.maxOperationRetryTime,(o=new hD(i,"GET",pD(e,n.bucket),o)).urlParams=s,o.errorHandler=vD(n),[2,c.storage._makeRequest(o,a).getPromise()]}var e,n,r,i,o,s})})}function xD(u,c){return $i(this,void 0,void 0,function(){var a;return Zi(this,function(t){switch(t.label){case 0:return u._throwIfRoot("updateMetadata"),[4,u.storage._getAuthToken()];case 1:return a=t.sent(),e=u.storage,n=u._location,r=c,i=rD(),o=$x(n.fullServerUrl()),s=sD(r,i),r=e.maxOperationRetryTime,(r=new hD(o,"PATCH",fD(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=s,r.errorHandler=yD(n),[2,u.storage._makeRequest(r,a).getPromise()]}var e,n,r,i,o,s})})}function DD(a){return $i(this,void 0,void 0,function(){var s;return Zi(this,function(t){switch(t.label){case 0:return a._throwIfRoot("getDownloadURL"),[4,a.storage._getAuthToken()];case 1:return s=t.sent(),e=a.storage,n=a._location,r=rD(),i=$x(n.fullServerUrl()),o=e.maxOperationRetryTime,(o=new hD(i,"GET",dD(e,r),o)).errorHandler=yD(n),[2,a.storage._makeRequest(o,s).getPromise().then(function(t){if(null===t)throw new yx("no-download-url","The given file does not have any download URLs.");return t})]}var e,n,r,i,o})})}function LD(o){return $i(this,void 0,void 0,function(){var i;return Zi(this,function(t){switch(t.label){case 0:return o._throwIfRoot("deleteObject"),[4,o.storage._getAuthToken()];case 1:return i=t.sent(),e=o.storage,n=o._location,r=$x(n.fullServerUrl()),e=e.maxOperationRetryTime,(e=new hD(r,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=yD(n),[2,o.storage._makeRequest(e,i).getPromise()]}var e,n,r})})}function MD(t,e){var n,e=(n=t._location.path,e=(e=e).split("/").filter(function(t){return 0<t.length}).join("/"),0===n.length?e:n+"/"+e),e=new Qx(t._location.bucket,e);return new kD(t.storage,e)}var jD=(Object.defineProperty(FD.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(FD.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(FD.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(FD.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),FD);function FD(t,e,n){this._delegate=t,this.task=e,this.ref=n}var UD=(Object.defineProperty(VD.prototype,"snapshot",{get:function(){return new jD(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),VD.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new jD(t,n,n._ref))},t)},VD.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new jD(t,i,i._ref))}:{next:e.next?function(t){return e.next(new jD(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},VD);function VD(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var qD=(Object.defineProperty(BD.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new zD(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(BD.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new zD(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(BD.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),BD);function BD(t,e){this._delegate=t,this._service=e}var zD=(Object.defineProperty(HD.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(HD.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(HD.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),HD.prototype.toString=function(){return this._delegate.toString()},HD.prototype.child=function(t){return new HD(MD(this._delegate,t),this.storage)},Object.defineProperty(HD.prototype,"root",{get:function(){return new HD(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(HD.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new HD(t,this.storage)},enumerable:!1,configurable:!0}),HD.prototype.put=function(t,e){return this._throwIfRoot("put"),new UD((n=this._delegate,t=t,e=e,n._throwIfRoot("uploadBytesResumable"),new ND(n,new Wx(t),e)),this);var n},HD.prototype.putString=function(t,e,n){void 0===e&&(e=Nx.RAW),this._throwIfRoot("putString");t=kx(e,t),n=Ji({},n);return null==n.contentType&&null!=t.contentType&&(n.contentType=t.contentType),new UD(new ND(this._delegate,new Wx(t.data,!0),n),this)},HD.prototype.listAll=function(){var e=this;return OD(this._delegate).then(function(t){return new qD(t,e.storage)})},HD.prototype.list=function(t){var e=this;return RD(this._delegate,t).then(function(t){return new qD(t,e.storage)})},HD.prototype.getMetadata=function(){return function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return r._throwIfRoot("getMetadata"),[4,r.storage._getAuthToken()];case 1:return e=t.sent(),n=gD(r.storage,r._location,rD()),[2,r.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},HD.prototype.updateMetadata=function(t){return xD(this._delegate,t)},HD.prototype.getDownloadURL=function(){return DD(this._delegate)},HD.prototype.delete=function(){return this._throwIfRoot("delete"),LD(this._delegate)},HD.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Tx(t)},HD);function HD(t,e){this._delegate=t,this.storage=e}var GD=(WD.prototype.getPromise=function(){return this.promise_},WD.prototype.cancel=function(t){},WD);function WD(t){this.promise_=Promise.reject(t)}var KD=(QD.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());void 0!==s?r(s):r()}catch(t){i(t)}else null!==o?((n=bx()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?Ex:_x)()):i(n=new yx("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,no([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new YD(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new YD(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===xx.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new YD(n,t))):(t=t.getErrorCode()===xx.ABORT,r(!1,new YD(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){o=!0,v(!0)},t),v)},QD.prototype.getPromise=function(){return this.promise_},QD.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},QD.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},QD);function QD(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var YD=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function XD(t){return/^[A-Za-z]+:\/\//.test(t)}function JD(t,e){if(t instanceof ZD){var n=t;if(null==n._bucket)throw new yx("no-default-bucket","No default bucket found. Did you set the '"+vx+"' property when initializing the app?");n=new kD(n,n._bucket);return null!=e?JD(n,e):n}if(void 0===e)return t;if(e.includes(".."))throw Ix('`path` param cannot contain ".."');return MD(t,e)}function $D(t,e){if(e&&XD(e)){if(t instanceof ZD)return new kD(t,e);throw Ix("To use ref(service, url), the first argument must be a Storage instance.")}return JD(t,e)}var ZD=(Object.defineProperty(tL.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Hx("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(tL.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Hx("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),tL.prototype._getAuthToken=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},tL.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},tL.prototype._makeStorageReference=function(t){return new kD(this,t)},tL.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new GD(Ex());var r,i,o,s,a,u,c=(r=t,i=this._appId,o=e,s=this._pool,a=this._firebaseVersion,u=Zx(r.urlParams),t=r.url+u,e=Object.assign({},r.headers),u=e,(i=i)&&(u["X-Firebase-GMPID"]=i),i=e,null!==(o=o)&&0<o.length&&(i.Authorization="Firebase "+o),a=a,e["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager"),new KD(t,r.method,e,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s));return this._requests.add(c),c.getPromise().then(function(){return n._requests.delete(c)},function(){return n._requests.delete(c)}),c},tL);function tL(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Qx.makeFromBucketSpec(r):null==(r=null==(r=this.app.options)?void 0:r[vx])?null:Qx.makeFromBucketSpec(r)}var eL=(Object.defineProperty(nL.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(nL.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),nL.prototype.ref=function(t){if(XD(t))throw Ix("ref() expected a child path but got a URL, use refFromURL instead.");return new zD($D(this._delegate,t),this)},nL.prototype.refFromURL=function(t){if(!XD(t))throw Ix("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qx.makeFromUrl(t)}catch(t){throw Ix("refFromUrl() expected a valid full URL but got an invalid one.")}return new zD($D(this._delegate,t),this)},nL.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},nL.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},nL);function nL(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var rL,iL;function oL(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new eL(n,new ZD(n,t,new Ux,e,Jl.SDK_VERSION))}iL={TaskState:Lx,TaskEvent:Dx,StringFormat:Nx,Storage:ZD,Reference:zD},(rL=Jl).INTERNAL.registerComponent(new Zo("storage",oL,"PUBLIC").setServiceProps(iL).setMultipleInstances(!0)),rL.registerVersion("@firebase/storage","0.4.4");var sL,aL,uL="0.4.7",cL="FB-PERF-TRACE-MEASURE",hL="@firebase/performance/config",lL="@firebase/performance/configexpire",Sn="Performance",W=((W={})["trace started"]="Trace {$traceName} was started before.",W["trace stopped"]="Trace {$traceName} is not running.",W["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",W["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",W["no window"]="Window is not available.",W["no app id"]="App id is not available.",W["no project id"]="Project id is not available.",W["no api key"]="Api key is not available.",W["invalid cc log"]="Attempted to queue invalid cc event",W["FB not default"]="Performance can only start when Firebase app instance is the default one.",W["RC response not ok"]="RC response is not ok",W["invalid attribute name"]="Attribute name {$attributeName} is invalid.",W["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",W["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",W["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",W),fL=new Co("performance",Sn,W),pL=new fs(Sn);pL.logLevel=ss.INFO;var dL,vL=(yL.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},yL.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},yL.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},yL.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},yL.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},yL.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},yL.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!bo()||(pL.info("IndexedDB is not supported by current browswer"),!1):(pL.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},yL.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},yL.getInstance=function(){return sL=void 0===sL?new yL(aL):sL},yL);function yL(t){if(!(this.window=t))throw fL.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function gL(t,e){var n=t.length-e.length;if(n<0||1<n)throw fL.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var mL,bL,_L=(wL.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw fL.create("no app id");return t},wL.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw fL.create("no project id");return t},wL.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw fL.create("no api key");return t},wL.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},wL.getInstance=function(){return dL=void 0===dL?new wL:dL},wL);function wL(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=gL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=gL("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(Sn=bL=bL||{})[Sn.UNKNOWN=0]="UNKNOWN",Sn[Sn.VISIBLE=1]="VISIBLE",Sn[Sn.HIDDEN=2]="HIDDEN";var IL=["firebase_","google_","ga_"],EL=new RegExp("^[a-zA-Z]\\w*$");function TL(){switch(vL.getInstance().document.visibilityState){case"visible":return bL.VISIBLE;case"hidden":return bL.HIDDEN;default:return bL.UNKNOWN}}var SL="0.0.1",CL={loggingEnabled:!0},NL="FIREBASE_INSTALLATIONS_AUTH";function AL(t){var n,e=function(){var t=vL.getInstance().localStorage;if(!t)return;var e=t.getItem(lL);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(hL);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(PL(e),Promise.resolve()):(n=t,function(){var t=_L.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+_L.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+_L.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:NL+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:_L.getInstance().getAppId(),app_version:uL,sdk_version:SL})});return fetch(t).then(function(t){if(t.ok)return t.json();throw fL.create("RC response not ok")})}).catch(function(){pL.info(kL)}).then(PL).then(function(t){var e=vL.getInstance().localStorage;if(!t||!e)return;e.setItem(hL,JSON.stringify(t)),e.setItem(lL,String(Date.now()+60*_L.getInstance().configTimeToLive*60*1e3))},function(){}))}var kL="Could not fetch config, will use default configs";function PL(t){if(!t)return t;var e=_L.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):CL.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=OL(e.tracesSamplingRate),e.logNetworkAfterSampling=OL(e.networkRequestsSamplingRate),t}function OL(t){return Math.random()<=t}var RL,xL=1;function DL(){return xL=2,RL=RL||function(){var n=vL.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=_L.getInstance().installationsService.getId()).then(function(t){mL=t}),t;var t}).then(AL).then(LL,LL)}function LL(){xL=3}var ML,jL=1e4,FL=5500,UL=3,VL=1e3,qL=UL,BL=[],zL=!1;function HL(t){setTimeout(function(){var t,e;if(0!==qL)return BL.length?(t=BL.splice(0,VL),e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,r){return function(t){var e=_L.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||pL.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=jL;isNaN(e)||(n=Math.max(e,n));t=t.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(BL=no(no([],r),BL),pL.info("Retry transport request later.")),qL=UL,HL(n)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:_L.getInstance().logSource,log_event:e},t).catch(function(){BL=no(no([],t),BL),qL--,pL.info("Tries left: "+qL+"."),HL(jL)})):HL(jL)},t)}function GL(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw fL.create("invalid cc log");BL=no(no([],BL),[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function WL(t,e){(ML=ML||GL(YL))(t,e)}function KL(t){var e=_L.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&vL.getInstance().requiredApisAvailable()&&(t.isAuto&&TL()!==bL.VISIBLE||(3===xL?QL(t):DL().then(function(){return QL(t)},function(){return QL(t)})))}function QL(t){var e;!mL||(e=_L.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return WL(t,1)},0)}function YL(t,e){return(0===e?function(t){t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:XL(),network_request_metric:t};return JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);t=t.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);e={application_info:XL(),trace_metric:e};return JSON.stringify(e)})(t)}function XL(){return{google_app_id:_L.getInstance().getAppId(),app_instance_id:mL,web_app_info:{sdk_version:uL,page_url:vL.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=vL.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:TL(),effective_connection_type:function(){var t=vL.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var JL=["_fp","_fcp","_fid"];var $L=(ZL.prototype.start=function(){if(1!==this.state)throw fL.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},ZL.prototype.stop=function(){if(2!==this.state)throw fL.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),KL(this)},ZL.prototype.record=function(t,e,n){if(t<=0)throw fL.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw fL.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Ji({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}KL(this)},ZL.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},ZL.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<JL.indexOf(n))&&n.startsWith("_"))throw fL.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&pL.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},ZL.prototype.getMetric=function(t){return this.counters[t]||0},ZL.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length)&&(!IL.some(function(t){return n.startsWith(t)})&&!!n.match(EL)),r=0!==(r=e).length&&r.length<=100;if(i&&r)this.customAttributes[t]=e;else{if(!i)throw fL.create("invalid attribute name",{attributeName:t});if(!r)throw fL.create("invalid attribute value",{attributeValue:e})}},ZL.prototype.getAttribute=function(t){return this.customAttributes[t]},ZL.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},ZL.prototype.getAttributes=function(){return Ji({},this.customAttributes)},ZL.prototype.setStartTime=function(t){this.startTimeUs=t},ZL.prototype.setDuration=function(t){this.durationUs=t},ZL.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),t=t&&t[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},ZL.createOobTrace=function(t,e,n){var r,i=vL.getInstance().getUrl();i&&(r=new ZL("_wt_"+i,!0),i=Math.floor(1e3*vL.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),KL(r))},ZL.createUserTimingTrace=function(t){KL(new ZL(t,!1,t))},ZL);function ZL(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=vL.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||cL+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function tM(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=vL.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=_L.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return WL(e,0)},0)))}var eM=5e3;function nM(){mL&&(setTimeout(function(){var t=vL.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){$L.createOobTrace(e,n),r=void 0},eM),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),$L.createOobTrace(e,n,t))})):$L.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=vL.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++)tM(r[n]);t.setupObserver("resource",tM)},0),setTimeout(function(){for(var t=vL.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++)rM(r[n]);t.setupObserver("measure",rM)},0))}function rM(t){t=t.name;t.substring(0,cL.length)!==cL&&$L.createUserTimingTrace(t)}var iM=(oM.prototype.trace=function(t){return new $L(t)},Object.defineProperty(oM.prototype,"instrumentationEnabled",{get:function(){return _L.getInstance().instrumentationEnabled},set:function(t){_L.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(oM.prototype,"dataCollectionEnabled",{get:function(){return _L.getInstance().dataCollectionEnabled},set:function(t){_L.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),oM);function oM(t){this.app=t,vL.getInstance().requiredApisAvailable()&&_o().then(function(t){t&&(zL||(HL(FL),zL=!0),DL().then(nM,nM))}).catch(function(t){pL.info("Environment doesn't support IndexedDB: "+t)})}var sM;function aM(t,e){if("[DEFAULT]"!==t.name)throw fL.create("FB not default");if("undefined"==typeof window)throw fL.create("no window");return aL=window,_L.getInstance().firebaseAppInstance=t,_L.getInstance().installationsService=e,new iM(t)}(sM=Jl).INTERNAL.registerComponent(new Zo("performance",function(t){var e=t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate();return aM(e,t)},"PUBLIC")),sM.registerVersion("@firebase/performance","0.4.7");var uM,cM,hM="firebase_id",lM="origin",fM=6e4,pM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dM="https://www.googletagmanager.com/gtag/js";(Sn=uM=uM||{}).EVENT="event",Sn.SET="set",Sn.CONFIG="config",(Sn=cM=cM||{}).ADD_SHIPPING_INFO="add_shipping_info",Sn.ADD_PAYMENT_INFO="add_payment_info",Sn.ADD_TO_CART="add_to_cart",Sn.ADD_TO_WISHLIST="add_to_wishlist",Sn.BEGIN_CHECKOUT="begin_checkout",Sn.CHECKOUT_PROGRESS="checkout_progress",Sn.EXCEPTION="exception",Sn.GENERATE_LEAD="generate_lead",Sn.LOGIN="login",Sn.PAGE_VIEW="page_view",Sn.PURCHASE="purchase",Sn.REFUND="refund",Sn.REMOVE_FROM_CART="remove_from_cart",Sn.SCREEN_VIEW="screen_view",Sn.SEARCH="search",Sn.SELECT_CONTENT="select_content",Sn.SELECT_ITEM="select_item",Sn.SELECT_PROMOTION="select_promotion",Sn.SET_CHECKOUT_OPTION="set_checkout_option",Sn.SHARE="share",Sn.SIGN_UP="sign_up",Sn.TIMING_COMPLETE="timing_complete",Sn.VIEW_CART="view_cart",Sn.VIEW_ITEM="view_item",Sn.VIEW_ITEM_LIST="view_item_list",Sn.VIEW_PROMOTION="view_promotion",Sn.VIEW_SEARCH_RESULTS="view_search_results";var vM=new fs("@firebase/analytics");function yM(o,s,a,u){return function(n,r,i){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==uM.EVENT?[3,2]:[4,function(u,c,h,l,f){return $i(this,void 0,void 0,function(){var n,r,e,i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:return(t.trys.push([0,4,,5]),n=[],f&&f.send_to)?(a=f.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e}),t=t&&c[t.appId];if(!t)return n=[],"break";n.push(t)},i=0,o=a;i<o.length&&(s=o[i],"break"!==e(s));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(uM.EVENT,l,f||{}),[3,5];case 4:return a=t.sent(),vM.error(a),[3,5];case 5:return[2]}})})}(o,s,a,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==uM.CONFIG?[3,4]:[4,function(r,i,o,s,a,u){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:e=s[a],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return n=t.sent(),(n=n.find(function(t){return t.measurementId===a}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),vM.error(n),[3,8];case 8:return r(uM.CONFIG,a,u),[2]}})})}(o,s,a,u,r,i)];case 3:return t.sent(),[3,5];case 4:o(uM.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),vM.error(e),[3,7];case 7:return[2]}})})}}var Sn=((Sn={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Sn["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Sn["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Sn["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Sn["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Sn["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Sn["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Sn["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Sn["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Sn),gM=new Co("analytics","Analytics",Sn),mM=30;function bM(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var _M=new(bM.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},bM.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},bM.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},bM);function wM(o){var s;return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=pM.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(s=i.error)&&void 0!==s&&s.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw gM.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}function IM(a,u,c){return void 0===u&&(u=_M),$i(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Zi(this,function(t){if(i=a.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw gM.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new SM,setTimeout(function(){return $i(s,void 0,void 0,function(){return Zi(this,function(t){return o.abort(),[2]})})},void 0!==c?c:fM),[2,function s(a,t,u,c){var h=t.throttleEndTimeMillis,l=t.backoffCount;void 0===c&&(c=_M);return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:e=a.appId,n=a.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,EM(u,h)];case 2:return t.sent(),[3,4];case 3:if(i=t.sent(),n)return vM.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+i.message+"]"),[2,{appId:e,measurementId:n}];throw i;case 4:return t.trys.push([4,6,,7]),[4,wM(a)];case 5:return o=t.sent(),c.deleteThrottleMetadata(e),[2,o];case 6:if(TM(r=t.sent()))return i=503===Number(r.customData.httpStatus)?$o(l,c.intervalMillis,mM):$o(l,c.intervalMillis),o={throttleEndTimeMillis:Date.now()+i,backoffCount:l+1},c.setThrottleMetadata(e,o),vM.debug("Calling attemptFetch again in "+i+" millis"),[2,s(a,o,u,c)];if(c.deleteThrottleMetadata(e),n)return vM.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw gM.create("no-api-key")})})}function EM(i,o){return new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(gM.create("fetch-throttle",{throttleEndTimeMillis:o}))})})}function TM(t){if(t instanceof To&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}var SM=(CM.prototype.addEventListener=function(t){this.listeners.push(t)},CM.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},CM);function CM(){this.listeners=[]}function NM(a,u,c,h,l,f){return $i(this,void 0,void 0,function(){var i,o,s;return Zi(this,function(t){switch(t.label){case 0:return(i=IM(a)).then(function(t){c[t.measurementId]=t.appId,a.options.measurementId&&t.measurementId!==a.options.measurementId&&vM.warn("The measurement ID in the local Firebase config ("+a.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return vM.error(t)}),u.push(i),o=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return bo()?[3,1]:(vM.warn(gM.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,_o()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),vM.warn(gM.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){if(t)return h.getId()}),[4,Promise.all([i,o])];case 1:return s=t.sent(),i=s[0],o=s[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(dM))return r}}()||(e=f,n=i.measurementId,(r=document.createElement("script")).src=dM+"?l="+e+"&id="+n,r.async=!0,document.head.appendChild(r)),l("js",new Date),(s={})[lM]="firebase",s.update=!0,s=s,null!=o&&(s[hM]=o),l(uM.CONFIG,i.measurementId,s),[2,i.measurementId]}var e,n,r})})}var AM,kM,PM={},OM=[],RM={},xM="dataLayer",DM="gtag",LM=!1;function MM(t){if(LM)throw gM.create("already-initialized");t.dataLayerName&&(xM=t.dataLayerName),t.gtagName&&(DM=t.gtagName)}function jM(t,e){i=[],yo()&&i.push("This is a browser extension environment."),wo()||i.push("Cookies are not available."),0<i.length&&(i=i.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),i=gM.create("invalid-analytics-context",{errorInfo:i}),vM.warn(i.message));var n,r,i,o,s,a,u=t.options.appId;if(!u)throw gM.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw gM.create("no-api-key");vM.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=PM[u])throw gM.create("already-exists",{id:u});return LM||(s=xM,a=[],Array.isArray(window[s])?a=window[s]:window[s]=a,n=PM,r=OM,i=RM,o=xM,s=DM,a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[o].push(arguments)},window[s]&&"function"==typeof window[s]&&(a=window[s]),window[s]=yM(a,n,r,i),s={gtagCore:a,wrappedGtag:window[s]},kM=s.wrappedGtag,AM=s.gtagCore,LM=!0),PM[u]=NM(t,OM,RM,e,AM,xM),{app:t,logEvent:function(t,e,n){(function(n,r,i,o,s){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return s&&s.global?(n(uM.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=Ji(Ji({},o),{send_to:e}),n(uM.EVENT,i,e),t.label=3;case 3:return[2]}})})})(kM,PM[u],t,e,n).catch(function(t){return vM.error(t)})},setCurrentScreen:function(t,e){(function(n,r,i,o){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return o&&o.global?(n(uM.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(uM.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})})(kM,PM[u],t,e).catch(function(t){return vM.error(t)})},setUserId:function(t,e){(function(n,r,i,o){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return o&&o.global?(n(uM.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(uM.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})})(kM,PM[u],t,e).catch(function(t){return vM.error(t)})},setUserProperties:function(t,e){(function(s,a,u,c){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(uM.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(uM.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})})(kM,PM[u],t,e).catch(function(t){return vM.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})})(PM[u],t).catch(function(t){return vM.error(t)})},INTERNAL:{delete:function(){return delete PM[u],Promise.resolve()}}}}var FM,UM="analytics";function VM(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:if(yo())return[2,!1];if(!wo())return[2,!1];if(!bo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,_o()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}(FM=Jl).INTERNAL.registerComponent(new Zo(UM,function(t){return jM(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:MM,EventName:cM,isSupported:VM})),FM.INTERNAL.registerComponent(new Zo("analytics-internal",function(t){try{return{logEvent:t.getProvider(UM).getImmediate().logEvent}}catch(t){throw gM.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),FM.registerVersion("@firebase/analytics","0.6.5");var qM=(BM.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},BM.prototype.fetch=function(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return(r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e))?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},BM);function BM(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var Sn=((Sn={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Sn["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Sn["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Sn["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Sn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Sn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Sn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Sn["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Sn["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Sn["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Sn["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Sn["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Sn["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Sn),zM=new Co("remoteconfig","Remote Config",Sn);var HM=(GM.prototype.fetch=function(f){return $i(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(e=void 0===e?navigator:e).languages&&e.languages[0]||e.language},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),zM.create(o,{originalErrorMessage:i.message});case 6:if(s=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),zM.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==s&&200!==s)throw zM.create("fetch-status",{httpStatus:s});return[2,{status:s,eTag:a,config:u}]}var e})})},GM);function GM(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var WM=(KM.prototype.addEventListener=function(t){this.listeners.push(t)},KM.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},KM);function KM(){this.listeners=[]}var QM=["1","true","t","yes","y","on"],YM=(XM.prototype.asString=function(){return this._value},XM.prototype.asBoolean=function(){return"static"!==this._source&&0<=QM.indexOf(this._value.toLowerCase())},XM.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return t=isNaN(t)?0:t},XM.prototype.getSource=function(){return this._source},XM);function XM(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var JM=($M.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ss.DEBUG;break;case"silent":this._logger.logLevel=ss.SILENT;break;default:this._logger.logLevel=ss.ERROR}},Object.defineProperty($M.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty($M.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),$M.prototype.activate=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},$M.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},$M.prototype.fetch=function(){return $i(this,void 0,void 0,function(){var r,i,o,s=this;return Zi(this,function(t){switch(t.label){case 0:r=new WM,setTimeout(function(){return $i(s,void 0,void 0,function(){return Zi(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof To&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},$M.prototype.fetchAndActivate=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},$M.prototype.getAll=function(){var n=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(Ji(Ji({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},$M.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},$M.prototype.getNumber=function(t){return this.getValue(t).asNumber()},$M.prototype.getString=function(t){return this.getValue(t).asString()},$M.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new YM("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new YM("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new YM("static"))},$M);function $M(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function ZM(t,e){t=t.target.error||void 0;return zM.create(e,{originalErrorMessage:t&&t.message})}var tj="app_namespace_store",ej="firebase_remote_config",nj=1;var rj=(ij.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},ij.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},ij.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},ij.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},ij.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},ij.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},ij.prototype.getActiveConfig=function(){return this.get("active_config")},ij.prototype.setActiveConfig=function(t){return this.set("active_config",t)},ij.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},ij.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},ij.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},ij.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},ij.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},ij.prototype.get=function(a){return $i(this,void 0,void 0,function(){var o,s=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([tj],"readonly").objectStore(tj),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){n(ZM(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result;e(t?t.value:void 0)}}catch(t){n(zM.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},ij.prototype.set=function(a,u){return $i(this,void 0,void 0,function(){var o,s=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([tj],"readwrite").objectStore(tj),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(ZM(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(zM.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},ij.prototype.delete=function(a){return $i(this,void 0,void 0,function(){var o,s=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([tj],"readwrite").objectStore(tj),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(ZM(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(zM.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},ij.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},ij);function ij(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(ej,nj);t.onerror=function(t){n(ZM(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(tj,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var oj=(sj.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},sj.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},sj.prototype.getActiveConfig=function(){return this.activeConfig},sj.prototype.loadFromStorage=function(){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},sj.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},sj.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},sj.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},sj);function sj(t){this.storage=t}var aj=(uj.prototype.fetch=function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},uj.prototype.attemptFetch=function(r,t){var s=t.throttleEndTimeMillis,a=t.backoffCount;return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,(i=r.signal,o=s,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(zM.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(r)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(t instanceof To&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}(n=t.sent()))throw n;return n={throttleEndTimeMillis:Date.now()+$o(a),backoffCount:a+1},[4,this.storage.setThrottleMetadata(n)];case 6:return t.sent(),[2,this.attemptFetch(r,n)];case 7:return[2]}var i,o})})},uj);function uj(t,e){this.client=t,this.storage=e}var cj,hj="@firebase/remote-config";return(cj=Jl).INTERNAL.registerComponent(new Zo("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw zM.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw zM.create("registration-project-id");if(!s)throw zM.create("registration-api-key");if(!a)throw zM.create("registration-app-id");e=e||"firebase";var u=new rj(a,n.name,e),t=new oj(u),i=new fs(hj);i.logLevel=ss.ERROR;a=new HM(r,cj.SDK_VERSION,e,o,s,a),a=new aj(a,u),a=new qM(a,u,t,i),i=new JM(n,a,t,u,i);return i.ensureInitialized(),i},"PUBLIC").setMultipleInstances(!0)),cj.registerVersion(hj,"0.1.32"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Jl.registerVersion("firebase","8.3.0","cdn"),Jl});
//# sourceMappingURL=firebase.js.map
